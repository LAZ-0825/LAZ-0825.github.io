{
    "version": "https://jsonfeed.org/version/1",
    "title": "LXR的小站 • All posts by \"数据库\" tag",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/passages/%E4%BD%BF%E7%94%A8java%E5%B0%86ResultSet%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%89%93%E5%8D%B0%E6%88%90%E8%A1%A8%E6%A0%BC/",
            "url": "http://example.com/passages/%E4%BD%BF%E7%94%A8java%E5%B0%86ResultSet%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%89%93%E5%8D%B0%E6%88%90%E8%A1%A8%E6%A0%BC/",
            "title": "使用java将ResultSet中的数据打印成表格",
            "date_published": "2022-07-04T10:43:15.000Z",
            "content_html": "<h1 id=\"背景介绍\"><a class=\"markdownIt-Anchor\" href=\"#背景介绍\">#</a> 背景介绍</h1>\n<p>在写课设的时候呢，有一个需求是将数据库的数据输出到控制台，最好是格式化输出。</p>\n<p>刚开始的时候我使用的方法是使用 select 语句讲数据拿到 ResultSet 中，之后将数据一条一条的放进对象中，之后放进 Arraylist 中来遍历输出。这种方法的效率较低，占用的时间空间都比较大。于是开始寻找一些方便好用的格式化输出 ResultSet 数据的方法，最终在参考了一些资料后整理出了这个方法。</p>\n<h1 id=\"需求描述\"><a class=\"markdownIt-Anchor\" href=\"#需求描述\">#</a> 需求描述</h1>\n<p><code>MySQL</code>  的查询语句输出如下:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * from student;</span><br><span class=\"line\">+------------+-----------+-----------+</span><br><span class=\"line\">| id         | name      | phone     |</span><br><span class=\"line\">+------------+-----------+-----------+</span><br><span class=\"line\">| <span class=\"number\">2007040901</span> | 小亮      | <span class=\"number\">789789789</span> |</span><br><span class=\"line\">| <span class=\"number\">2007040902</span> | 小白      | <span class=\"number\">852852852</span> |</span><br><span class=\"line\">| <span class=\"number\">2007040903</span> | 小明      | <span class=\"number\">123123123</span> |</span><br><span class=\"line\">| <span class=\"number\">2007040904</span> | 小红      | <span class=\"number\">456456456</span> |</span><br><span class=\"line\">| <span class=\"number\">2007040905</span> | 大飞      | <span class=\"number\">456645564</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041001</span> | 小青      | <span class=\"number\">123456789</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041002</span> | 小飞      | <span class=\"number\">321654987</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041003</span> | 小跑      | <span class=\"number\">963852741</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041004</span> | 大白      | <span class=\"number\">789789789</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041101</span> | 小王      | <span class=\"number\">111222333</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041102</span> | 小星      | <span class=\"number\">444555666</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041103</span> | 小义      | <span class=\"number\">777888999</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041104</span> | 萧山      | <span class=\"number\">111444777</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041105</span> | 大王      | <span class=\"number\">123123123</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041201</span> | 赵小花    | <span class=\"number\">222555888</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041202</span> | 赵大花    | <span class=\"number\">333666999</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041203</span> | 赵老花    | <span class=\"number\">159357123</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041204</span> | 赵仙花    | <span class=\"number\">623847456</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041205</span> | 大力      | <span class=\"number\">915915159</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041301</span> | 郭小凯    | <span class=\"number\">159159159</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041302</span> | 郭大凯    | <span class=\"number\">357357357</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041303</span> | 郭老凯    | <span class=\"number\">852852852</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041304</span> | 郭仙凯    | <span class=\"number\">963963963</span> |</span><br><span class=\"line\">| <span class=\"number\">2007041305</span> | 大明      | <span class=\"number\">357537753</span> |</span><br><span class=\"line\">+------------+-----------+-----------+</span><br><span class=\"line\"><span class=\"number\">24</span> <span class=\"function\">rows in <span class=\"title\">set</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span></span><br></pre></td></tr></table></figure>\n<p>使用 <code>JDBC</code>  执行上述的查询语句，将结果集中的查询结果以表格的形式打印出来。</p>\n<h1 id=\"思路\"><a class=\"markdownIt-Anchor\" href=\"#思路\">#</a> 思路</h1>\n<ul>\n<li>通过结果集的元数据可以知道结果集中的列数，和列名.</li>\n<li>然后遍历结果集，分别统计每一列中的最大字符数。</li>\n<li>然后通过 <code>System.out.printf()</code>  方法进行格式化输出。</li>\n</ul>\n<h1 id=\"具体实现\"><a class=\"markdownIt-Anchor\" href=\"#具体实现\">#</a> 具体实现</h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSetMetaData;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Iterator;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 结果集打印机.将结果集中的数据打印成表格.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ResultSetPrinter</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">printResultSet</span><span class=\"params\">(ResultSet rs)</span> <span class=\"keyword\">throws</span> SQLException </span>&#123;</span><br><span class=\"line\">        ResultSetMetaData resultSetMetaData = rs.getMetaData();</span><br><span class=\"line\">        <span class=\"comment\">// 获取列数</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> ColumnCount = resultSetMetaData.getColumnCount();</span><br><span class=\"line\">        <span class=\"comment\">// 保存当前列最大长度的数组</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] columnMaxLengths = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[ColumnCount];</span><br><span class=\"line\">        <span class=\"comment\">// 缓存结果集,结果集可能有序,所以用ArrayList保存变得打乱顺序.</span></span><br><span class=\"line\">        ArrayList&lt;String[]&gt; results = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"comment\">// 按行遍历</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (rs.next()) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 保存当前行所有列</span></span><br><span class=\"line\">            String[] columnStr = <span class=\"keyword\">new</span> String[ColumnCount];</span><br><span class=\"line\">            <span class=\"comment\">// 获取属性值.</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; ColumnCount; i++) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 获取一列</span></span><br><span class=\"line\">                columnStr[i] = rs.getString(i + <span class=\"number\">1</span>);</span><br><span class=\"line\">                <span class=\"comment\">// 计算当前列的最大长度</span></span><br><span class=\"line\">                columnMaxLengths[i] = Math.max(columnMaxLengths[i], (columnStr[i] == <span class=\"keyword\">null</span>) ? <span class=\"number\">0</span> : columnStr[i].length());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// 缓存这一行.</span></span><br><span class=\"line\">            results.add(columnStr);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        printSeparator(columnMaxLengths);</span><br><span class=\"line\">        printColumnName(resultSetMetaData, columnMaxLengths);</span><br><span class=\"line\">        printSeparator(columnMaxLengths);</span><br><span class=\"line\">        <span class=\"comment\">// 遍历集合输出结果</span></span><br><span class=\"line\">        Iterator&lt;String[]&gt; iterator = results.iterator();</span><br><span class=\"line\">        String[] columnStr;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">            columnStr = iterator.next();</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; ColumnCount; i++) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// System.out.printf(&quot;|%&quot; + (columnMaxLengths[i] + 1) + &quot;s&quot;, columnStr[i]);</span></span><br><span class=\"line\">                System.out.printf(<span class=\"string\">&quot;|%&quot;</span> + columnMaxLengths[i] + <span class=\"string\">&quot;s&quot;</span>, columnStr[i]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;|&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        printSeparator(columnMaxLengths);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 输出列名.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> resultSetMetaData 结果集的元数据对象.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> columnMaxLengths  每一列最大长度的字符串的长度.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> SQLException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">printColumnName</span><span class=\"params\">(ResultSetMetaData resultSetMetaData, <span class=\"keyword\">int</span>[] columnMaxLengths)</span> <span class=\"keyword\">throws</span> SQLException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> columnCount = resultSetMetaData.getColumnCount();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; columnCount; i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// System.out.printf(&quot;|%&quot; + (columnMaxLengths[i] + 1) + &quot;s&quot;, resultSetMetaData.getColumnName(i + 1));</span></span><br><span class=\"line\">            System.out.printf(<span class=\"string\">&quot;|%&quot;</span> + columnMaxLengths[i] + <span class=\"string\">&quot;s&quot;</span>, resultSetMetaData.getColumnName(i + <span class=\"number\">1</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;|&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 输出分隔符.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> columnMaxLengths 保存结果集中每一列的最长的字符串的长度.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">printSeparator</span><span class=\"params\">(<span class=\"keyword\">int</span>[] columnMaxLengths)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; columnMaxLengths.length; i++) &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">&quot;+&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// for (int j = 0; j &lt; columnMaxLengths[i] + 1; j++) &#123;</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; columnMaxLengths[i]; j++) &#123;</span><br><span class=\"line\">                System.out.print(<span class=\"string\">&quot;-&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;+&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"测试\"><a class=\"markdownIt-Anchor\" href=\"#测试\">#</a> 测试</h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String driver = <span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String URL = <span class=\"string\">&quot;jdbc:mysql://localhost:3306/student_information?useUnicode=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String user = <span class=\"string\">&quot;root&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String password = <span class=\"string\">&quot;root&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * JDBC测试.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">JDBCexample</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 1.加载数据库驱动</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            Class.forName(driver);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        testStatement();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 测试Statement的用法.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testStatement</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> (<span class=\"comment\">// 2.打开数据库连接</span></span><br><span class=\"line\">             Connection conn = DriverManager.getConnection(URL, user, password);</span><br><span class=\"line\">             <span class=\"comment\">// 3.创建语句</span></span><br><span class=\"line\">             Statement stmt = conn.createStatement()) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 模拟SQL注入</span></span><br><span class=\"line\">            testSqlInjecton(stmt);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (SQLException sqle) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;SQLException : &quot;</span> + sqle);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 模拟SQL注入.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> stmt Statement对象.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> SQLException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testSqlInjecton</span><span class=\"params\">(Statement stmt)</span> <span class=\"keyword\">throws</span> SQLException </span>&#123;</span><br><span class=\"line\">        String sql = <span class=\"string\">&quot;select * from student&quot;</span>;</span><br><span class=\"line\">        ResultSet rs = stmt.executeQuery(sql);</span><br><span class=\"line\">        ResultSetPrinter.printResultSet(rs);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        JDBCexample();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"运行结果\"><a class=\"markdownIt-Anchor\" href=\"#运行结果\">#</a> 运行结果</h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+----------+---+---------+</span><br><span class=\"line\">|        id|name|    phone|</span><br><span class=\"line\">+----------+---+---------+</span><br><span class=\"line\">|<span class=\"number\">2007040901</span>| 小亮|<span class=\"number\">789789789</span>|</span><br><span class=\"line\">|<span class=\"number\">2007040902</span>| 小白|<span class=\"number\">852852852</span>|</span><br><span class=\"line\">|<span class=\"number\">2007040903</span>| 小明|<span class=\"number\">123123123</span>|</span><br><span class=\"line\">|<span class=\"number\">2007040904</span>| 小红|<span class=\"number\">456456456</span>|</span><br><span class=\"line\">|<span class=\"number\">2007040905</span>| 大飞|<span class=\"number\">456645564</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041001</span>| 小青|<span class=\"number\">123456789</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041002</span>| 小飞|<span class=\"number\">321654987</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041003</span>| 小跑|<span class=\"number\">963852741</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041004</span>| 大白|<span class=\"number\">789789789</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041101</span>| 小王|<span class=\"number\">111222333</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041102</span>| 小星|<span class=\"number\">444555666</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041103</span>| 小义|<span class=\"number\">777888999</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041104</span>| 萧山|<span class=\"number\">111444777</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041105</span>| 大王|<span class=\"number\">123123123</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041201</span>|赵小花|<span class=\"number\">222555888</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041202</span>|赵大花|<span class=\"number\">333666999</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041203</span>|赵老花|<span class=\"number\">159357123</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041204</span>|赵仙花|<span class=\"number\">623847456</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041205</span>| 大力|<span class=\"number\">915915159</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041301</span>|郭小凯|<span class=\"number\">159159159</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041302</span>|郭大凯|<span class=\"number\">357357357</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041303</span>|郭老凯|<span class=\"number\">852852852</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041304</span>|郭仙凯|<span class=\"number\">963963963</span>|</span><br><span class=\"line\">|<span class=\"number\">2007041305</span>| 大明|<span class=\"number\">357537753</span>|</span><br><span class=\"line\">+----------+---+---------+</span><br></pre></td></tr></table></figure>\n<h2 id=\"提示\"><a class=\"markdownIt-Anchor\" href=\"#提示\">#</a> 提示</h2>\n<p>在使用时可以根据具体情况适当的做一些微调，以便达到想要的效果。</p>\n",
            "tags": [
                "数据库",
                "Java"
            ]
        }
    ]
}