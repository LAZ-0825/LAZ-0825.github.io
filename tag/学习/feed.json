{
    "version": "https://jsonfeed.org/version/1",
    "title": "LXR的小站 • All posts by \"学习\" tag",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/passages/MySql%E5%9F%BA%E7%A1%80%E7%AF%87/",
            "url": "http://example.com/passages/MySql%E5%9F%BA%E7%A1%80%E7%AF%87/",
            "title": "MySql基础篇",
            "date_published": "2022-08-28T05:49:59.000Z",
            "content_html": "<h1 id=\"一-sql\"><a class=\"markdownIt-Anchor\" href=\"#一-sql\">#</a> 一、SQL</h1>\n<blockquote>\n<p>全称  <code>Structured Query Language</code> ，结构化查询语言。操作关系型数据库的编程语言，定义了一套操作关系型数据库统一<strong>标准</strong> 。</p>\n</blockquote>\n<h2 id=\"1sql通用语法\"><a class=\"markdownIt-Anchor\" href=\"#1sql通用语法\">#</a> 1.SQL 通用语法</h2>\n<blockquote>\n<p>在学习具体的 SQL 语句之前，先来了解一下 SQL 语言的同于语法。</p>\n</blockquote>\n<ol>\n<li>SQL 语句可以单行或多行书写，以分号结尾。</li>\n<li>SQL 语句可以使用空格 / 缩进来增强语句的可读性。</li>\n<li>MySQL 数据库的 SQL 语句<strong>不区分大小写</strong>，关键字建议使用大写。</li>\n<li>注释：\n<ul>\n<li>单行注释： <code>--</code>  注释内容 或  <code># </code> 注释内容</li>\n<li>多行注释： <code>/* 注释内容 */</code></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"2sql分类\"><a class=\"markdownIt-Anchor\" href=\"#2sql分类\">#</a> 2.SQL 分类</h2>\n<blockquote>\n<p><strong>SQL 语句，根据其功能，主要分为四类： <code>DDL</code> 、 <code>DML</code> 、 <code>DQL</code> 、 <code>DCL</code> 。</strong></p>\n<p><strong>但是作为 <code>Java开发</code> 的程序员我们仅需掌握 <code>DML</code>  及 <code>DQL</code>  即可。</strong></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">分类</th>\n<th style=\"text-align:left\">全称</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>DDL</strong></td>\n<td style=\"text-align:left\">Data Definition Language</td>\n<td style=\"text-align:left\">数据定义语言，用来定义数据库对象（<strong>数据库、表、字段</strong>）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>DML</strong></td>\n<td style=\"text-align:left\">Data Manipulation Language</td>\n<td style=\"text-align:left\">数据操作语言，用来对数据库表中的数据进行<strong>增删改</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>DQL</strong></td>\n<td style=\"text-align:left\">Data Query Language</td>\n<td style=\"text-align:left\">数据查询语言，用来<strong>查询数据库中表的记录</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>DCL</strong></td>\n<td style=\"text-align:left\">Data Control Language</td>\n<td style=\"text-align:left\">数据控制语言，用来<strong>创建数据库用户</strong>、控制数据库的控制权限</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"3ddl\"><a class=\"markdownIt-Anchor\" href=\"#3ddl\">#</a> 3.DDL</h2>\n<blockquote>\n<p><strong> <code>Data Definition Language</code> ，数据定义语言，用来定义数据库对象 (数据库，表，字段) 。</strong></p>\n</blockquote>\n<h3 id=\"31-操作数据库的命令\"><a class=\"markdownIt-Anchor\" href=\"#31-操作数据库的命令\">#</a> 3.1 操作数据库的命令</h3>\n<blockquote>\n<p>下面演示的命令中出现的中括号表示为可选命令（加粗字体为常用命令）</p>\n</blockquote>\n<ol>\n<li>\n<p>查询所有数据库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW DATABASES;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询当前数据库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT DATABASE();</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>创建数据库</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># UTF8字符集长度为3字节，有些符号占4字节，所以推荐用utf8mb4字符集</span><br><span class=\"line\">CREATE DATABASE [ IF NOT EXISTS ] 数据库名 [ DEFAULT CHARSET 字符集] [COLLATE 排序规则 ];</span><br><span class=\"line\">SQL</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>删除数据库</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP DATABASE [ IF EXISTS ] 数据库名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>使用数据库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">USE 数据库名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"32-操作表的命令\"><a class=\"markdownIt-Anchor\" href=\"#32-操作表的命令\">#</a> 3.2 操作表的命令</h3>\n<blockquote>\n<p>下面演示的命令中出现的中括号表示为可选命令（加粗字体为常用命令）</p>\n</blockquote>\n<ol>\n<li>\n<p>查询当前数据库所有表</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW TABLES;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>查询表结构</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DESC 表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>查询指定表的建表语句</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW CREATE TABLE 表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>创建表（注意：最后一个字段后面没有逗号）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table 表名 (</span><br><span class=\"line\">字段名1 类型(宽度) 约束条件 [COMMENT 字段1注释],</span><br><span class=\"line\">字段名2 类型(宽度) 约束条件 [COMMENT 字段2注释],</span><br><span class=\"line\">字段名3 类型(宽度) 约束条件 [COMMENT 字段3注释]</span><br><span class=\"line\">) [ COMMENT 表注释 ];</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>添加字段</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>修改数据类型</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>修改字段名和字段类型</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>删除字段</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 DROP 字段名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>修改表名</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 RENAME TO 新表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>删除表</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#将整张表彻底删掉</span><br><span class=\"line\">DROP TABLE [IF EXISTS] 表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#以该方式删除的表相当于仅删除表中的数据，但是表结构保留</span><br><span class=\"line\">TRUNCATE TABLE 表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><strong>Ps：实际开发中表的结构在创建时就已经确定了，后期基本上不会出现更改或者添加字段的情况，因此关于操作字段的命令可以不用死记。</strong></p>\n<h3 id=\"33-字段的数据类型\"><a class=\"markdownIt-Anchor\" href=\"#33-字段的数据类型\">#</a> 3.3 字段的数据类型</h3>\n<h4 id=\"a-整型\"><a class=\"markdownIt-Anchor\" href=\"#a-整型\">#</a> a） 整型</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">MySQL 数据类型</th>\n<th style=\"text-align:left\">含义（有符号）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">tinyint</td>\n<td style=\"text-align:left\">1 字节，范围（-128~127）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">smallint</td>\n<td style=\"text-align:left\">2 字节，范围（-32768~32767）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mediumint</td>\n<td style=\"text-align:left\">3 字节，范围（-8388608~8388607）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:left\">4 字节，范围（-2147483648~2147483647）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">bigint</td>\n<td style=\"text-align:left\">8 字节，范围（±9.22*10 的 18 次方）</td>\n</tr>\n</tbody>\n</table>\n<p>整型默认使用的都是有符号的，当然了，我们也可以加上 <code>unsigned</code>  关键字，定义成无符号的类型，那么对应的取值范围就会发生改变。</p>\n<p>比如： <code>tinyint unsigned</code>  的取值范围为 <code>0~255</code> ，</p>\n<h4 id=\"b-浮点型\"><a class=\"markdownIt-Anchor\" href=\"#b-浮点型\">#</a> b） 浮点型</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">MySQL 数据类型</th>\n<th style=\"text-align:left\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">float(m, d)</td>\n<td style=\"text-align:left\">4 字节，单精度浮点型，m 总长度，d 小数位</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">double(m, d)</td>\n<td style=\"text-align:left\">8 字节，双精度浮点型，m 总长度，d 小数位</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">decimal(m, d)</td>\n<td style=\"text-align:left\">decimal 是存储为字符串的浮点数，对应我们 java 的 Bigdecimal</td>\n</tr>\n</tbody>\n</table>\n<p>我们使用一个例子来判断小括号内参数的含义，针对数据类型为 <code>float(5, 3)</code>  的列，做了以下试验：</p>\n<ul>\n<li>插入 <code>123.45678</code> ，最后查询得到的结果为 <code>99.999</code> ；</li>\n<li>插入 <code>12.34567</code> ，最后查询结果为 <code>12.346</code> ；</li>\n</ul>\n<p>所以，在使用浮点型的时候，还是要注意陷阱的，要以插入数据库中的实际结果为准。</p>\n<h4 id=\"c-字符串\"><a class=\"markdownIt-Anchor\" href=\"#c-字符串\">#</a> c） 字符串</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">MySQL 数据类型</th>\n<th style=\"text-align:left\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">char(n)</td>\n<td style=\"text-align:left\">固定长度，最多 255 个字符</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">varchar(n)</td>\n<td style=\"text-align:left\">可变长度，最大容量 65535 个字节</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">tinytext</td>\n<td style=\"text-align:left\">可变长度，最大容量 255 个字节</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">text</td>\n<td style=\"text-align:left\">可变长度，最大容量 65535 个字节</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mediumtext</td>\n<td style=\"text-align:left\">可变长度，最大容量 2 的 24 次方 - 1 个字节 16MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">longtext</td>\n<td style=\"text-align:left\">可变长度，最大容量 2 的 32 次方 - 1 个字节 4GB</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"d-日期和时间\"><a class=\"markdownIt-Anchor\" href=\"#d-日期和时间\">#</a> d） 日期和时间</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">MySQL 数据类型</th>\n<th style=\"text-align:left\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>date</strong></td>\n<td style=\"text-align:left\">3 字节，日期，格式：2022-09-18</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>time</strong></td>\n<td style=\"text-align:left\">3 字节，时间，格式：08:42:30</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>datetime</strong></td>\n<td style=\"text-align:left\">8 字节，日期时间，格式：2022-09-18 08:42:30</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">timestamp</td>\n<td style=\"text-align:left\">4 字节，自动存储记录修改的时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">year</td>\n<td style=\"text-align:left\">1 字节，年份，格式：2020</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"4dml常用\"><a class=\"markdownIt-Anchor\" href=\"#4dml常用\">#</a> 4.DML（常用）</h2>\n<blockquote>\n<p><strong>DML 英文全称是 Data Manipulation Language (数据操作语言)，用来对数据库中表的数据记录进行 <code>增、删、改</code> 操作。</strong></p>\n</blockquote>\n<ul>\n<li>添加数据（ <code>INSERT</code> ）</li>\n<li>修改数据（ <code>UPDATE</code> ）</li>\n<li>删除数据（ <code>DELETE</code> ）</li>\n</ul>\n<h3 id=\"41-添加数据\"><a class=\"markdownIt-Anchor\" href=\"#41-添加数据\">#</a> 4.1 添加数据</h3>\n<ol>\n<li>\n<p>添加指定字段</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>添加全部字段</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT INTO 表名 VALUES (值1, 值2, ...);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>批量添加数据</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...),(值1, 值2, ...), (值1, 值2, ...);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>注意事项</p>\n<ul>\n<li>插入数据时，指定的字段顺序需要与值的顺序是一一对应的。</li>\n<li>字符串和日期类型数据应该包含在引号中</li>\n<li>插入的数据大小应该在字段的规定范围内</li>\n</ul>\n<h3 id=\"42-修改和删除数据\"><a class=\"markdownIt-Anchor\" href=\"#42-修改和删除数据\">#</a> 4.2 修改和删除数据</h3>\n<ol>\n<li>\n<p>修改符合条件的数据</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE 表名 SET 字段名1 = 值1, 字段名2 = 值2, ... [ WHERE 条件 ];</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>删除复合条件的数据</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DELETE FROM 表名 [ WHERE 条件 ];</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><strong>注意：如果不加 <code>WHERE</code>  条件则默认操作整张表的数据</strong></p>\n<h2 id=\"5dql常用\"><a class=\"markdownIt-Anchor\" href=\"#5dql常用\">#</a> 5.DQL（常用）</h2>\n<blockquote>\n<p><strong> <code>DQL</code>  英文全称是 <code>Data Query Language</code>  (数据查询语言)，数据查询语言，用来查询数据库中表的记录。</strong></p>\n</blockquote>\n<p>小提示：</p>\n<ul>\n<li>查询关键字:  <code>SELECT</code></li>\n<li><code>DQL</code>  是我们每天接触编写最多也是最难的 SQL，该语言用来查询记录，不会修改数据库和表结构。</li>\n<li>实际开发中<strong>查询操作</strong>的频次是要远高于<strong>增删改</strong>的。</li>\n<li>查询可以当作一个很大的章节，其中包含<strong>单表查询、多表查询、分组查询</strong>等等。</li>\n</ul>\n<h3 id=\"51-课前准备\"><a class=\"markdownIt-Anchor\" href=\"#51-课前准备\">#</a> 5.1 课前准备</h3>\n<blockquote>\n<p><strong>在学习查询语句前我们需要用到一个图形化工具来操作数据库，这会使我们的学习效率及开发效率大大的提高。</strong></p>\n</blockquote>\n<ul>\n<li>\n<p>图形化界面工具（根据个人喜好选择）：<a href=\"https://lanzoux.com/iHtYJ05vitze\">Navicat15</a></p>\n</li>\n<li>\n<p>在开始学习之前我们需要执行以下 SQL 语句作为我们的学习素材：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE DATABASE IF NOT EXISTS itcast DEFAULT CHARSET utf8mb4;</span><br><span class=\"line\">DROP TABLE IF EXISTS employee;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE emp (</span><br><span class=\"line\">\tid int COMMENT &#x27;编号&#x27;,</span><br><span class=\"line\">\tworkno varchar(10) COMMENT &#x27;工号&#x27;,</span><br><span class=\"line\">\tname varchar(10) COMMENT &#x27;姓名&#x27;,</span><br><span class=\"line\">\tgender char(1) COMMENT &#x27;性别&#x27;,</span><br><span class=\"line\">\tage tinyint UNSIGNED COMMENT &#x27;年龄&#x27;,</span><br><span class=\"line\">\tidcard char(18) COMMENT &#x27;身份证号&#x27;,</span><br><span class=\"line\">\tworkaddress varchar(50) COMMENT &#x27;工作地址&#x27;,</span><br><span class=\"line\">\tentrydate date COMMENT &#x27;入职时间&#x27;</span><br><span class=\"line\">) COMMENT &#x27;员工表&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (1, &#x27;00001&#x27;, &#x27;柳岩666&#x27;, &#x27;女&#x27;, 20, &#x27;123456789012345678&#x27;, &#x27;北京&#x27;, &#x27;2000-01-01&#x27;);</span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (2, &#x27;00002&#x27;, &#x27;张无忌&#x27;, &#x27;男&#x27;, 18, &#x27;123456789012345670&#x27;, &#x27;北京&#x27;, &#x27;2005-09-01&#x27;);</span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (3, &#x27;00003&#x27;, &#x27;韦一笑&#x27;, &#x27;男&#x27;, 38, &#x27;123456789712345670&#x27;, &#x27;上海&#x27;, &#x27;2005-08-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (4, &#x27;00004&#x27;, &#x27;赵敏&#x27;, &#x27;女&#x27;, 18, &#x27;123456757123845670&#x27;, &#x27;北京&#x27;, &#x27;2009-12-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (5, &#x27;00005&#x27;, &#x27;小昭&#x27;, &#x27;女&#x27;, 16, &#x27;123456769012345678&#x27;, &#x27;上海&#x27;, &#x27;2007-07-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (6, &#x27;00006&#x27;, &#x27;杨逍&#x27;, &#x27;男&#x27;, 28, &#x27;12345678931234567X&#x27;, &#x27;北京&#x27;, &#x27;2006-01-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (7, &#x27;00007&#x27;, &#x27;范瑶&#x27;, &#x27;男&#x27;, 40, &#x27;123456789212345670&#x27;, &#x27;北京&#x27;, &#x27;2005-05-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (8, &#x27;00008&#x27;, &#x27;黛绮丝&#x27;, &#x27;女&#x27;, 38, &#x27;123456157123645670&#x27;, &#x27;天津&#x27;, &#x27;2015-05-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (9, &#x27;00009&#x27;, &#x27;范凉凉&#x27;, &#x27;女&#x27;, 45, &#x27;123156789012345678&#x27;, &#x27;北京&#x27;, &#x27;2010-04-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (10, &#x27;00010&#x27;, &#x27;陈友谅&#x27;, &#x27;男&#x27;, 53, &#x27;123456789012345670&#x27;, &#x27;上海&#x27;, &#x27;2011-01-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (11, &#x27;00011&#x27;, &#x27;张士诚&#x27;, &#x27;男&#x27;, 55, &#x27;123567897123465670&#x27;, &#x27;江苏&#x27;, &#x27;2015-05-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (12, &#x27;00012&#x27;, &#x27;常遇春&#x27;, &#x27;男&#x27;, 32, &#x27;123446757152345670&#x27;, &#x27;北京&#x27;, &#x27;2004-02-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (13, &#x27;00013&#x27;, &#x27;张三丰&#x27;, &#x27;男&#x27;, 88, &#x27;123656789012345678&#x27;, &#x27;江苏&#x27;, &#x27;2020-11-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (14, &#x27;00014&#x27;, &#x27;灭绝&#x27;, &#x27;女&#x27;, 65, &#x27;123456719012345670&#x27;, &#x27;西安&#x27;, &#x27;2019-05-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (15, &#x27;00015&#x27;, &#x27;胡青牛&#x27;, &#x27;男&#x27;, 70, &#x27;12345674971234567X&#x27;, &#x27;西安&#x27;, &#x27;2018-04-01&#x27;); </span><br><span class=\"line\">INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (16, &#x27;00016&#x27;, &#x27;周芷若&#x27;, &#x27;女&#x27;, 18, null, &#x27;北京&#x27;, &#x27;2012-06-01&#x27;);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"52-基本语法\"><a class=\"markdownIt-Anchor\" href=\"#52-基本语法\">#</a> 5.2 基本语法</h3>\n<ul>\n<li>\n<p>DQL 查询语句，语法结构如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT</span><br><span class=\"line\">    字段列表</span><br><span class=\"line\">FROM</span><br><span class=\"line\">    表名字段</span><br><span class=\"line\">WHERE</span><br><span class=\"line\">    条件列表</span><br><span class=\"line\">GROUP BY</span><br><span class=\"line\">    分组字段列表</span><br><span class=\"line\">HAVING</span><br><span class=\"line\">    分组后的条件列表</span><br><span class=\"line\">ORDER BY</span><br><span class=\"line\">    排序字段列表</span><br><span class=\"line\">LIMIT</span><br><span class=\"line\">    分页参数</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>我们在学习的时候，会将上面的完整语法进行拆分，分为以下几个部分：</p>\n<ul>\n<li>基础查询（不带任何条件）</li>\n<li>条件查询（ <code>WHERE</code> ）</li>\n<li>聚合函数（ <code>count</code> 、 <code>max</code> 、 <code>min</code> 、 <code>avg</code> 、 <code>sum</code> ）</li>\n<li>分组查询（ <code>group by</code> ）</li>\n<li>排序查询（ <code>order by</code> ）</li>\n<li>分页查询（ <code>limit</code> ）</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"53-基础查询\"><a class=\"markdownIt-Anchor\" href=\"#53-基础查询\">#</a> 5.3 基础查询</h3>\n<h4 id=\"a语法格式\"><a class=\"markdownIt-Anchor\" href=\"#a语法格式\">#</a> a）语法格式</h4>\n<ul>\n<li>\n<p>查询多个字段</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段1, 字段2, 字段3 ... FROM 表名 ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM 表名 ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p><strong>注意 : * 号代表查询所有字段，在实际开发中尽量少用（不直观、影响效率）。</strong></p>\n</li>\n<li>\n<p>字段设置别名</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段1 [ AS 别名1 ], 字段2 [ AS 别名2 ], 字段3 [ AS 别名3 ], ... FROM 表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段1 [ 别名1 ] , 字段2 [ 别名2 ] ... FROM 表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>去除重复记录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT DISTINCT 字段列表 FROM 表名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"b案例练习\"><a class=\"markdownIt-Anchor\" href=\"#b案例练习\">#</a> b）案例练习</h4>\n<ul>\n<li>\n<p>查询指定字段  <code>name</code> ,  <code>workno</code> ,  <code>age</code>  并返回</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select name,workno,age from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询返回所有字段</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select id, workno, name, gender, age, idcard, workaddress, entrydate from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp; #不推荐</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询所有员工的工作地址，起别名</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select workaddress AS &#x27;工作地址&#x27; from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select workaddress &#x27;工作地址&#x27; from emp; #省略AS的写法</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询公司员工的上班地址有哪些（不要重复）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select DISTINCT workaddress from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"54-条件查询\"><a class=\"markdownIt-Anchor\" href=\"#54-条件查询\">#</a> 5.4 条件查询</h3>\n<h4 id=\"a语法格式-2\"><a class=\"markdownIt-Anchor\" href=\"#a语法格式-2\">#</a> a）语法格式</h4>\n<ul>\n<li>\n<p>查询语句中使用 <code>WHERE</code>  条件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表名 WHERE 条件列表 ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"b条件运算符\"><a class=\"markdownIt-Anchor\" href=\"#b条件运算符\">#</a> b）条件运算符</h4>\n<ul>\n<li>\n<p>常用的比较运算符</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">比较运算符</th>\n<th style=\"text-align:left\">功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">&gt;</td>\n<td style=\"text-align:left\">大于</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">&gt;=</td>\n<td style=\"text-align:left\">大于等于</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">&lt;</td>\n<td style=\"text-align:left\">小于</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">&lt;=</td>\n<td style=\"text-align:left\">小于等于</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">=</td>\n<td style=\"text-align:left\">等于</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">&lt;&gt; 或！=</td>\n<td style=\"text-align:left\">不等于</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">BETWEEN … AND …</td>\n<td style=\"text-align:left\">在某个范围内（含最小、最大值）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">IN(…)</td>\n<td style=\"text-align:left\">在 in 之后的列表中的值，多选一</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">LIKE 占位符</td>\n<td style=\"text-align:left\">模糊匹配（ <code>_</code> 匹配单个字符， <code>%</code>  匹配任意个字符）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">IS NULL</td>\n<td style=\"text-align:left\">是 NULL</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>常用的逻辑运算符</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">逻辑运算符</th>\n<th style=\"text-align:left\">功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">AND 或 &amp;&amp;</td>\n<td style=\"text-align:left\">并且（多个条件同时成立）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">OR 或 ||</td>\n<td style=\"text-align:left\">或者（多个条件任意一个成立）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">NOT 或！</td>\n<td style=\"text-align:left\">非，不是</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<h4 id=\"c案例练习\"><a class=\"markdownIt-Anchor\" href=\"#c案例练习\">#</a> c）案例练习</h4>\n<ul>\n<li>\n<p>查询年龄等于 88 的员工</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age = 88;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询年龄小于 20 的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age &lt; 20;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询年龄小于等于 20 的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age &lt;= 20;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询没有身份证号的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where idcard is null;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询有身份证号的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where idcard is not null;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询年龄不等于 88 的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age != 88;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age &lt;&gt; 88;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询年龄在 15 岁（包含）到 20 岁（包含）之间的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age &gt;= 15 &amp;&amp; age &lt;= 20;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age &gt;= 15 and age &lt;= 20;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age BETWEEN 15 AND 20;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询性别为 女 且年龄小于 25 岁的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where gender = &#x27;女&#x27; and age &lt; 25;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询年龄等于 18 或 20 或 40 的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age = 18 or age = 20 or age = 40;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where age in(18,20,40);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询姓名为两个字的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where name like &#x27;__&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询身份证号最后一位是 X 的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where idcard like &#x27;%X&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"55-聚合函数\"><a class=\"markdownIt-Anchor\" href=\"#55-聚合函数\">#</a> 5.5 聚合函数</h3>\n<blockquote>\n<p><strong>将一列数据作为一个整体，进行纵向计算。</strong></p>\n</blockquote>\n<h4 id=\"a常见的聚合函数\"><a class=\"markdownIt-Anchor\" href=\"#a常见的聚合函数\">#</a> a）常见的聚合函数</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">函数</th>\n<th style=\"text-align:left\">功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">count</td>\n<td style=\"text-align:left\">统计数量</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">max</td>\n<td style=\"text-align:left\">最大值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">min</td>\n<td style=\"text-align:left\">最小值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">avg</td>\n<td style=\"text-align:left\">平均值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sum</td>\n<td style=\"text-align:left\">求和</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"b语法格式\"><a class=\"markdownIt-Anchor\" href=\"#b语法格式\">#</a> b）语法格式</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 聚合函数(字段列表) FROM 表名 ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p><strong>注意 : NULL 值是不参与所有聚合函数运算的。</strong></p>\n<h4 id=\"c案例练习-2\"><a class=\"markdownIt-Anchor\" href=\"#c案例练习-2\">#</a> c）案例练习</h4>\n<ul>\n<li>\n<p>统计该企业员工数量</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select count(*) from emp; #返回结果是16，统计的是总记录数</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select count(idcard) from emp; #返回结果是15，统计的是idcard字段不为null的记录数</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select count(1) from emp; #会统计表中的所有的记录数，包含字段为null 的记录</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p>对于 <code>count(*) </code> 、 <code>count(字段)</code> 、  <code>count(1) </code> 的具体原理，我们在进阶篇中 SQL 优化部分会详细讲解，此处大家只需要知道如何使用即可。</p>\n</li>\n<li>\n<p>统计该企业员工的平均年龄</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select avg(age) from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>统计该企业员工的最大年龄</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select max(age) from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>统计该企业员工的最小年龄</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select min(age) from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>统计西安地区员工的年龄之和</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select sum(age) from emp where workaddress = &#x27;西安&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"56-分组查询\"><a class=\"markdownIt-Anchor\" href=\"#56-分组查询\">#</a> 5.6 分组查询</h3>\n<h4 id=\"a-语法格式\"><a class=\"markdownIt-Anchor\" href=\"#a-语法格式\">#</a> a） 语法格式</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表名 [ WHERE 条件 ] GROUP BY 分组字段名 [ HAVING 分组 后过滤条件 ];</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h4 id=\"bwhere与having区别\"><a class=\"markdownIt-Anchor\" href=\"#bwhere与having区别\">#</a> b）where 与 having 区别</h4>\n<ul>\n<li>执行时机不同： <code>where</code>  是分组之前进行过滤，不满足 <code>where</code>  条件，不参与分组；而 <code>having</code>  是分组之后对结果进行过滤。</li>\n<li>判断条件不同： <code>where</code>  不能对聚合函数进行判断，而 <code>having</code>  可以。</li>\n</ul>\n<h4 id=\"c案例练习-3\"><a class=\"markdownIt-Anchor\" href=\"#c案例练习-3\">#</a> c）案例练习</h4>\n<ul>\n<li>\n<p>根据性别分组，统计男性员工 和 女性员工的数量</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select gender, count(*) from emp group by gender ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>根据性别分组，统计男性员工 和 女性员工的平均年龄</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select gender, avg(age) from emp group by gender ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询年龄小于 45 的员工，并根据工作地址分组，获取员工数量大于等于 3 的工作地址</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT workaddress,count(*) address_count</span><br><span class=\"line\">FROM emp</span><br><span class=\"line\">WHERE age &lt; 45</span><br><span class=\"line\">GROUP BY  workaddress</span><br><span class=\"line\">HAVING address_count &gt;= 3;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>统计各个工作地址上班的男性及女性员工的数量</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select workaddress, gender, count(*) &#x27;数量&#x27; from emp group by gender , workaddress ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"57-排序查询\"><a class=\"markdownIt-Anchor\" href=\"#57-排序查询\">#</a> 5.7 排序查询</h3>\n<blockquote>\n<p>排序在日常开发中是非常常见的一个操作，有升序排序，也有降序排序。</p>\n</blockquote>\n<h4 id=\"a语法格式-3\"><a class=\"markdownIt-Anchor\" href=\"#a语法格式-3\">#</a> a）语法格式</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1, 字段2 排序方式2;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h4 id=\"b排序方式\"><a class=\"markdownIt-Anchor\" href=\"#b排序方式\">#</a> b）排序方式</h4>\n<ul>\n<li><code>ASC</code> : 升序（默认）</li>\n<li><code>DESC</code> : 降序</li>\n</ul>\n<p><strong>注意：如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序。</strong></p>\n<h4 id=\"c案例练习-4\"><a class=\"markdownIt-Anchor\" href=\"#c案例练习-4\">#</a> c）案例练习</h4>\n<ul>\n<li>\n<p>根据年龄对公司的员工进行升序排序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp order by age asc;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp order by age;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>根据入职时间，对员工进行降序排序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp order by entrydate desc;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>根据年龄对公司的员工进行升序排序，年龄相同，再按照入职时间进行降序排序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp order by age asc , entrydate desc;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"58-分页查询\"><a class=\"markdownIt-Anchor\" href=\"#58-分页查询\">#</a> 5.8 分页查询</h3>\n<blockquote>\n<p>分页操作在业务系统开发时，也是非常常见的一个功能，我们在网站中看到的各种各样的分页条，后台都需要借助于数据库的分页操作。</p>\n</blockquote>\n<h4 id=\"a语法格式-4\"><a class=\"markdownIt-Anchor\" href=\"#a语法格式-4\">#</a> a）语法格式</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h4 id=\"b注意事项\"><a class=\"markdownIt-Anchor\" href=\"#b注意事项\">#</a> b）注意事项</h4>\n<ul>\n<li>起始索引从 <code>0</code>  开始，<mark>起始索引 = （查询页码 - 1）* 每页显示记录数</mark>。</li>\n<li>分页查询是数据库的方言，<strong>不同的数据库有不同的实现</strong>， <code>MySQL</code>  中是 <code>LIMIT</code> 。</li>\n<li>如果查询的是第一页数据，起始索引可以省略，直接简写为 limit 10。</li>\n</ul>\n<h4 id=\"c案例练习-5\"><a class=\"markdownIt-Anchor\" href=\"#c案例练习-5\">#</a> c）案例练习</h4>\n<ul>\n<li>\n<p>查询第 1 页员工数据，每页展示 10 条记录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp limit 10;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp limit 0,10;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询第 2 页员工数据，每页展示 10 条记录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp limit 10,10;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"59-执行顺序\"><a class=\"markdownIt-Anchor\" href=\"#59-执行顺序\">#</a> 5.9 执行顺序</h3>\n<blockquote>\n<p>在讲解 DQL 语句的具体语法之前，我们已经讲解了 DQL 语句的完整语法，及编写顺序，接下来，我们要来说明的是 DQL 语句在执行时的执行顺序，也就是先执行那一部分，后执行那一部分。</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM` ➤ `WHERE `➤ `GROUP BY` ➤ `SELECT `➤ `ORDER BY` ➤ `LIMIT</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220604130048234.png\" alt=\"image-20220604130048234\"></p>\n<h2 id=\"6dcl不重要\"><a class=\"markdownIt-Anchor\" href=\"#6dcl不重要\">#</a> 6.DCL（不重要）</h2>\n<blockquote>\n<p><code>DCL</code>  英文全称是 ** <code>Data Control Language</code> **(数据控制语言)，用来管理数据库用户、控制数据库的访问权限。</p>\n<p>作为 Java 开发程序员的话，我们是无需关心 DCL 这一部分的，因为在实际工作中这不是我们所负责的内容！</p>\n</blockquote>\n<h3 id=\"61-用户管理\"><a class=\"markdownIt-Anchor\" href=\"#61-用户管理\">#</a> 6.1 用户管理</h3>\n<ul>\n<li>\n<p>查询用户</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">USER mysql;</span><br><span class=\"line\">SELECT * FROM user;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>创建用户</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED BY &#x27;密码&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>修改用户密码</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;新密码&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>删除用户</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP USER &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>注意：主机名可以使用 % 通配</p>\n<h3 id=\"62-权限控制\"><a class=\"markdownIt-Anchor\" href=\"#62-权限控制\">#</a> 6.2 权限控制</h3>\n<ul>\n<li>\n<p>常用权限</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">权限</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">ALL, ALL PRIVILEGES</td>\n<td style=\"text-align:left\">所有权限</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SELECT</td>\n<td style=\"text-align:left\">查询数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">INSERT</td>\n<td style=\"text-align:left\">插入数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">UPDATE</td>\n<td style=\"text-align:left\">修改数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DELETE</td>\n<td style=\"text-align:left\">删除数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ALTER</td>\n<td style=\"text-align:left\">修改表</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DROP</td>\n<td style=\"text-align:left\">删除数据库 / 表 / 视图</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CREATE</td>\n<td style=\"text-align:left\">创建数据库 / 表</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>查询权限</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW GRANTS FOR &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>授予权限</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GRANT 权限列表 ON 数据库名.表名 TO &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>撤销权限</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">REVOKE 权限列表 ON 数据库名.表名 FROM &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>注意事项</p>\n<ul>\n<li>多个权限用逗号分隔</li>\n<li>授权时，数据库名和表名可以用  <code>*</code>  进行通配，代表所有</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"二-函数\"><a class=\"markdownIt-Anchor\" href=\"#二-函数\">#</a> 二、函数</h1>\n<blockquote>\n<p><mark>函数</mark>是指一段可以<strong>直接被另一段程序调用</strong>的程序或代码。 也就意味着，这一段程序或代码在 <code>MySQL</code>  中已经给我们提供了，我们要做的就是在合适的业务场景调用对应的函数完成对应的业务需求即可。</p>\n</blockquote>\n<p>Ps：其实很少用到函数的，可以说基本用不到，所以我这就不记那么详细了。</p>\n<h2 id=\"1字符串函数\"><a class=\"markdownIt-Anchor\" href=\"#1字符串函数\">#</a> 1. 字符串函数</h2>\n<ul>\n<li>\n<p>常用函数</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">函数</th>\n<th style=\"text-align:left\">功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">CONCAT(s1, s2, …, sn)</td>\n<td style=\"text-align:left\">字符串拼接，将 s1, s2, …, sn 拼接成一个字符串</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">LOWER(str)</td>\n<td style=\"text-align:left\">将字符串全部转为小写</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">UPPER(str)</td>\n<td style=\"text-align:left\">将字符串全部转为大写</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">LPAD(str, n, pad)</td>\n<td style=\"text-align:left\">左填充，用字符串 pad 对 str 的左边进行填充，达到 n 个字符串长度</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RPAD(str, n, pad)</td>\n<td style=\"text-align:left\">右填充，用字符串 pad 对 str 的右边进行填充，达到 n 个字符串长度</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">TRIM(str)</td>\n<td style=\"text-align:left\">去掉字符串头部和尾部的空格</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SUBSTRING(str, start, len)</td>\n<td style=\"text-align:left\">返回从字符串 str 从 start 位置起的 len 个长度的字符串</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>使用示例</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- 拼接</span><br><span class=\"line\">SELECT CONCAT(&#x27;Hello&#x27;, &#x27;World&#x27;);</span><br><span class=\"line\">-- 小写</span><br><span class=\"line\">SELECT LOWER(&#x27;Hello&#x27;);</span><br><span class=\"line\">-- 大写</span><br><span class=\"line\">SELECT UPPER(&#x27;Hello&#x27;);</span><br><span class=\"line\">-- 左填充</span><br><span class=\"line\">SELECT LPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class=\"line\">-- 右填充</span><br><span class=\"line\">SELECT RPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class=\"line\">-- 去除空格</span><br><span class=\"line\">SELECT TRIM(&#x27; Hello World &#x27;);</span><br><span class=\"line\">-- 切片（起始索引为1）</span><br><span class=\"line\">SELECT SUBSTRING(&#x27;Hello World&#x27;, 1, 5);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"2数值函数\"><a class=\"markdownIt-Anchor\" href=\"#2数值函数\">#</a> 2. 数值函数</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">函数</th>\n<th style=\"text-align:left\">功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">CEIL(x)</td>\n<td style=\"text-align:left\">向上取整</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FLOOR(x)</td>\n<td style=\"text-align:left\">向下取整</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MOD(x, y)</td>\n<td style=\"text-align:left\">返回 x/y 的模</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RAND()</td>\n<td style=\"text-align:left\">返回 0~1 内的随机数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ROUND(x, y)</td>\n<td style=\"text-align:left\">求参数 x 的四舍五入值，保留 y 位小数</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"3日期函数\"><a class=\"markdownIt-Anchor\" href=\"#3日期函数\">#</a> 3. 日期函数</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">函数</th>\n<th style=\"text-align:left\">功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">CURDATE()</td>\n<td style=\"text-align:left\">返回当前日期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CURTIME()</td>\n<td style=\"text-align:left\">返回当前时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">NOW()</td>\n<td style=\"text-align:left\">返回当前日期和时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">YEAR(date)</td>\n<td style=\"text-align:left\">获取指定 date 的年份</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MONTH(date)</td>\n<td style=\"text-align:left\">获取指定 date 的月份</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DAY(date)</td>\n<td style=\"text-align:left\">获取指定 date 的日期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DATE_ADD(date, INTERVAL expr type)</td>\n<td style=\"text-align:left\">返回一个日期 / 时间值加上一个时间间隔 expr 后的时间值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DATEDIFF(date1, date2)</td>\n<td style=\"text-align:left\">返回起始时间 date1 和结束时间 date2 之间的天数</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"4流程函数\"><a class=\"markdownIt-Anchor\" href=\"#4流程函数\">#</a> 4. 流程函数</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">函数</th>\n<th style=\"text-align:left\">功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">IF(value, t, f)</td>\n<td style=\"text-align:left\">如果 value 为 true，则返回 t，否则返回 f</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">IFNULL(value1, value2)</td>\n<td style=\"text-align:left\">如果 value1 不为空，返回 value1，否则返回 value2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CASE WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END</td>\n<td style=\"text-align:left\">如果 val1 为 true，返回 res1，… 否则返回 default 默认值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END</td>\n<td style=\"text-align:left\">如果 expr 的值等于 val1，返回 res1，… 否则返回 default 默认值</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"三-约束\"><a class=\"markdownIt-Anchor\" href=\"#三-约束\">#</a> 三、约束</h1>\n<blockquote>\n<p>约束是作用于表中字段上的规则，用于限制存储在表中的数据。</p>\n</blockquote>\n<p>Ps：我们仅需了解约束的含义即可，实际开发中这都是在建表时就已经确定了的。</p>\n<h2 id=\"1常用约束\"><a class=\"markdownIt-Anchor\" href=\"#1常用约束\">#</a> 1. 常用约束</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">约束</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">关键字</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">非空约束</td>\n<td style=\"text-align:left\">限制该字段的数据不能为 null</td>\n<td style=\"text-align:left\">NOT NULL</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">唯一约束</td>\n<td style=\"text-align:left\">保证该字段的所有数据都是唯一、不重复的</td>\n<td style=\"text-align:left\">UNIQUE</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">主键约束</td>\n<td style=\"text-align:left\">主键是一行数据的唯一标识，要求非空且唯一</td>\n<td style=\"text-align:left\">PRIMARY KEY</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">默认约束</td>\n<td style=\"text-align:left\">保存数据时，如果未指定该字段的值，则采用默认值</td>\n<td style=\"text-align:left\">DEFAULT</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">检查约束（8.0.1 版本后）</td>\n<td style=\"text-align:left\">保证字段值满足某一个条件</td>\n<td style=\"text-align:left\">CHECK</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">外键约束</td>\n<td style=\"text-align:left\">用来让两张图的数据之间建立连接，保证数据的一致性和完整性</td>\n<td style=\"text-align:left\">FOREIGN KEY</td>\n</tr>\n</tbody>\n</table>\n<p>约束是作用于表中字段上的，可以在创建表 / 修改表的时候添加约束。</p>\n<h2 id=\"2外键约束\"><a class=\"markdownIt-Anchor\" href=\"#2外键约束\">#</a> 2. 外键约束</h2>\n<blockquote>\n<p>用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性</p>\n</blockquote>\n<ul>\n<li>\n<p>建表时添加外键约束</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE 表名(</span><br><span class=\"line\">    字段名 字段类型,</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    [CONSTRAINT] [外键名称] FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名)</span><br><span class=\"line\">);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>建表后添加外键约束</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名) REFERENCES 主表(主表列名);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>删除外键</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 DROP FOREIGN KEY 外键名;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p>删除 / 更新行为</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">行为</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">NO ACTION</td>\n<td style=\"text-align:left\">当在父表中删除 / 更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除 / 更新（与 RESTRICT 一致）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RESTRICT</td>\n<td style=\"text-align:left\">当在父表中删除 / 更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除 / 更新（与 NO ACTION 一致）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CASCADE</td>\n<td style=\"text-align:left\">当在父表中删除 / 更新对应记录时，首先检查该记录是否有对应外键，如果有则也删除 / 更新外键在子表中的记录</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SET NULL</td>\n<td style=\"text-align:left\">当在父表中删除 / 更新对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为 null（要求该外键允许为 null）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SET DEFAULT</td>\n<td style=\"text-align:left\">父表有变更时，子表将外键设为一个默认值（Innodb 不支持）</td>\n</tr>\n</tbody>\n</table>\n<p>更改删除 / 更新行为</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名(主表字段名) ON UPDATE 行为 ON DELETE 行为;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h1 id=\"三-多表查询\"><a class=\"markdownIt-Anchor\" href=\"#三-多表查询\">#</a> 三、多表查询</h1>\n<blockquote>\n<p>我们之前在讲解 SQL 语句的时候，讲解了 DQL 语句，也就是数据查询语句，但是之前讲解的查询都是单表查询，而本章节我们要学习的则是多表查询操作。</p>\n</blockquote>\n<p>Ps：相较于约束来讲，本章确实是个重点，多表联查会在开发中经常用到，因此需要认真学习！！！</p>\n<h2 id=\"1多表关系\"><a class=\"markdownIt-Anchor\" href=\"#1多表关系\">#</a> 1. 多表关系</h2>\n<p>项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：</p>\n<ol>\n<li><strong>一对多（多对一）</strong></li>\n<li><strong>多对多</strong></li>\n<li><strong>一对一</strong></li>\n</ol>\n<h3 id=\"11-一对多\"><a class=\"markdownIt-Anchor\" href=\"#11-一对多\">#</a> 1.1 一对多</h3>\n<ul>\n<li>案例：部门 与 员工的关系</li>\n<li>关系：一个部门对应多个员工，一个员工对应一个部门</li>\n<li>实现：在多的一方建立外键，指向一的一方的主键</li>\n</ul>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220604201130760.png\" alt=\"image-20220604201130760\"></p>\n<h3 id=\"12-多对多\"><a class=\"markdownIt-Anchor\" href=\"#12-多对多\">#</a> 1.2 多对多</h3>\n<ul>\n<li>案例：学生 与 课程的关系</li>\n<li>关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择</li>\n<li>实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</li>\n</ul>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220604201411978.png\" alt=\"image-20220604201411978\"></p>\n<h3 id=\"13-一对一\"><a class=\"markdownIt-Anchor\" href=\"#13-一对一\">#</a> 1.3 一对一</h3>\n<ul>\n<li>案例：用户 与 用户详情的关系</li>\n<li>关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率</li>\n<li>实现：在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的 (UNIQUE)</li>\n</ul>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220604201513196.png\" alt=\"image-20220604201513196\"></p>\n<h2 id=\"2多表查询概述\"><a class=\"markdownIt-Anchor\" href=\"#2多表查询概述\">#</a> 2. 多表查询概述</h2>\n<h3 id=\"21-数据准备\"><a class=\"markdownIt-Anchor\" href=\"#21-数据准备\">#</a> 2.1 数据准备</h3>\n<ul>\n<li>\n<p>删除之前的 emp, dept 表</p>\n</li>\n<li>\n<p>执行下面 SQL 语句</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE dept (</span><br><span class=\"line\">\tid int PRIMARY KEY AUTO_INCREMENT COMMENT &#x27;ID&#x27;,</span><br><span class=\"line\">\tname varchar(50) NOT NULL COMMENT &#x27;部门名称&#x27;</span><br><span class=\"line\">) COMMENT &#x27;部门表&#x27;;</span><br><span class=\"line\">INSERT INTO dept (id, name) VALUES (1, &#x27;研发部&#x27;), (2, &#x27;市场部&#x27;),(3, &#x27;财务部&#x27;), (4, &#x27;销售部&#x27;), (5, &#x27;总经办&#x27;), (6, &#x27;人事部&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE emp (</span><br><span class=\"line\">\tid int PRIMARY KEY AUTO_INCREMENT COMMENT &#x27;ID&#x27;,</span><br><span class=\"line\">\tname varchar(50) NOT NULL COMMENT &#x27;姓名&#x27;,</span><br><span class=\"line\">\tage int COMMENT &#x27;年龄&#x27;,</span><br><span class=\"line\">\tjob varchar(20) COMMENT &#x27;职位&#x27;,</span><br><span class=\"line\">\tsalary int COMMENT &#x27;薪资&#x27;,</span><br><span class=\"line\">\tentrydate date COMMENT &#x27;入职时间&#x27;,</span><br><span class=\"line\">\tmanagerid int COMMENT &#x27;直属领导ID&#x27;,</span><br><span class=\"line\">\tdept_id int COMMENT &#x27;部门ID&#x27;</span><br><span class=\"line\">) COMMENT &#x27;员工表&#x27;;</span><br><span class=\"line\">alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references dept(id);</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO emp (id, name, age, job,salary, entrydate, managerid, dept_id)</span><br><span class=\"line\">VALUES</span><br><span class=\"line\">    (1, &#x27;金庸&#x27;, 66, &#x27;总裁&#x27;, 20000, &#x27;2000-01-01&#x27;, null, 5),</span><br><span class=\"line\">    (2, &#x27;张无忌&#x27;, 20, &#x27;项目经理&#x27;, 12500, &#x27;2005-12-05&#x27;, 1, 1),</span><br><span class=\"line\">    (3, &#x27;杨逍&#x27;, 33, &#x27;开发&#x27;, 8400, &#x27;2000-11-03&#x27;, 2, 1),</span><br><span class=\"line\">    (4, &#x27;韦一笑&#x27;, 48, &#x27;开发&#x27;, 11000, &#x27;2002-02-05&#x27;, 2, 1),</span><br><span class=\"line\">    (5, &#x27;常遇春&#x27;, 43, &#x27;开发&#x27;, 10500, &#x27;2004-09-07&#x27;, 3, 1),</span><br><span class=\"line\">    (6, &#x27;小昭&#x27;, 19, &#x27;程序员鼓励师&#x27;, 6600, &#x27;2004-10-12&#x27;, 2, 1),</span><br><span class=\"line\">    (7, &#x27;灭绝&#x27;, 60, &#x27;财务总监&#x27;, 8500, &#x27;2002-09-12&#x27;, 1, 3),</span><br><span class=\"line\">    (8, &#x27;周芷若&#x27;, 19, &#x27;会计&#x27;, 48000, &#x27;2006-06-02&#x27;, 7, 3),</span><br><span class=\"line\">    (9, &#x27;丁敏君&#x27;, 23, &#x27;出纳&#x27;, 5250, &#x27;2009-05-13&#x27;, 7, 3),</span><br><span class=\"line\">    (10, &#x27;赵敏&#x27;, 20, &#x27;市场部总监&#x27;, 12500, &#x27;2004-10-12&#x27;, 1, 2),</span><br><span class=\"line\">    (11, &#x27;鹿杖客&#x27;, 56, &#x27;职员&#x27;, 3750, &#x27;2006-10-03&#x27;, 10, 2),</span><br><span class=\"line\">    (12, &#x27;鹤笔翁&#x27;, 19, &#x27;职员&#x27;, 3750, &#x27;2007-05-09&#x27;, 10, 2),</span><br><span class=\"line\">    (13, &#x27;方东白&#x27;, 19, &#x27;职员&#x27;, 5500, &#x27;2009-02-12&#x27;, 10, 2),</span><br><span class=\"line\">    (14, &#x27;张三丰&#x27;, 88, &#x27;销售总监&#x27;, 14000, &#x27;2004-10-12&#x27;, 1, 4),</span><br><span class=\"line\">    (15, &#x27;俞莲舟&#x27;, 38, &#x27;销售&#x27;, 4600, &#x27;2004-10-12&#x27;, 14, 4),</span><br><span class=\"line\">    (16, &#x27;宋远桥&#x27;, 40, &#x27;销售&#x27;, 4600, &#x27;2004-10-12&#x27;, 14, 4),</span><br><span class=\"line\">    (17, &#x27;陈友谅&#x27;, 42, null, 2000, &#x27;2011-10-12&#x27;, 1, null);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"22-笛卡尔积\"><a class=\"markdownIt-Anchor\" href=\"#22-笛卡尔积\">#</a> 2.2 笛卡尔积</h3>\n<blockquote>\n<p>笛卡尔乘积是指在数学中，两个集合 A 集合 和 B 集合 的所有组合情况。</p>\n</blockquote>\n<ul>\n<li>\n<p>这是我们查单表的 SQL 语句</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>那么我们要执行多表查询，就只需要使用逗号分隔多张表即可</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp , dept;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>但是这个时候查出来的结果却是 102 条记录</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605080339628.png\" alt=\"image-20220605080339628\"></p>\n<p>与 部门表 dept 所有记录 (6) 的所有组合情况，这种现象称之为笛卡尔积。</p>\n</li>\n</ul>\n<blockquote>\n<p>在 SQL 语句中，如何来去除无效的笛卡尔积呢？ 我们可以给多表查询加上连接查询的条件即可。</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp , dept where emp.dept_id = dept.id;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605080630910.png\" alt=\"image-20220605080630910\"></p>\n<p>而由于 id 为 17 的员工，没有 <code>dept_id</code>  字段值，所以在多表查询时，根据连接查询的条件并没有查询到。</p>\n<h3 id=\"23-分类\"><a class=\"markdownIt-Anchor\" href=\"#23-分类\">#</a> 2.3 分类</h3>\n<blockquote>\n<p>多表查询又分为以下两大类：</p>\n</blockquote>\n<ul>\n<li>连接查询\n<ul>\n<li>内连接：相当于查询 A、B 交集部分数据</li>\n<li>外连接：\n<ul>\n<li>左外连接：查询左表所有数据，以及两张表交集部分数据</li>\n<li>右外连接：查询右表所有数据，以及两张表交集部分数据</li>\n</ul>\n</li>\n<li>自连接：当前表与自身的连接查询，自连接必须使用表别名</li>\n</ul>\n</li>\n<li>子查询</li>\n</ul>\n<h2 id=\"3内连接\"><a class=\"markdownIt-Anchor\" href=\"#3内连接\">#</a> 3. 内连接</h2>\n<blockquote>\n<p>内连接查询的是两张表交集部分的数据。(也就是绿色部分的数据)</p>\n</blockquote>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605081106113.png\" alt=\"image-20220605081106113\"></p>\n<p>内连接的语法分为两种：<strong>隐式内连接</strong>、<strong>显式内连接</strong>。</p>\n<h3 id=\"31-语法格式\"><a class=\"markdownIt-Anchor\" href=\"#31-语法格式\">#</a> 3.1 语法格式</h3>\n<ul>\n<li>\n<p>隐式内连接</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表1 , 表2 WHERE 条件 ... ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>显式内连接</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表1 [ INNER ] JOIN 表2 ON 连接条件 ... ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"32-案例练习\"><a class=\"markdownIt-Anchor\" href=\"#32-案例练习\">#</a> 3.2 案例练习</h3>\n<ul>\n<li>查询每一个员工的姓名，及关联的部门的名称 (隐式内连接实现)</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select e.`name`, d.`name` from emp e,dept d where e.dept_id = d.id;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>查询每一个员工的姓名，及关联的部门的名称 (显式内连接实现)</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select e.`name`, d.`name` from emp e join dept d on e.dept_id = d.id;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"4外连接\"><a class=\"markdownIt-Anchor\" href=\"#4外连接\">#</a> 4. 外连接</h2>\n<blockquote>\n<p>外连接和内连接一样查询的都是两个表交集的数据，不同的是左外连接会查询左表的全部数据以及交集数据，右外连接与之相对。</p>\n</blockquote>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605081106113.png\" alt=\"image-20220605081106113\"></p>\n<h3 id=\"41-语法格式\"><a class=\"markdownIt-Anchor\" href=\"#41-语法格式\">#</a> 4.1 语法格式</h3>\n<ul>\n<li>\n<p>左外连接</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表1 LEFT [ OUTER ] JOIN 表2 ON 条件 ... ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>右外连接</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表1 RIGHT [ OUTER ] JOIN 表2 ON 条件 ...;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"42-案例练习\"><a class=\"markdownIt-Anchor\" href=\"#42-案例练习\">#</a> 4.2 案例练习</h3>\n<ul>\n<li>\n<p>查询 <code>emp</code>  表的所有数据，和对应的部门信息（左外）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select e.*,d.name from emp e left join dept d on e.dept_id = d.id;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询 <code>dept</code>  表的所有数据，和对应的员工信息（右外）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select e.*,d.name from emp e right join dept d on e.dept_id = d.id;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>左外连接和右外连接是可以相互替换的，只需要调整在连接查询时 SQL 中，表结构的先后顺序就可以了。而我们在日常开发使用时，更偏向于左外连接。</p>\n<h2 id=\"5自连接\"><a class=\"markdownIt-Anchor\" href=\"#5自连接\">#</a> 5. 自连接</h2>\n<h3 id=\"51-自链接查询\"><a class=\"markdownIt-Anchor\" href=\"#51-自链接查询\">#</a> 5.1 自链接查询</h3>\n<blockquote>\n<p>当前表与自身的连接查询，自连接必须使用表别名</p>\n</blockquote>\n<ul>\n<li>\n<p>语法格式</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表A 别名A JOIN 表A 别名B ON 条件 ...;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p>自连接查询，可以是内连接查询，也可以是外连接查询</p>\n</li>\n<li>\n<p>案例练习</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- 查询员工及其所属领导的名字</span><br><span class=\"line\">select a.name, b.name from employee a, employee b where a.manager = b.id;</span><br><span class=\"line\">-- 没有领导的也查询出来</span><br><span class=\"line\">select a.name, b.name from employee a left join employee b on a.manager = b.id;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"52-联合查询\"><a class=\"markdownIt-Anchor\" href=\"#52-联合查询\">#</a> 5.2 联合查询</h3>\n<blockquote>\n<p>把多次查询的结果合并，形成一个新的查询集，其实就是吧两个查询语句给连起来了。</p>\n</blockquote>\n<ul>\n<li>\n<p>语法格式</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT 字段列表 FROM 表A ...</span><br><span class=\"line\">UNION [ALL]</span><br><span class=\"line\">SELECT 字段列表 FROM 表B ...</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>注意事项</p>\n<ul>\n<li>UNION ALL 会有重复结果，UNION 不会</li>\n<li>联合查询比使用 or 效率高，不会使索引失效</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"6子查询\"><a class=\"markdownIt-Anchor\" href=\"#6子查询\">#</a> 6. 子查询</h2>\n<h3 id=\"61-概述\"><a class=\"markdownIt-Anchor\" href=\"#61-概述\">#</a> 6.1 概述</h3>\n<blockquote>\n<p>SQL 语句中嵌套 SELECT 语句，称为嵌套查询，又称子查询。</p>\n</blockquote>\n<ul>\n<li>\n<p>语法格式</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p>子查询外部的语句可以是 <code>INSERT </code> /  <code>UPDATE </code> /  <code>DELETE </code> /  <code>SELECT </code> 的任何一个。</p>\n</li>\n<li>\n<p>根据子查询结果不同，分为：</p>\n<ul>\n<li>标量子查询（子查询结果为单个值）</li>\n<li>列子查询（子查询结果为一列）</li>\n<li>行子查询（子查询结果为一行）</li>\n<li>表子查询（子查询结果为多行多列）</li>\n</ul>\n</li>\n<li>\n<p>根据子查询位置，分为：</p>\n<ul>\n<li>WHERE 之后</li>\n<li>FROM 之后</li>\n<li>SELECT 之后</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"62-标量子查询\"><a class=\"markdownIt-Anchor\" href=\"#62-标量子查询\">#</a> 6.2 标量子查询</h3>\n<blockquote>\n<p>子查询返回的结果是单个值（数字、字符串、日期等），最简单的形式，这种子查询称为标量子查询。</p>\n</blockquote>\n<p>常用操作符： <code>- &lt; &gt; &gt; &gt;= &lt; &lt;=</code></p>\n<p>案例练习：</p>\n<ul>\n<li>\n<p>查询 “销售部” 的所有员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where dept_id = (select id from dept where name = &#x27;销售部&#x27;);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询在 “方东白” 入职之后的员工信息</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where entrydate &gt; (select entrydate from emp where name = &#x27;方东白&#x27;);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h3 id=\"63-列子查询\"><a class=\"markdownIt-Anchor\" href=\"#63-列子查询\">#</a> 6.3 列子查询</h3>\n<blockquote>\n<p>子查询返回的结果是一列（可以是多行），这种子查询称为列子查询。</p>\n</blockquote>\n<p>常用的操作符： <code>IN 、NOT IN 、 ANY 、SOME 、 ALL</code></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">操作符</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">IN</td>\n<td style=\"text-align:left\">在指定的集合范围内，多选一</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">NOT IN</td>\n<td style=\"text-align:left\">不在指定的集合范围内</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ANY</td>\n<td style=\"text-align:left\">子查询返回列表中，有任意一个满足即可</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SOME</td>\n<td style=\"text-align:left\">与 ANY 等同，使用 SOME 的地方都可以使用 ANY</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ALL</td>\n<td style=\"text-align:left\">子查询返回列表的所有值都必须满足</td>\n</tr>\n</tbody>\n</table>\n<p>案例练习：</p>\n<ul>\n<li>\n<p>查询 “销售部” 和 “市场部” 的所有员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where dept_id in (select id from dept where name = &#x27;销售部&#x27; or name = &#x27;市场部&#x27;);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询比 “财务部” 所有人工资都高的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where salary &gt; all ( select salary from emp where dept_id = (select id from dept where name = &#x27;财务部&#x27;) );</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询比研发部其中任意一人工资高的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where salary &gt; any ( select salary from emp where dept_id = (select id from dept where name = &#x27;研发部&#x27;) );</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"64-行子查询\"><a class=\"markdownIt-Anchor\" href=\"#64-行子查询\">#</a> 6.4 行子查询</h3>\n<blockquote>\n<p>子查询返回的结果是一行（可以是多列），这种子查询称为行子查询。</p>\n</blockquote>\n<p>常用的操作符： <code>= 、&lt;&gt; 、IN 、NOT IN</code></p>\n<p>案例练习：</p>\n<ul>\n<li>查询与 “张无忌” 的薪资及直属领导相同的员工信息；</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where (salary,managerid) = (select salary, managerid from emp where name = &#x27;张无忌&#x27;);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h3 id=\"65-表子查询\"><a class=\"markdownIt-Anchor\" href=\"#65-表子查询\">#</a> 6.5 表子查询</h3>\n<blockquote>\n<p>子查询返回的结果是多行多列，这种子查询称为表子查询。</p>\n</blockquote>\n<p>常用操作符： <code>IN</code></p>\n<p>案例练习：</p>\n<ul>\n<li>\n<p>查询与 “鹿杖客” , “宋远桥” 的职位和薪资相同的员工信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from emp where (job,salary) in ( select job, salary from emp where name = &#x27;鹿杖客&#x27; or name = &#x27;宋远桥&#x27; );</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询入职日期是 “2006-01-01” 之后的员工信息，及其部门信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select e.*, d.* from (select * from emp where entrydate &gt; &#x27;2006-01-01&#x27;) e left join dept d on e.dept_id = d.id ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"四-事务\"><a class=\"markdownIt-Anchor\" href=\"#四-事务\">#</a> 四、事务</h1>\n<h2 id=\"1事务简介\"><a class=\"markdownIt-Anchor\" href=\"#1事务简介\">#</a> 1. 事务简介</h2>\n<blockquote>\n<p><strong>事务</strong>是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p>\n</blockquote>\n<p>举例说明：</p>\n<p>张三给李四转账 1000 块钱，张三银行账户的钱<mark>减少 1000</mark>，而李四银行账户的钱要<mark>增加 1000</mark>。 这一组操作就必须在一个事务的范围内，<strong>要么都成功</strong>，<strong>要么都失败</strong>。</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605121214330.png\" alt=\"image-20220605121214330\"></p>\n<p><strong>注意： 默认 MySQL 的事务是自动提交的，也就是说，当执行完一条 DML 语句时，MySQL 会立即隐式的提交事务。</strong></p>\n<h2 id=\"2事务操作\"><a class=\"markdownIt-Anchor\" href=\"#2事务操作\">#</a> 2. 事务操作</h2>\n<h3 id=\"21-数据准备-2\"><a class=\"markdownIt-Anchor\" href=\"#21-数据准备-2\">#</a> 2.1 数据准备</h3>\n<blockquote>\n<p>在开始学习事务之前需要先执行以下 SQL 语句来导入数据。</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drop table if exists account;</span><br><span class=\"line\"></span><br><span class=\"line\">create table account(</span><br><span class=\"line\">    id int primary key AUTO_INCREMENT comment &#x27;ID&#x27;,</span><br><span class=\"line\">    name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class=\"line\">    money double(10, 2) comment &#x27;余额&#x27;</span><br><span class=\"line\">) comment &#x27;账户表&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">insert into account(name, money) VALUES (&#x27;张三&#x27;, 2000),(&#x27;李四&#x27;, 2000);</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h3 id=\"22-未控制事务\"><a class=\"markdownIt-Anchor\" href=\"#22-未控制事务\">#</a> 2.2 未控制事务</h3>\n<blockquote>\n<p>当前情境下事务是 MySQL 默认的事务，也就是每执行一句更新操作都将由 MySQL 自动隐式提交。</p>\n</blockquote>\n<ul>\n<li>\n<p>测试转账操作的正常情况</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- 1. 查询张三余额 </span><br><span class=\"line\">select * from account where name = &#x27;张三&#x27;; </span><br><span class=\"line\">-- 2. 张三的余额减少1000 </span><br><span class=\"line\">update account set money = money - 1000 where name = &#x27;张三&#x27;; </span><br><span class=\"line\">-- 3. 李四的余额增加1000 </span><br><span class=\"line\">update account set money = money + 1000 where name = &#x27;李四&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605122748424.png\" alt=\"image-20220605122748424\"></p>\n</li>\n<li>\n<p>测试异常情况（执行之前先将两个人的余额都恢复到 2000）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- 1. 查询张三余额 </span><br><span class=\"line\">select * from account where name = &#x27;张三&#x27;; </span><br><span class=\"line\">-- 2. 张三的余额减少1000 </span><br><span class=\"line\">update account set money = money - 1000 where name = &#x27;张三&#x27;; </span><br><span class=\"line\">出错了...</span><br><span class=\"line\">-- 3. 李四的余额增加1000 </span><br><span class=\"line\">update account set money = money + 1000 where name = &#x27;李四&#x27;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605123015353.png\" alt=\"image-20220605123015353\"></p>\n</li>\n</ul>\n<p>通过上面的两种情况演示，我们得知如果是异常情况的话，这种错误是非常致命的，假如真的是两个人之间的转账，一方钱减少了，另一方却没有增加的话，用户必定会勃然大怒，因此我们需要通过控制事务的方式来避免这种情况的出现！</p>\n<h3 id=\"23-控制事务一不常用\"><a class=\"markdownIt-Anchor\" href=\"#23-控制事务一不常用\">#</a> 2.3 控制事务一（不常用）</h3>\n<ul>\n<li>\n<p>查看 / 设置事务提交方式</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT @@autocommit ; </span><br><span class=\"line\">SET @@autocommit = 0 ;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>提交事务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COMMIT;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>回滚事务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ROLLBACK;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><strong>注意</strong>：上述的这种方式，我们是修改了事务的自动提交行为，把默认的自动提交修改为了手动提交，此时我们执行的 DML 语句都不会提交，需要手动的执行 <code>commit</code>  进行提交。</p>\n<h3 id=\"24-控制事务二常用\"><a class=\"markdownIt-Anchor\" href=\"#24-控制事务二常用\">#</a> 2.4 控制事务二（常用）</h3>\n<ul>\n<li>\n<p>开启事务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">START TRANSACTION 或 BEGIN TRANSACTION;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>提交事务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COMMIT;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>回滚事务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ROLLBACK;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"25-转账案例\"><a class=\"markdownIt-Anchor\" href=\"#25-转账案例\">#</a> 2.5 转账案例</h3>\n<blockquote>\n<p>接下来通过控制事务的方式演示一遍转账操作。</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- 开启事务 </span><br><span class=\"line\">start transaction </span><br><span class=\"line\">-- 1. 查询张三余额 </span><br><span class=\"line\">select * from account where name = &#x27;张三&#x27;; </span><br><span class=\"line\">-- 2. 张三的余额减少1000 </span><br><span class=\"line\">update account set money = money - 1000 where name = &#x27;张三&#x27;; </span><br><span class=\"line\">-- 3. 李四的余额增加1000 </span><br><span class=\"line\">update account set money = money + 1000 where name = &#x27;李四&#x27;; </span><br><span class=\"line\">-- 如果正常执行完毕, 则提交事务 </span><br><span class=\"line\">commit; </span><br><span class=\"line\">-- 如果执行过程中报错, 则回滚事务 </span><br><span class=\"line\">-- rollback;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<h2 id=\"3事务四大特性acid\"><a class=\"markdownIt-Anchor\" href=\"#3事务四大特性acid\">#</a> 3. 事务四大特性（ACID）</h2>\n<ul>\n<li>原子性 ( <code>Atomicity</code> )：事务是不可分割的最小操作但愿，要么全部成功，要么全部失败</li>\n<li>一致性 ( <code>Consistency</code> )：事务完成时，必须使所有数据都保持一致状态</li>\n<li>隔离性 ( <code>Isolation</code> )：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</li>\n<li>持久性 ( <code>Durability</code> )：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</li>\n</ul>\n<h2 id=\"4并发事务问题\"><a class=\"markdownIt-Anchor\" href=\"#4并发事务问题\">#</a> 4. 并发事务问题</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">问题</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">脏读</td>\n<td style=\"text-align:left\">一个事务读到另一个事务还没提交的数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">不可重复读</td>\n<td style=\"text-align:left\">一个事务先后读取同一条记录，但两次读取的数据不同</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">幻读</td>\n<td style=\"text-align:left\">一个事务按照条件查询数据时，没有对应的数据行，但是再插入数据时，又发现这行数据已经存在</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p>赃读（比如 B 读取到了 A 未提交的数据）</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605125309397.png\" alt=\"image-20220605125309397\"></p>\n</li>\n<li>\n<p>不可重复读（事务 A 两次读取同一条记录，但是读取到的数据却是不一样的）</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605125417374.png\" alt=\"image-20220605125417374\"></p>\n</li>\n<li>\n<p>幻读</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MySQL/image-20220605125445124.png\" alt=\"image-20220605125445124\"></p>\n</li>\n</ul>\n<h2 id=\"5事务隔离级别\"><a class=\"markdownIt-Anchor\" href=\"#5事务隔离级别\">#</a> 5. 事务隔离级别</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">隔离级别</th>\n<th style=\"text-align:left\">脏读</th>\n<th style=\"text-align:left\">不可重复读</th>\n<th style=\"text-align:left\">幻读</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Read uncommitted</td>\n<td style=\"text-align:left\">√</td>\n<td style=\"text-align:left\">√</td>\n<td style=\"text-align:left\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Read committed</td>\n<td style=\"text-align:left\">×</td>\n<td style=\"text-align:left\">√</td>\n<td style=\"text-align:left\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>Repeatable Read (默认)</strong></td>\n<td style=\"text-align:left\">×</td>\n<td style=\"text-align:left\">×</td>\n<td style=\"text-align:left\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Serializable</td>\n<td style=\"text-align:left\">×</td>\n<td style=\"text-align:left\">×</td>\n<td style=\"text-align:left\">×</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p>√表示在当前隔离级别下该问题会出现</p>\n</li>\n<li>\n<p><code>Serializable </code> 性能最低； <code>Read uncommitted</code>  性能最高，数据安全性最差</p>\n</li>\n<li>\n<p>查看事务隔离级别： <code>SELECT @@TRANSACTION_ISOLATION;</code></p>\n</li>\n<li>\n<p>设置事务隔离级别：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL &#123;READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE &#125;;</span><br><span class=\"line\">sql</span><br></pre></td></tr></table></figure>\n<p><code>SESSION </code> 是会话级别，表示只针对当前会话有效， <code>GLOBAL </code> 表示对所有会话有效</p>\n</li>\n</ul>\n",
            "tags": [
                "数据库",
                "教程",
                "学习"
            ]
        },
        {
            "id": "http://example.com/passages/MyBatis-Plus/",
            "url": "http://example.com/passages/MyBatis-Plus/",
            "title": "MyBatis-Plus",
            "date_published": "2022-08-28T05:38:50.000Z",
            "content_html": "<h1 id=\"一-mybatis-plus\"><a class=\"markdownIt-Anchor\" href=\"#一-mybatis-plus\">#</a> 一、MyBatis-Plus</h1>\n<h2 id=\"1简介\"><a class=\"markdownIt-Anchor\" href=\"#1简介\">#</a> 1. 简介</h2>\n<p><a href=\"https://github.com/baomidou/mybatis-plus\">MyBatis-Plus (opens new window)</a>（简称 MP）是一个 <a href=\"https://www.mybatis.org/mybatis-3/\">MyBatis (opens new window)</a> 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>\n<blockquote>\n<p>我们的愿景是成为 MyBatis 最好的搭档，就像 <a href=\"https://baomidou.com/img/contra.jpg\">魂斗罗</a> 中的 1P、2P，基友搭配，效率翻倍。</p>\n</blockquote>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/relationship-with-mybatis.png\" alt=\"img\"></p>\n<h2 id=\"2特性\"><a class=\"markdownIt-Anchor\" href=\"#2特性\">#</a> 2. 特性</h2>\n<ul>\n<li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>\n<li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>\n<li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li>\n<li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>\n<li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>\n<li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>\n<li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li>\n<li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>\n<li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>\n<li><strong>分页插件支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>\n<li><strong>内置性能分析插件</strong>：可输出 SQL 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>\n<li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>\n</ul>\n<h2 id=\"3支持数据库\"><a class=\"markdownIt-Anchor\" href=\"#3支持数据库\">#</a> 3. 支持数据库</h2>\n<blockquote>\n<p>任何能使用  <code>MyBatis</code>  进行 CRUD, 并且支持标准 SQL 的数据库，具体支持情况如下，如果不在下列表查看分页部分教程 PR 您的支持。</p>\n</blockquote>\n<ul>\n<li>MySQL，Oracle，DB2，H2，HSQL，SQLite，PostgreSQL，SQLServer，Phoenix，Gauss ，ClickHouse，Sybase，OceanBase，Firebird，Cubrid，Goldilocks，csiidb</li>\n<li>达梦数据库，虚谷数据库，人大金仓数据库，南大通用 (华库) 数据库，南大通用数据库，神通数据库，瀚高数据库</li>\n</ul>\n<h2 id=\"4框架结构\"><a class=\"markdownIt-Anchor\" href=\"#4框架结构\">#</a> 4. 框架结构</h2>\n<img src=\"https://baomidou.com/img/mybatis-plus-framework.jpg\" alt=\"framework\" style=\"zoom:50%;\">\n<h2 id=\"5官方地址\"><a class=\"markdownIt-Anchor\" href=\"#5官方地址\">#</a> 5. 官方地址</h2>\n<blockquote>\n<p>** 官方网站：**<a href=\"https://baomidou.com/\">https://baomidou.com/</a></p>\n<p>** 官方文档：**<a href=\"https://baomidou.com/pages/24112f/\">https://baomidou.com/pages/24112f/</a></p>\n</blockquote>\n<h1 id=\"二-入门案例\"><a class=\"markdownIt-Anchor\" href=\"#二-入门案例\">#</a> 二、入门案例</h1>\n<h2 id=\"1开发环境\"><a class=\"markdownIt-Anchor\" href=\"#1开发环境\">#</a> 1. 开发环境</h2>\n<ul>\n<li><strong>IDE：IDEA 2019.3.5</strong></li>\n<li><strong>JDK：JDK8+</strong></li>\n<li><strong>构建工具：Maven 3.5.4</strong></li>\n<li><strong>MySQL：MySQL 8.0.24</strong></li>\n<li><strong>Navicat：Navicat Premium 15</strong></li>\n<li><strong>Spring Boot：2.6.7</strong></li>\n<li><strong>MyBatis-Plus：3.5.1</strong></li>\n</ul>\n<h2 id=\"2建库建表\"><a class=\"markdownIt-Anchor\" href=\"#2建库建表\">#</a> 2. 建库建表</h2>\n<ul>\n<li>\n<p><strong>打开 Navicat 运行以下 SQL 脚本进行建库建表</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE `mybatis_plus` <span class=\"comment\">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>; </span><br><span class=\"line\">use `mybatis_plus`; </span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `<span class=\"keyword\">user</span>` ( </span><br><span class=\"line\">    `id` <span class=\"type\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;主键ID&#x27;</span>, </span><br><span class=\"line\">    `name` <span class=\"type\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>, </span><br><span class=\"line\">    `age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年龄&#x27;</span>, </span><br><span class=\"line\">    `email` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;邮箱&#x27;</span>, </span><br><span class=\"line\">    <span class=\"keyword\">PRIMARY</span> KEY (`id`) </span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>插入几条测试数据</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">user</span> (id, name, age, email) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>, <span class=\"string\">&#x27;Jone&#x27;</span>, <span class=\"number\">18</span>, <span class=\"string\">&#x27;test1@baomidou.com&#x27;</span>), </span><br><span class=\"line\">(<span class=\"number\">2</span>, <span class=\"string\">&#x27;Jack&#x27;</span>, <span class=\"number\">20</span>, <span class=\"string\">&#x27;test2@baomidou.com&#x27;</span>), </span><br><span class=\"line\">(<span class=\"number\">3</span>, <span class=\"string\">&#x27;Tom&#x27;</span>, <span class=\"number\">28</span>, <span class=\"string\">&#x27;test3@baomidou.com&#x27;</span>), </span><br><span class=\"line\">(<span class=\"number\">4</span>, <span class=\"string\">&#x27;Sandy&#x27;</span>, <span class=\"number\">21</span>, <span class=\"string\">&#x27;test4@baomidou.com&#x27;</span>), </span><br><span class=\"line\">(<span class=\"number\">5</span>, <span class=\"string\">&#x27;Billie&#x27;</span>, <span class=\"number\">24</span>, <span class=\"string\">&#x27;test5@baomidou.com&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"3创建工程\"><a class=\"markdownIt-Anchor\" href=\"#3创建工程\">#</a> 3. 创建工程</h2>\n<ul>\n<li>\n<p><strong>使用 <code>Spring Initializer</code>  快速初始化一个 Spring Boot 工程</strong></p>\n<img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519140839640.png\" alt=\"image-20220519140839640\" style=\"zoom:80%;\">\n<img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141335981.png\" alt=\"image-20220519141335981\" style=\"zoom:80%;\">\n<img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141737405.png\" alt=\"image-20220519141737405\" style=\"zoom:80%;\">\n<img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141849937.png\" alt=\"image-20220519141849937\" style=\"zoom:80%;\">\n</li>\n<li>\n<p><strong>引入 <code>MyBatis-Plus</code>  的依赖</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>安装 <code>Lombok</code>  插件</strong></p>\n<img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519143257305.png\" alt=\"image-20220519143257305\" style=\"zoom:80%;\">\n</li>\n</ul>\n<h2 id=\"4配置编码\"><a class=\"markdownIt-Anchor\" href=\"#4配置编码\">#</a> 4. 配置编码</h2>\n<ul>\n<li>\n<p><strong>配置 <code>application.yml</code>  文件</strong></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#配置端口</span></span><br><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">80</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"comment\">#配置数据源</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置数据源类型</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.zaxxer.hikari.HikariDataSource</span></span><br><span class=\"line\">    <span class=\"comment\">#配置连接数据库的信息</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> &#123;<span class=\"string\">username</span>&#125;</span><br><span class=\"line\">    <span class=\"attr\">password:</span> &#123;<span class=\"string\">password</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>在 Spring Boot 启动类中添加  <code>@MapperScan</code>  注解，扫描 Mapper 文件夹</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@MapperScan(&quot;指定Mapper接口所在的包&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MybatisPlusDemoApplication</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\tSpringApplication.run(MybatisPlusDemoApplication.class, args);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>编写实体类  <code>User.java</code> （此处使用了 Lombok 简化代码）</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String email;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>编写 Mapper 包下的  <code>UserMapper</code>  接口</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">User</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"5测试查询\"><a class=\"markdownIt-Anchor\" href=\"#5测试查询\">#</a> 5. 测试查询</h2>\n<ul>\n<li>\n<p><strong>编写一个测试类 <code>MyBatisPlusTest.java</code> </strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBatisPlusTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Resource</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 测试查询所有数据</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">testSelectList</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//通过条件构造器查询一个list集合，若没有条件，则可以设置null为参数</span></span><br><span class=\"line\">        List&lt;User&gt; users = userMapper.selectList(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">        users.forEach(System.out::println);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>控制台打印查询结果</strong></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519150454211.png\" alt=\"image-20220519150454211\"></p>\n</li>\n</ul>\n<h1 id=\"三-增删改查\"><a class=\"markdownIt-Anchor\" href=\"#三-增删改查\">#</a> 三、增删改查</h1>\n<h2 id=\"1basemappert\"><a class=\"markdownIt-Anchor\" href=\"#1basemappert\">#</a> 1.BaseMapper&lt;T&gt;</h2>\n<blockquote>\n<p>说明:</p>\n<ul>\n<li>通用 CRUD 封装 BaseMapper 接口，为  <code>Mybatis-Plus</code>  启动时自动解析实体表关系映射转换为  <code>Mybatis</code>  内部对象注入容器</li>\n<li>泛型  <code>T</code>  为任意实体对象</li>\n<li>参数  <code>Serializable</code>  为任意类型主键  <code>Mybatis-Plus</code>  不推荐使用复合主键约定每一张表都有自己的唯一  <code>id</code>  主键</li>\n<li>对象  <code>Wrapper</code>  为条件构造器</li>\n</ul>\n</blockquote>\n<p>MyBatis-Plus 中的基本 CRUD 在内置的 BaseMapper 中都已得到了实现，因此我们继承该接口以后可以直接使用。</p>\n<p>本次演示的 CRUD 操作不包含参数带有条件构造器的方法，关于条件构造器将单独在一个章节进行演示。</p>\n<hr>\n<blockquote>\n<p><strong>BaseMapper 中提供的 CRUD 方法：</strong></p>\n</blockquote>\n<ul>\n<li>\n<p><strong>增加：Insert</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 插入一条记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">insert</span><span class=\"params\">(T entity)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>删除：Delete</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，删除记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">delete</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; wrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 删除（根据ID 批量删除）</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">deleteBatchIds</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 删除</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">deleteById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 columnMap 条件，删除记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">deleteByMap</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>修改：Update</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 whereWrapper 条件，更新记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.ENTITY)</span> T updateEntity, <span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; whereWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 修改</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">updateById</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.ENTITY)</span> T entity)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>查询：Selete</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 ID 查询</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">selectById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，查询一条记录</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">selectOne</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 查询（根据ID 批量查询）</span></span><br><span class=\"line\"><span class=\"function\">List&lt;T&gt; <span class=\"title\">selectBatchIds</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，查询全部记录</span></span><br><span class=\"line\"><span class=\"function\">List&lt;T&gt; <span class=\"title\">selectList</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询（根据 columnMap 条件）</span></span><br><span class=\"line\"><span class=\"function\">List&lt;T&gt; <span class=\"title\">selectByMap</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; selectMaps(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper);</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录。注意： 只返回第一个字段的值</span></span><br><span class=\"line\"><span class=\"function\">List&lt;Object&gt; <span class=\"title\">selectObjs</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，查询全部记录（并翻页）</span></span><br><span class=\"line\"><span class=\"function\">IPage&lt;T&gt; <span class=\"title\">selectPage</span><span class=\"params\">(IPage&lt;T&gt; page, <span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录（并翻页）</span></span><br><span class=\"line\">IPage&lt;Map&lt;String, Object&gt;&gt; selectMapsPage(IPage&lt;T&gt; page, <span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper);</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询总记录数</span></span><br><span class=\"line\"><span class=\"function\">Integer <span class=\"title\">selectCount</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"2调用mapper层实现crud\"><a class=\"markdownIt-Anchor\" href=\"#2调用mapper层实现crud\">#</a> 2. 调用 Mapper 层实现 CRUD</h2>\n<h3 id=\"21插入\"><a class=\"markdownIt-Anchor\" href=\"#21插入\">#</a> 2.1\t插入</h3>\n<hr>\n<blockquote>\n<p><strong>最终执行的结果，所获取的 id 为 1527206783590903810</strong></p>\n<p><strong>这是因为 MyBatis-Plus 在实现插入数据时，会默认基于雪花算法的策略生成 id</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试插入一条数据</span></span><br><span class=\"line\"><span class=\"comment\">  * MyBatis-Plus在实现插入数据时，会默认基于雪花算法的策略生成id</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testInsert</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">    user.setName(<span class=\"string\">&quot;Vz&quot;</span>);</span><br><span class=\"line\">    user.setAge(<span class=\"number\">21</span>);</span><br><span class=\"line\">    user.setEmail(<span class=\"string\">&quot;vz@oz6.cn&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.insert(user);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;添加成功！&quot;</span> : <span class=\"string\">&quot;添加失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">    <span class=\"comment\">//1527206783590903810（当前 id 为雪花算法自动生成的id）</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;id自动获取&quot;</span> + user.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"22删除\"><a class=\"markdownIt-Anchor\" href=\"#22删除\">#</a> 2.2\t删除</h3>\n<hr>\n<h4 id=\"a-根据id删除数据\"><a class=\"markdownIt-Anchor\" href=\"#a-根据id删除数据\">#</a> a、根据 ID 删除数据</h4>\n<blockquote>\n<p><strong>调用方法：int deleteById (Serializable id);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试根据id删除一条数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testDeleteById</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.deleteById(<span class=\"number\">1527206783590903810L</span>);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"b-根据id批量删除数据\"><a class=\"markdownIt-Anchor\" href=\"#b-根据id批量删除数据\">#</a> b、根据 ID 批量删除数据</h4>\n<blockquote>\n<p><strong>调用方法：int deleteBatchIds (@Param (Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试通过id批量删除数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testDeleteBatchIds</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List&lt;Long&gt; ids = Arrays.asList(<span class=\"number\">6L</span>,<span class=\"number\">7L</span>,<span class=\"number\">8L</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.deleteBatchIds(ids);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"c-根据map条件删除数据\"><a class=\"markdownIt-Anchor\" href=\"#c-根据map条件删除数据\">#</a> c、根据 Map 条件删除数据</h4>\n<blockquote>\n<p><strong>调用方法：int deleteByMap (@Param (Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 测试根据Map集合中所设置的条件删除数据</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testDeleteByMap</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//当前演示为根据name和age删除数据</span></span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为：DELETE FROM user WHERE name = ? AND age = ?</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;Vz&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">21</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.deleteByMap(map);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"23修改\"><a class=\"markdownIt-Anchor\" href=\"#23修改\">#</a> 2.3\t修改</h3>\n<blockquote>\n<p><strong>调用方法：int updateById (@Param (Constants.ENTITY) T entity);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试根据id修改用户信息</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testUpdateById</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为： UPDATE user SET name=?, age=?, email=? WHERE id=?</span></span><br><span class=\"line\">    User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">    user.setId(<span class=\"number\">6L</span>);</span><br><span class=\"line\">    user.setName(<span class=\"string\">&quot;VzUpdate&quot;</span>);</span><br><span class=\"line\">    user.setAge(<span class=\"number\">18</span>);</span><br><span class=\"line\">    user.setEmail(<span class=\"string\">&quot;Vz@sina.com&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.updateById(user);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"24查询\"><a class=\"markdownIt-Anchor\" href=\"#24查询\">#</a> 2.4\t查询</h3>\n<hr>\n<h4 id=\"a-根据id查询用户信息\"><a class=\"markdownIt-Anchor\" href=\"#a-根据id查询用户信息\">#</a> a、根据 ID 查询用户信息</h4>\n<blockquote>\n<p><strong>调用方法：T selectById (Serializable id);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试根据id查询用户数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectById</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    User user = userMapper.selectById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">    System.out.println(user);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"b-根据多个id查询多个用户信息\"><a class=\"markdownIt-Anchor\" href=\"#b-根据多个id查询多个用户信息\">#</a> b、根据多个 ID 查询多个用户信息</h4>\n<blockquote>\n<p><strong>调用方法：List<T> selectBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 根据多个id查询用户数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectBatchIds</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为：SELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class=\"line\">    List&lt;Long&gt; ids = Arrays.asList(<span class=\"number\">1L</span>,<span class=\"number\">2L</span>,<span class=\"number\">3L</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectBatchIds(ids);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"c-根据map条件查询用户信息\"><a class=\"markdownIt-Anchor\" href=\"#c-根据map条件查询用户信息\">#</a> c、根据 Map 条件查询用户信息</h4>\n<blockquote>\n<p><strong>调用方法：List<T> selectByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 根据Map所设置的条件查询用户</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectByMap</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为：SELECT id,name,age,email FROM user WHERE age = ?</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">18</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"d-查询所有用户信息\"><a class=\"markdownIt-Anchor\" href=\"#d-查询所有用户信息\">#</a> d、查询所有用户信息</h4>\n<blockquote>\n<p><strong>调用方法：List<T> selectList(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);</T></T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试查询所有数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">testSelectList</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectList(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"3通用service\"><a class=\"markdownIt-Anchor\" href=\"#3通用service\">#</a> 3. 通用 Service</h2>\n<blockquote>\n<p>说明:</p>\n<ul>\n<li>通用 Service CRUD 封装 <code>IService</code>  接口，进一步封装 CRUD 采用  <code>get 查询单行</code>   <code>remove 删除</code>   <code>list 查询集合</code>   <code>page 分页</code>  前缀命名方式区分  <code>Mapper</code>  层避免混淆，</li>\n<li>泛型  <code>T</code>  为任意实体对象</li>\n<li>建议如果存在自定义通用 Service 方法的可能，请创建自己的  <code>IBaseService</code>  继承  <code>Mybatis-Plus</code>  提供的基类</li>\n<li>对象  <code>Wrapper</code>  为 条件构造器</li>\n</ul>\n</blockquote>\n<p>MyBatis-Plus 中有一个接口 ** <code>IService</code> ** 和其实现类 <strong> <code>ServiceImpl</code> </strong>，封装了常见的业务层逻辑，详情查看源码 IService 和 ServiceImpl</p>\n<p>因此我们在使用的时候仅需在自己定义的 ** <code>Service</code> <strong> 接口中继承</strong> <code>IService</code> <strong> 接口，在自己的实现类中实现自己的 Service 并继承</strong> <code>ServiceImpl</code> ** 即可</p>\n<hr>\n<blockquote>\n<p><strong>IService 中的 CRUD 方法</strong></p>\n</blockquote>\n<ul>\n<li>\n<p><strong>增加：Save、SaveOrUpdate</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 插入一条记录（选择字段，策略插入）</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">save</span><span class=\"params\">(T entity)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 插入（批量）</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 插入（批量）</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList, <span class=\"keyword\">int</span> batchSize)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// TableId 注解存在更新记录，否插入一条记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据updateWrapper尝试更新，否继续执行saveOrUpdate(T)方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity, Wrapper&lt;T&gt; updateWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 批量修改插入</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 批量修改插入</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList, <span class=\"keyword\">int</span> batchSize)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>删除：Remove</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，删除记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 删除</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 columnMap 条件，删除记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 删除（根据ID 批量删除）</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>修改：Update</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 UpdateWrapper 条件，更新记录 需要设置sqlset</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">update</span><span class=\"params\">(Wrapper&lt;T&gt; updateWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 whereWrapper 条件，更新记录</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">update</span><span class=\"params\">(T updateEntity, Wrapper&lt;T&gt; whereWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 选择修改</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">updateById</span><span class=\"params\">(T entity)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据ID 批量更新</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">updateBatchById</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据ID 批量更新</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">updateBatchById</span><span class=\"params\">(Collection&lt;T&gt; entityList, <span class=\"keyword\">int</span> batchSize)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>查询：Get、List、Count</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 ID 查询</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">getById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录。结果集，如果是多个会抛出异常，随机取一条加上限制条件 wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, <span class=\"keyword\">boolean</span> throwEx)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\"><span class=\"function\">Map&lt;String, Object&gt; <span class=\"title\">getMap</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">&lt;V&gt; <span class=\"function\">V <span class=\"title\">getObj</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class=\"keyword\">super</span> Object, V&gt; mapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 查询所有</span></span><br><span class=\"line\"><span class=\"function\">List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询列表</span></span><br><span class=\"line\"><span class=\"function\">List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询（根据ID 批量查询）</span></span><br><span class=\"line\"><span class=\"function\">Collection&lt;T&gt; <span class=\"title\">listByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询（根据 columnMap 条件）</span></span><br><span class=\"line\"><span class=\"function\">Collection&lt;T&gt; <span class=\"title\">listByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询所有列表</span></span><br><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; listMaps();</span><br><span class=\"line\"><span class=\"comment\">// 查询列表</span></span><br><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; listMaps(Wrapper&lt;T&gt; queryWrapper);</span><br><span class=\"line\"><span class=\"comment\">// 查询全部记录</span></span><br><span class=\"line\"><span class=\"function\">List&lt;Object&gt; <span class=\"title\">listObjs</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询全部记录</span></span><br><span class=\"line\">&lt;V&gt; <span class=\"function\">List&lt;V&gt; <span class=\"title\">listObjs</span><span class=\"params\">(Function&lt;? <span class=\"keyword\">super</span> Object, V&gt; mapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class=\"line\"><span class=\"function\">List&lt;Object&gt; <span class=\"title\">listObjs</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class=\"line\">&lt;V&gt; <span class=\"function\">List&lt;V&gt; <span class=\"title\">listObjs</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class=\"keyword\">super</span> Object, V&gt; mapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 查询总记录数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">count</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询总记录数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">count</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>分页：Page</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 ID 查询</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">getById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录。结果集，如果是多个会抛出异常，随机取一条加上限制条件 wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\"><span class=\"function\">T <span class=\"title\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, <span class=\"keyword\">boolean</span> throwEx)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\"><span class=\"function\">Map&lt;String, Object&gt; <span class=\"title\">getMap</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">&lt;V&gt; <span class=\"function\">V <span class=\"title\">getObj</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class=\"keyword\">super</span> Object, V&gt; mapper)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"4调用service层操作数据\"><a class=\"markdownIt-Anchor\" href=\"#4调用service层操作数据\">#</a> 4. 调用 Service 层操作数据</h2>\n<blockquote>\n<p>我们在自己的 Service 接口中通过继承 MyBatis-Plus 提供的 IService 接口，不仅可以获得其提供的 CRUD 方法，而且还可以使用自身定义的方法。</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>创建 <code>UserService</code>  并继承 <code>IService</code> </strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * UserService继承IService模板提供的基础功能 </span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserService</span> <span class=\"keyword\">extends</span> <span class=\"title\">IService</span>&lt;<span class=\"title\">User</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>创建 <code>UserService</code>  的实现类并继承 <code>ServiceImpl</code> </strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ServiceImpl实现了IService，提供了IService中基础功能的实现 </span></span><br><span class=\"line\"><span class=\"comment\">  * 若ServiceImpl无法满足业务需求，则可以使用自定的UserService定义方法，并在实现类中实现</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title\">ServiceImpl</span>&lt;<span class=\"title\">UserMapper</span>,<span class=\"title\">User</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">UserService</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>测试查询记录数</strong></p>\n<blockquote>\n<p><strong>调用方法：int count ();</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testGetCount</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//查询总记录数</span></span><br><span class=\"line\">    <span class=\"comment\">//执行的SQL为：SELECT COUNT( * ) FROM user</span></span><br><span class=\"line\">    <span class=\"keyword\">long</span> count = userService.count();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;总记录数：&quot;</span> + count);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>测试批量插入数据</strong></p>\n<blockquote>\n<p><strong>调用方法：boolean saveBatch (Collection<T> entityList);</T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List&lt;User&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">        User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">        user.setName(<span class=\"string\">&quot;Vz&quot;</span>+i);</span><br><span class=\"line\">        user.setAge(<span class=\"number\">20</span>+i);</span><br><span class=\"line\">        list.add(user);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> b = userService.saveBatch(list);</span><br><span class=\"line\">    System.out.println(b ? <span class=\"string\">&quot;添加成功！&quot;</span> : <span class=\"string\">&quot;添加失败！&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"四-常用注解\"><a class=\"markdownIt-Anchor\" href=\"#四-常用注解\">#</a> 四、常用注解</h1>\n<blockquote>\n<p>MyBatis-Plus 提供的注解可以帮我们解决一些数据库与实体之间相互映射的问题。</p>\n</blockquote>\n<h2 id=\"1tablename\"><a class=\"markdownIt-Anchor\" href=\"#1tablename\">#</a> 1.@TableName</h2>\n<blockquote>\n<p>经过以上的测试，在使用 MyBatis-Plus 实现基本的 CRUD 时，我们并没有指定要操作的表，只是在 Mapper 接口继承 BaseMapper 时，设置了泛型 User，而操作的表为 user 表，由此得出结论，MyBatis-Plus 在确定操作的表时，由 BaseMapper 的泛型决定，即实体类型决定，且默认操作的表名和实体类型的类名一致。</p>\n</blockquote>\n<h3 id=\"11引出问题\"><a class=\"markdownIt-Anchor\" href=\"#11引出问题\">#</a> 1.1\t引出问题</h3>\n<hr>\n<blockquote>\n<p><strong>若实体类类型的类名和要操作的表的表名不一致，会出现什么问题？</strong></p>\n</blockquote>\n<ul>\n<li>\n<p>我们将表 <code>user</code>  更名为 <code>t_user</code> ，测试查询功能</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520093844842.png\" alt=\"image-20220520093844842\"></p>\n</li>\n<li>\n<p>程序抛出异常，<strong>Table ‘mybatis_plus.user’ doesn’t exist</strong>，因为现在的表名为 <code>t_user</code> ，而默认操作的表名和实体类型的类名一致，即 <code>user</code>  表</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520094126411.png\" alt=\"image-20220520094126411\"></p>\n</li>\n</ul>\n<h3 id=\"12解决问题\"><a class=\"markdownIt-Anchor\" href=\"#12解决问题\">#</a> 1.2\t解决问题</h3>\n<hr>\n<h4 id=\"a-使用注解解决问题\"><a class=\"markdownIt-Anchor\" href=\"#a-使用注解解决问题\">#</a> a、使用注解解决问题</h4>\n<blockquote>\n<p><strong>在实体类类型上添加 <code>@TableName(&quot;t_user&quot;)</code> ，标识实体类对应的表，即可成功执行 SQL 语句</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String email;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"b-使用全局配置解决问题\"><a class=\"markdownIt-Anchor\" href=\"#b-使用全局配置解决问题\">#</a> b、使用全局配置解决问题</h4>\n<blockquote>\n<p><strong>在开发的过程中，我们经常遇到以上的问题，即实体类所对应的表都有固定的前缀，例如  <code>t_</code>  或  <code>tbl_</code>  此时，可以使用 MyBatis-Plus 提供的全局配置，为实体类所对应的表名设置默认的前缀，那么就不需要在每个实体类上通过 @TableName 标识实体类对应的表</strong></p>\n</blockquote>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"2tableid\"><a class=\"markdownIt-Anchor\" href=\"#2tableid\">#</a> 2.@TableId</h2>\n<blockquote>\n<p><strong>经过以上的测试，MyBatis-Plus 在实现 CRUD 时，会默认将 id 作为主键列，并在插入数据时，默认基于雪花算法的策略生成 id</strong></p>\n</blockquote>\n<h3 id=\"21引出问题\"><a class=\"markdownIt-Anchor\" href=\"#21引出问题\">#</a> 2.1\t引出问题</h3>\n<hr>\n<blockquote>\n<p><strong>若实体类和表中表示主键的不是 id，而是其他字段，例如 uid，MyBatis-Plus 会自动识别 uid 为主键列吗？</strong></p>\n</blockquote>\n<ul>\n<li>\n<p>我们实体类中的属性 <code>id</code>  改为 <code>uid</code> ，将表中的字段 <code>id</code>  也改为 <code>uid</code> ，测试添加功能</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520100939157.png\" alt=\"image-20220520100939157\"></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520100715109.png\" alt=\"image-20220520100715109\"></p>\n</li>\n<li>\n<p>程序抛出异常，<strong>Field ‘uid’ doesn’t have a default value</strong>，说明 MyBatis-Plus 没有将 <code>uid</code>  作为主键赋值</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520101317761.png\" alt=\"image-20220520101317761\"></p>\n</li>\n</ul>\n<h3 id=\"22解决问题\"><a class=\"markdownIt-Anchor\" href=\"#22解决问题\">#</a> 2.2\t解决问题</h3>\n<hr>\n<blockquote>\n<p><strong>在实体类中 uid 属性上通过 <code>@TableId</code>  将其标识为主键，即可成功执行 SQL 语句</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Date</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@TableId</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long uid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String email;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"23tableid的value属性\"><a class=\"markdownIt-Anchor\" href=\"#23tableid的value属性\">#</a> 2.3\t@TableId 的 value 属性</h3>\n<hr>\n<blockquote>\n<p>若实体类中主键对应的属性为 id，而表中表示主键的字段为 uid，此时若只在属性 id 上添加注解 @TableId，则抛出异常<strong> Unknown column ‘id’ in ‘field list’</strong>，即 MyBatis-Plus 仍然会将 id 作为表的主键操作，而表中表示主键的是字段 uid 此时需要通过 @TableId 注解的 value 属性，指定表中的主键字段， <code>@TableId(&quot;uid&quot;)</code>  或 <code>@TableId(value=&quot;uid&quot;)</code></p>\n</blockquote>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520103030977.png\" alt=\"image-20220520103030977\"></p>\n<h3 id=\"24tableid的type属性\"><a class=\"markdownIt-Anchor\" href=\"#24tableid的type属性\">#</a> 2.4\t@TableId 的 type 属性</h3>\n<hr>\n<blockquote>\n<p><strong>type 属性用来定义主键策略：默认雪花算法</strong></p>\n</blockquote>\n<p><strong>常用的主键策略：</strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">IdType.ASSIGN_ID（默认）</td>\n<td style=\"text-align:center\">基于雪花算法的策略生成数据 id，与数据库 id 是否设置自增无关</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">IdType.AUTO</td>\n<td style=\"text-align:center\">使用数据库的自增策略，注意，该类型请确保数据库设置了 id 自增，</td>\n</tr>\n</tbody>\n</table>\n<p><strong>配置全局主键策略：</strong></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\">#配置mp的主键策略为自增</span></span><br><span class=\"line\">      <span class=\"attr\">id-type:</span> <span class=\"string\">auto</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"3tbalefield\"><a class=\"markdownIt-Anchor\" href=\"#3tbalefield\">#</a> 3.@TbaleField</h2>\n<blockquote>\n<p>经过以上的测试，我们可以发现，MyBatis-Plus 在执行 SQL 语句时，要保证实体类中的属性名和表中的字段名一致</p>\n<p>如果实体类中的属性名和字段名不一致的情况，会出现什么问题呢？</p>\n</blockquote>\n<h3 id=\"31情况一\"><a class=\"markdownIt-Anchor\" href=\"#31情况一\">#</a> 3.1\t情况一</h3>\n<hr>\n<p>若实体类中的属性使用的是驼峰命名风格，而表中的字段使用的是下划线命名风格</p>\n<p>例如实体类属性 <code>userName</code> ，表中字段 <code>user_name</code></p>\n<p>此时 MyBatis-Plus 会自动将下划线命名风格转化为驼峰命名风格</p>\n<p>相当于在 MyBatis 中配置</p>\n<h3 id=\"32情况二\"><a class=\"markdownIt-Anchor\" href=\"#32情况二\">#</a> 3.2\t情况二</h3>\n<hr>\n<blockquote>\n<p>若实体类中的属性和表中的字段不满足情况 1</p>\n<p>例如实体类属性 <code>name</code> ，表中字段 <code>username</code></p>\n<p>此时需要在实体类属性上使用 <code>@TableField(&quot;username&quot;)</code>  设置属性所对应的字段名</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@TableId(&quot;uid&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"meta\">@TableField(&quot;username&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String email;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"4tablelogic\"><a class=\"markdownIt-Anchor\" href=\"#4tablelogic\">#</a> 4.@TableLogic</h2>\n<h3 id=\"41逻辑删除\"><a class=\"markdownIt-Anchor\" href=\"#41逻辑删除\">#</a> 4.1\t逻辑删除</h3>\n<hr>\n<blockquote>\n<p>物理删除：真实删除，将对应数据从数据库中删除，之后查询不到此条被删除的数据</p>\n<p>逻辑删除：假删除，将对应数据中代表是否被删除字段的状态修改为 “被删除状态”，之后在数据库中仍旧能看到此条数据记录</p>\n<p>使用场景：可以进行数据恢复</p>\n</blockquote>\n<h3 id=\"42实现逻辑删除\"><a class=\"markdownIt-Anchor\" href=\"#42实现逻辑删除\">#</a> 4.2\t实现逻辑删除</h3>\n<hr>\n<ul>\n<li>\n<p><strong>数据库中创建逻辑删除状态列，设置默认值为 0</strong></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520134529809.png\" alt=\"image-20220520134529809\"></p>\n</li>\n<li>\n<p><strong>实体类中添加逻辑删除属性</strong></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520134636112.png\" alt=\"image-20220520134636112\"></p>\n</li>\n<li>\n<p><strong>测试删除功能，真正执行的是修改</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testDeleteById</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.deleteById(<span class=\"number\">1527472864163348482L</span>);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520135637388.png\" alt=\"image-20220520135637388\"></p>\n</li>\n<li>\n<p><strong>此时执行查询方法，查询的结果为自动添加条件 <code>is_deleted=0</code> </strong></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520140036445.png\" alt=\"image-20220520140036445\"></p>\n</li>\n</ul>\n<h1 id=\"五-条件构造器\"><a class=\"markdownIt-Anchor\" href=\"#五-条件构造器\">#</a> 五、条件构造器</h1>\n<h2 id=\"1wrapper介绍\"><a class=\"markdownIt-Anchor\" href=\"#1wrapper介绍\">#</a> 1.Wrapper 介绍</h2>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521092812125.png\" alt=\"image-20220521092812125\"></p>\n<ul>\n<li>\n<p><code>Wrapper</code>  ： 条件构造抽象类，最顶端父类</p>\n<ul>\n<li>\n<p><code>AbstractWrapper </code> ： 用于查询条件封装，生成 sql 的 where 条件</p>\n<ul>\n<li>\n<p><code>QueryWrapper </code> ： 查询条件封装</p>\n</li>\n<li>\n<p><code>UpdateWrapper </code> ： Update 条件封装</p>\n</li>\n<li>\n<p><code>AbstractLambdaWrapper </code> ： 使用 Lambda 语法</p>\n<ul>\n<li>\n<p><code>LambdaQueryWrapper </code> ：用于 Lambda 语法使用的查询 Wrapper</p>\n</li>\n<li>\n<p><code>LambdaUpdateWrapper </code> ： Lambda 更新封装 Wrapper</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2querywrapper\"><a class=\"markdownIt-Anchor\" href=\"#2querywrapper\">#</a> 2.QueryWrapper</h2>\n<ul>\n<li>\n<p><strong>组装查询条件</strong></p>\n<blockquote>\n<p>** 执行 SQL：**SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test01</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//查询用户名包含a，年龄在20到30之间，邮箱信息不为null的用户信息</span></span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.like(<span class=\"string\">&quot;username&quot;</span>,<span class=\"string\">&quot;a&quot;</span>).between(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">20</span>,<span class=\"number\">30</span>).isNotNull(<span class=\"string\">&quot;email&quot;</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>组装排序条件</strong></p>\n<blockquote>\n<p>** 执行 SQL：**SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 ORDER BY age DESC,id ASC</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test02</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//查询用户信息，按照年龄的降序排序，若年龄相同，则按照id升序排序</span></span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.orderByDesc(<span class=\"string\">&quot;age&quot;</span>).orderByAsc(<span class=\"string\">&quot;id&quot;</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>组装删除条件</strong></p>\n<blockquote>\n<p>** 执行 SQL：**UPDATE t_user SET is_deleted=1 WHERE is_deleted=0 AND (email IS NULL)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test03</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//删除邮箱地址为null的用户信息</span></span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.isNull(<span class=\"string\">&quot;email&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.delete(queryWrapper);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>条件的优先级</strong></p>\n<blockquote>\n<p>** 执行 SQL：**UPDATE t_user SET user_name=?, email=? WHERE is_deleted=0 AND (age&gt; ? AND user_name LIKE ? OR email IS NULL)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test04</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//将（年龄大于20并且用户名中包含有a）或邮箱为null的用户信息修改</span></span><br><span class=\"line\">    UpdateWrapper&lt;User&gt; updateWrapper = <span class=\"keyword\">new</span> UpdateWrapper&lt;&gt;();</span><br><span class=\"line\">    updateWrapper.gt(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">20</span>).like(<span class=\"string\">&quot;username&quot;</span>,<span class=\"string\">&quot;a&quot;</span>).or().isNull(<span class=\"string\">&quot;email&quot;</span>);</span><br><span class=\"line\">    User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">    user.setName(<span class=\"string\">&quot;Oz&quot;</span>);</span><br><span class=\"line\">    user.setEmail(<span class=\"string\">&quot;test@oz6.com&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.update(user, updateWrapper);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>** 执行 SQL：**UPDATE t_user SET username=?, email=? WHERE is_deleted=0 AND (username LIKE ? AND (age&gt; ? OR email IS NULL))</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test05</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span></span><br><span class=\"line\">    UpdateWrapper&lt;User&gt; updateWrapper = <span class=\"keyword\">new</span> UpdateWrapper&lt;&gt;();</span><br><span class=\"line\">    updateWrapper.like(<span class=\"string\">&quot;username&quot;</span>,<span class=\"string\">&quot;a&quot;</span>).and(i-&gt;i.gt(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">20</span>).or().isNull(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">    User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">    user.setName(<span class=\"string\">&quot;Vz7797&quot;</span>);</span><br><span class=\"line\">    user.setEmail(<span class=\"string\">&quot;test@ss8o.com&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.update(user, updateWrapper);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>组装 select 子句</strong></p>\n<blockquote>\n<p>** 执行 SQL：**SELECT username,age,email FROM t_user WHERE is_deleted=0</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test06</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//查询用户的用户名、年龄、邮箱信息</span></span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.select(<span class=\"string\">&quot;username&quot;</span>,<span class=\"string\">&quot;age&quot;</span>,<span class=\"string\">&quot;email&quot;</span>);</span><br><span class=\"line\">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class=\"line\">    maps.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>实现子查询</strong></p>\n<blockquote>\n<p>** 执行 SQL：**SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (uid IN (select uid from t_user where uid &lt;= 100))</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test07</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//查询id小于等于100的用户信息</span></span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.inSql(<span class=\"string\">&quot;uid&quot;</span>, <span class=\"string\">&quot;select uid from t_user where uid &lt;= 100&quot;</span>);</span><br><span class=\"line\">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    list.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"3updatewrapper\"><a class=\"markdownIt-Anchor\" href=\"#3updatewrapper\">#</a> 3.UpdateWrapper</h2>\n<blockquote>\n<p>UpdateWrapper 不仅拥有 QueryWrapper 的组装条件功能，还提供了 set 方法进行修改对应条件的数据库信息</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test08</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span></span><br><span class=\"line\">    UpdateWrapper&lt;User&gt; updateWrapper = <span class=\"keyword\">new</span> UpdateWrapper&lt;&gt;();</span><br><span class=\"line\">    updateWrapper.like(<span class=\"string\">&quot;username&quot;</span>,<span class=\"string\">&quot;a&quot;</span>).and( i -&gt; i.gt(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">20</span>).or().isNull(<span class=\"string\">&quot;email&quot;</span>)).set(<span class=\"string\">&quot;email&quot;</span>,<span class=\"string\">&quot;svip@qq.com&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.update(<span class=\"keyword\">null</span>, updateWrapper);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"4condition\"><a class=\"markdownIt-Anchor\" href=\"#4condition\">#</a> 4.condition</h2>\n<blockquote>\n<p>在真正开发的过程中，组装条件是常见的功能，而这些条件数据来源于用户输入，是可选的，因此我们在组装这些条件时，必须先判断用户是否选择了这些条件，若选择则需要组装该条件，若没有选择则一定不能组装，以免影响 SQL 执行的结果</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>思路一</strong></p>\n<blockquote>\n<p>** 执行 SQL：**SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age &lt;= ?)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test09</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String username = <span class=\"string\">&quot;a&quot;</span>;</span><br><span class=\"line\">    Integer ageBegin = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    Integer ageEnd = <span class=\"number\">30</span>;</span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(StringUtils.isNotBlank(username))&#123;</span><br><span class=\"line\">        <span class=\"comment\">//isNotBlank判断某个字符创是否不为空字符串、不为null、不为空白符</span></span><br><span class=\"line\">        queryWrapper.like(<span class=\"string\">&quot;user_name&quot;</span>, username);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(ageBegin != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        queryWrapper.ge(<span class=\"string\">&quot;age&quot;</span>, ageBegin);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(ageEnd != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        queryWrapper.le(<span class=\"string\">&quot;age&quot;</span>, ageEnd);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    list.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>思路二</strong></p>\n<blockquote>\n<p>上面的实现方案没有问题，但是代码比较复杂，我们可以使用带 condition 参数的重载方法构建查询条件，简化代码的编写</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test10</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String username = <span class=\"string\">&quot;a&quot;</span>;</span><br><span class=\"line\">    Integer ageBegin = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    Integer ageEnd = <span class=\"number\">30</span>;</span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.like(StringUtils.isNotBlank(username), <span class=\"string\">&quot;user_name&quot;</span>, username)</span><br><span class=\"line\">        .ge(ageBegin != <span class=\"keyword\">null</span>, <span class=\"string\">&quot;age&quot;</span>, ageBegin)</span><br><span class=\"line\">        .le(ageEnd != <span class=\"keyword\">null</span>, <span class=\"string\">&quot;age&quot;</span>, ageEnd);</span><br><span class=\"line\">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    list.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"5lambdaquerywrapper\"><a class=\"markdownIt-Anchor\" href=\"#5lambdaquerywrapper\">#</a> 5.LambdaQueryWrapper</h2>\n<blockquote>\n<p>功能等同于 QueryWrapper，提供了 Lambda 表达式的语法可以避免填错列名。</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test11</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String username = <span class=\"string\">&quot;a&quot;</span>;</span><br><span class=\"line\">    Integer ageBegin = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    Integer ageEnd = <span class=\"number\">30</span>;</span><br><span class=\"line\">    LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> LambdaQueryWrapper&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.like(StringUtils.isNotBlank(username), User::getName, username)</span><br><span class=\"line\">        .ge(ageBegin != <span class=\"keyword\">null</span>, User::getAge, ageBegin)</span><br><span class=\"line\">        .le(ageEnd != <span class=\"keyword\">null</span>, User::getAge, ageEnd);</span><br><span class=\"line\">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    list.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"6lambdaupdatewrapper\"><a class=\"markdownIt-Anchor\" href=\"#6lambdaupdatewrapper\">#</a> 6.LambdaUpdateWrapper</h2>\n<blockquote>\n<p>功能等同于 UpdateWrapper，提供了 Lambda 表达式的语法可以避免填错列名。</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test12</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span></span><br><span class=\"line\">    LambdaUpdateWrapper&lt;User&gt; updateWrapper = <span class=\"keyword\">new</span> LambdaUpdateWrapper&lt;&gt;();</span><br><span class=\"line\">    updateWrapper.like(User::getName, <span class=\"string\">&quot;a&quot;</span>)</span><br><span class=\"line\">        .and(i -&gt; i.gt(User::getAge, <span class=\"number\">20</span>).or().isNull(User::getEmail));</span><br><span class=\"line\">    updateWrapper.set(User::getName, <span class=\"string\">&quot;小黑&quot;</span>).set(User::getEmail,<span class=\"string\">&quot;abc@atguigu.com&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.update(<span class=\"keyword\">null</span>, updateWrapper);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;result：&quot;</span>+result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"六-常用插件\"><a class=\"markdownIt-Anchor\" href=\"#六-常用插件\">#</a> 六、常用插件</h1>\n<h2 id=\"1分页插件\"><a class=\"markdownIt-Anchor\" href=\"#1分页插件\">#</a> 1. 分页插件</h2>\n<blockquote>\n<p>MyBatis Plus 自带分页插件，只要简单的配置即可实现分页功能</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>添加配置类 <code>MyBatisPlusConfig</code> </strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBatisPlusConfig</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MybatisPlusInterceptor <span class=\"title\">mybatisPlusInterceptor</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        MybatisPlusInterceptor interceptor = <span class=\"keyword\">new</span> MybatisPlusInterceptor();</span><br><span class=\"line\">        <span class=\"comment\">//添加分页插件</span></span><br><span class=\"line\">        interceptor.addInnerInterceptor(<span class=\"keyword\">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> interceptor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>编写测试方法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPage</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//new Page()中的两个参数分别是当前页码，每页显示数量</span></span><br><span class=\"line\">    Page&lt;User&gt; page = userMapper.selectPage(<span class=\"keyword\">new</span> Page&lt;&gt;(<span class=\"number\">1</span>, <span class=\"number\">2</span>), <span class=\"keyword\">null</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = page.getRecords();</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"2自定义分页\"><a class=\"markdownIt-Anchor\" href=\"#2自定义分页\">#</a> 2. 自定义分页</h2>\n<blockquote>\n<p>上面调用的是 MyBatis-Plus 提供的带有分页的方法，那么我们自己定义的方法如何实现分页呢？</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>在 <code>UserMapper</code>  接口中定义一个方法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 根据年龄查询用户列表，分页显示 </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param</span> page 分页对象,xml中可以从里面进行取值,传递参数 Page 即自动分页,必须放在第一位 </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param</span> age 年龄 </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@return</span> </span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\">Page&lt;User&gt; <span class=\"title\">selectPageVo</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;page&quot;)</span> Page&lt;User&gt; page,<span class=\"meta\">@Param(&quot;age&quot;)</span> Integer age)</span></span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>在 <code>UserMapper.xml</code>  中编写 SQL 实现该方法</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectPageVo&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">    select id,username as name,age,email from t_user where age &gt; #&#123;age&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>编写测试方法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPageVo</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    Page&lt;User&gt; page = userMapper.selectPageVo(<span class=\"keyword\">new</span> Page&lt;User&gt;(<span class=\"number\">1</span>,<span class=\"number\">2</span>), <span class=\"number\">20</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = page.getRecords();</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"3乐观锁\"><a class=\"markdownIt-Anchor\" href=\"#3乐观锁\">#</a> 3. 乐观锁</h2>\n<blockquote>\n<p><strong>作用：当要更新一条记录的时候，希望这条记录没有被别人更新</strong></p>\n</blockquote>\n<p>乐观锁的实现方式：</p>\n<ul>\n<li>取出记录时，获取当前 version</li>\n<li>更新时，带上这个 version</li>\n<li>执行更新时， set version = newVersion where version = oldVersion</li>\n<li>如果 version 不对，就更新失败</li>\n</ul>\n<h3 id=\"31场景\"><a class=\"markdownIt-Anchor\" href=\"#31场景\">#</a> 3.1\t场景</h3>\n<hr>\n<ul>\n<li>一件商品，成本价是 80 元，售价是 100 元。老板先是通知小李，说你去把商品价格增加 50 元。小李正在玩游戏，耽搁了一个小时。正好一个小时后，老板觉得商品价格增加到 150 元，价格太高，可能会影响销量。又通知小王，你把商品价格降低 30 元。</li>\n<li>此时，小李和小王同时操作商品后台系统。小李操作的时候，系统先取出商品价格 100 元；小王也在操作，取出的商品价格也是 100 元。小李将价格加了 50 元，并将 100+50=150 元存入了数据库；小王将商品减了 30 元，并将 100-30=70 元存入了数据库。是的，如果没有锁，小李的操作就完全被小王的覆盖了。</li>\n<li>现在商品价格是 70 元，比成本价低 10 元。几分钟后，这个商品很快出售了 1 千多件商品，老板亏 1 万多。</li>\n</ul>\n<h3 id=\"32乐观锁与悲观锁\"><a class=\"markdownIt-Anchor\" href=\"#32乐观锁与悲观锁\">#</a> 3.2\t乐观锁与悲观锁</h3>\n<hr>\n<ul>\n<li>上面的故事，如果是乐观锁，小王保存价格前，会检查下价格是否被人修改过了。如果被修改过了，则重新取出的被修改后的价格，150 元，这样他会将 120 元存入数据库。</li>\n<li>如果是悲观锁，小李取出数据后，小王只能等小李操作完之后，才能对价格进行操作，也会保证最终的价格是 120 元。</li>\n</ul>\n<h3 id=\"33模拟修改冲突\"><a class=\"markdownIt-Anchor\" href=\"#33模拟修改冲突\">#</a> 3.3\t模拟修改冲突</h3>\n<hr>\n<ul>\n<li>\n<p><strong>数据库中增加商品表</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t_product ( </span><br><span class=\"line\">    id <span class=\"type\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;主键ID&#x27;</span>, </span><br><span class=\"line\">    NAME <span class=\"type\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;商品名称&#x27;</span>, </span><br><span class=\"line\">    price <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;价格&#x27;</span>, </span><br><span class=\"line\">    VERSION <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;乐观锁版本号&#x27;</span>, </span><br><span class=\"line\">    <span class=\"keyword\">PRIMARY</span> KEY (id) </span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>添加一条数据</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> t_product (id, NAME, price) <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;外星人笔记本&#x27;</span>, <span class=\"number\">100</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>添加一个实体类 <code>Product</code> </strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>添加一个 Mapper 接口 <code>ProductMapper</code> </strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ProductMapper</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">Product</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>测试方法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testProduct01</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1.小李获取商品价格</span></span><br><span class=\"line\">    Product productLi = productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productLi.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2.小王获取商品价格</span></span><br><span class=\"line\">    Product productWang = productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productWang.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3.小李修改商品价格+50</span></span><br><span class=\"line\">    productLi.setPrice(productLi.getPrice()+<span class=\"number\">50</span>);</span><br><span class=\"line\">    productMapper.updateById(productLi);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.小王修改商品价格-30</span></span><br><span class=\"line\">    productWang.setPrice(productWang.getPrice()-<span class=\"number\">30</span>);</span><br><span class=\"line\">    productMapper.updateById(productWang);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.老板查询商品价格</span></span><br><span class=\"line\">    Product productBoss = productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;老板获取的商品价格为：&quot;</span> + productBoss.getPrice());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>执行结果</strong></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521225803162.png\" alt=\"image-20220521225803162\"></p>\n</li>\n</ul>\n<h3 id=\"34乐观锁解决问题\"><a class=\"markdownIt-Anchor\" href=\"#34乐观锁解决问题\">#</a> 3.4\t乐观锁解决问题</h3>\n<hr>\n<ul>\n<li>\n<p><strong>实体类 <code>version</code>  字段添加注解 <code>@Version</code> </strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>添加乐观锁插件配置</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> MybatisPlusInterceptor <span class=\"title\">mybatisPlusInterceptor</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    MybatisPlusInterceptor interceptor = <span class=\"keyword\">new</span> MybatisPlusInterceptor();</span><br><span class=\"line\">    <span class=\"comment\">//添加分页插件</span></span><br><span class=\"line\">    interceptor.addInnerInterceptor(<span class=\"keyword\">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class=\"line\">    <span class=\"comment\">//添加乐观锁插件</span></span><br><span class=\"line\">    interceptor.addInnerInterceptor(<span class=\"keyword\">new</span> OptimisticLockerInnerInterceptor());</span><br><span class=\"line\">    <span class=\"keyword\">return</span> interceptor;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>再次执行测试方法</strong></p>\n<blockquote>\n<p>小李查询商品信息：</p>\n<p>​\tSELECT id,name,price,version FROM t_product WHERE id=?</p>\n<p>小王查询商品信息：</p>\n<p>​\tSELECT id,name,price,version FROM t_product WHERE id=?</p>\n<p>小李修改商品价格，自动将 version+1</p>\n<p>​\tUPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p>\n<p>​\tParameters: 外星人笔记本 (String), 150 (Integer), 1 (Integer), 1 (Long), 0 (Integer)</p>\n<p>小王修改商品价格，此时 version 已更新，条件不成立，修改失败</p>\n<p>​\tUPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p>\n<p>​\tParameters: 外星人笔记本 (String), 70 (Integer), 1 (Integer), 1 (Long), 0 (Integer)</p>\n<p>最终，小王修改失败，查询价格：150</p>\n<p>​\tSELECT id,name,price,version FROM t_product WHERE id=?</p>\n</blockquote>\n</li>\n<li>\n<p><strong>优化执行流程</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testProduct01</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1.小李获取商品价格</span></span><br><span class=\"line\">    Product productLi = productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productLi.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2.小王获取商品价格</span></span><br><span class=\"line\">    Product productWang = productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productWang.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3.小李修改商品价格+50</span></span><br><span class=\"line\">    productLi.setPrice(productLi.getPrice()+<span class=\"number\">50</span>);</span><br><span class=\"line\">    productMapper.updateById(productLi);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.小王修改商品价格-30</span></span><br><span class=\"line\">    productWang.setPrice(productWang.getPrice()-<span class=\"number\">30</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = productMapper.updateById(productWang);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(result == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//操作失败，重试</span></span><br><span class=\"line\">        Product productNew = productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">        productNew.setPrice(productNew.getPrice()-<span class=\"number\">30</span>);</span><br><span class=\"line\">        productMapper.updateById(productNew);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.老板查询商品价格</span></span><br><span class=\"line\">    Product productBoss = productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;老板获取的商品价格为：&quot;</span> + productBoss.getPrice());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521230448577.png\" alt=\"image-20220521230448577\"></p>\n</li>\n</ul>\n<h1 id=\"七-通用枚举\"><a class=\"markdownIt-Anchor\" href=\"#七-通用枚举\">#</a> 七、通用枚举</h1>\n<blockquote>\n<p>表中的有些字段值是固定的，例如性别（男或女），此时我们可以使用 MyBatis-Plus 的通用枚举来实现</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>数据库表添加字段 <code>sex</code> </strong></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521231317777.png\" alt=\"image-20220521231317777\"></p>\n</li>\n<li>\n<p><strong>创建通用枚举类型</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Getter</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">SexEnum</span> </span>&#123;</span><br><span class=\"line\">    MALE(<span class=\"number\">1</span>, <span class=\"string\">&quot;男&quot;</span>),</span><br><span class=\"line\">    FEMALE(<span class=\"number\">2</span>, <span class=\"string\">&quot;女&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@EnumValue</span> <span class=\"comment\">//将注解所标识的属性的值存储到数据库中</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> sex;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sexName;</span><br><span class=\"line\"></span><br><span class=\"line\">    SexEnum(Integer sex, String sexName) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sexName = sexName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>User 实体类中添加属性 sex</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"meta\">@TableField(&quot;username&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String email;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@TableLogic</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> isDeleted;  <span class=\"comment\">//逻辑删除</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> SexEnum sex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>配置扫描通用枚举</strong></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"comment\">#指定mapper文件所在的地址</span></span><br><span class=\"line\">  <span class=\"attr\">mapper-locations:</span> <span class=\"string\">classpath:mapper/*.xml</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">banner:</span> <span class=\"string\">off</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\">#配置mp的主键策略为自增</span></span><br><span class=\"line\">      <span class=\"attr\">id-type:</span> <span class=\"string\">auto</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br><span class=\"line\">  <span class=\"comment\">#配置类型别名所对应的包</span></span><br><span class=\"line\">  <span class=\"attr\">type-aliases-package:</span> <span class=\"string\">com.atguigu.mybatisplus.pojo</span></span><br><span class=\"line\">  <span class=\"comment\"># 扫描通用枚举的包</span></span><br><span class=\"line\">  <span class=\"attr\">type-enums-package:</span> <span class=\"string\">com.atguigu.mybatisplus.enums</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>执行测试方法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">    user.setName(<span class=\"string\">&quot;admin&quot;</span>);</span><br><span class=\"line\">    user.setAge(<span class=\"number\">33</span>);</span><br><span class=\"line\">    user.setSex(SexEnum.MALE);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = userMapper.insert(user);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;result:&quot;</span>+result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"八-多数据源\"><a class=\"markdownIt-Anchor\" href=\"#八-多数据源\">#</a> 八、多数据源</h1>\n<blockquote>\n<p>适用于多种场景：纯粹多库、 读写分离、 一主多从、 混合模式等</p>\n</blockquote>\n<p>场景说明：</p>\n<p>我们创建两个库，分别为： <code>mybatis_plus</code> （以前的库不动）与 <code>mybatis_plus_1</code> （新建），将 mybatis_plus 库的 <code>product</code>  表移动到 mybatis_plus_1 库，这样每个库一张表，通过一个测试用例分别获取用户数据与商品数据，如果获取到说明多库模拟成功</p>\n<h2 id=\"1创建数据库及表\"><a class=\"markdownIt-Anchor\" href=\"#1创建数据库及表\">#</a> 1. 创建数据库及表</h2>\n<ul>\n<li>\n<p><strong>创建数据库 <code>mybatis_plus_1</code>  和表 `product</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE `mybatis_plus_1` <span class=\"comment\">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>;</span><br><span class=\"line\">use `mybatis_plus_1`; </span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> product ( </span><br><span class=\"line\">    id <span class=\"type\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;主键ID&#x27;</span>, </span><br><span class=\"line\">    name <span class=\"type\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;商品名称&#x27;</span>, </span><br><span class=\"line\">    price <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;价格&#x27;</span>, </span><br><span class=\"line\">    version <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;乐观锁版本号&#x27;</span>, </span><br><span class=\"line\">    <span class=\"keyword\">PRIMARY</span> KEY (id) </span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>添加测试数据</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> product (id, NAME, price) <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;外星人笔记本&#x27;</span>, <span class=\"number\">100</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>删除 <code>mybatis_plus</code>  库中的 <code>product</code>  表</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mybatis_plus; </span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> product;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"2新建工程引入依赖\"><a class=\"markdownIt-Anchor\" href=\"#2新建工程引入依赖\">#</a> 2. 新建工程引入依赖</h2>\n<blockquote>\n<p><strong>自行新建一个 Spring Boot 工程并选择 MySQL 驱动及 Lombok 依赖</strong></p>\n</blockquote>\n<p><strong>引入 MyBaits-Plus 的依赖及多数据源的依赖</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"3编写配置文件\"><a class=\"markdownIt-Anchor\" href=\"#3编写配置文件\">#</a> 3. 编写配置文件</h2>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"comment\"># 配置数据源信息</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">dynamic:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置默认的数据源或者数据源组,默认值即为master</span></span><br><span class=\"line\">      <span class=\"attr\">primary:</span> <span class=\"string\">master</span></span><br><span class=\"line\">      <span class=\"comment\"># 严格匹配数据源,默认false.true未匹配到指定数据源时抛异常,false使用默认数据源</span></span><br><span class=\"line\">      <span class=\"attr\">strict:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">datasource:</span></span><br><span class=\"line\">        <span class=\"attr\">master:</span></span><br><span class=\"line\">          <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">          <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">          <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">          <span class=\"attr\">password:</span> <span class=\"number\">132537</span></span><br><span class=\"line\">        <span class=\"attr\">slave_1:</span></span><br><span class=\"line\">          <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/mybatis_plus_1?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">          <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">          <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">          <span class=\"attr\">password:</span> <span class=\"number\">132537</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"4创建实体类\"><a class=\"markdownIt-Anchor\" href=\"#4创建实体类\">#</a> 4. 创建实体类</h2>\n<ul>\n<li>\n<p>新建一个 <code>User</code>  实体类（如果数据库表名有 t_前缀记得配置）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String email;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>新建一个实体类 <code>Product</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"5创建mapper及service\"><a class=\"markdownIt-Anchor\" href=\"#5创建mapper及service\">#</a> 5. 创建 Mapper 及 Service</h2>\n<ul>\n<li>\n<p>新建接口 <code>UserMapper</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">User</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>新建接口 <code>ProductMapper</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ProductMapper</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">Product</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>新建 Service 接口 <code>UserService</code>  指定操作的数据源</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@DS(&quot;master&quot;)</span> <span class=\"comment\">//指定操作的数据源，master为user表</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserService</span> <span class=\"keyword\">extends</span> <span class=\"title\">IService</span>&lt;<span class=\"title\">User</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>新建 Service 接口 <code>ProductService</code>  指定操作的数据源</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@DS(&quot;slave_1&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ProductService</span> <span class=\"keyword\">extends</span> <span class=\"title\">IService</span>&lt;<span class=\"title\">Product</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>自行建立 Service 的实现类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"6编写测试方法\"><a class=\"markdownIt-Anchor\" href=\"#6编写测试方法\">#</a> 6. 编写测试方法</h2>\n<blockquote>\n<p><strong>记得在启动类中添加注解 <code>@MapperScan()</code> </strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestDatasourceApplicationTests</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Resource</span></span><br><span class=\"line\">\tUserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Resource</span></span><br><span class=\"line\">\tProductService productService;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">contextLoads</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tUser user = userService.getById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">\t\tProduct product = productService.getById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;User = &quot;</span> + user);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;Product = &quot;</span> + product);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522113049945.png\" alt=\"image-20220522113049945\"></p>\n<h1 id=\"九-mybatisx插件\"><a class=\"markdownIt-Anchor\" href=\"#九-mybatisx插件\">#</a> 九、MyBatisX 插件</h1>\n<blockquote>\n<p>MyBatis-Plus 为我们提供了强大的 mapper 和 service 模板，能够大大的提高开发效率。</p>\n<p>但是在真正开发过程中，MyBatis-Plus 并不能为我们解决所有问题，例如一些复杂的 SQL，多表联查，我们就需要自己去编写代码和 SQL 语句，我们该如何快速的解决这个问题呢，这个时候可以使用 MyBatisX 插件。</p>\n<p>MyBatisX 一款基于 IDEA 的快速开发插件，为效率而生。</p>\n</blockquote>\n<h2 id=\"1安装mybatisx插件\"><a class=\"markdownIt-Anchor\" href=\"#1安装mybatisx插件\">#</a> 1. 安装 MyBatisX 插件</h2>\n<blockquote>\n<p><strong>打开 IDEA，File-&gt; Setteings-&gt;Plugins-&gt;MyBatisX，搜索栏搜索 MyBatisX 然后安装。</strong></p>\n</blockquote>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522115718361.png\" alt=\"image-20220522115718361\"></p>\n<h2 id=\"2快速生成代码\"><a class=\"markdownIt-Anchor\" href=\"#2快速生成代码\">#</a> 2. 快速生成代码</h2>\n<ul>\n<li>\n<p>新建一个 Spring Boot 项目引入依赖（创建工程时记得勾选 lombok 及 mysql 驱动）</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>配置数据源信息</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.zaxxer.hikari.HikariDataSource</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"number\">132537</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 IDEA 中与数据库建立链接</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522120758740.png\" alt=\"image-20220522120758740\"></p>\n</li>\n<li>\n<p>填写数据库信息并保存</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522121434468.png\" alt=\"image-20220522121434468\"></p>\n</li>\n<li>\n<p>找到我们需要生成的表点击右键</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522121613909.png\" alt=\"image-20220522121613909\"></p>\n</li>\n<li>\n<p>填写完信息以后下一步</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122127649.png\" alt=\"image-20220522122127649\"></p>\n</li>\n<li>\n<p>继续填写信息</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122525598.png\" alt=\"image-20220522122525598\"></p>\n</li>\n<li>\n<p><strong>大功告成（真特么好用 yyds）</strong></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122612334.png\" alt=\"image-20220522122612334\"></p>\n</li>\n</ul>\n<h2 id=\"3快速生成crud\"><a class=\"markdownIt-Anchor\" href=\"#3快速生成crud\">#</a> 3. 快速生成 CRUD</h2>\n<blockquote>\n<p>MyBaitsX 可以根据我们在 Mapper 接口中输入的方法名快速帮我们生成对应的 sql 语句</p>\n</blockquote>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522123143852.png\" alt=\"image-20220522123143852\"></p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522123202310.png\" alt=\"image-20220522123202310\"></p>\n<h1 id=\"十-致谢\"><a class=\"markdownIt-Anchor\" href=\"#十-致谢\">#</a> 十、致谢</h1>\n<p>感谢尚硅谷杨博超老师：<a href=\"https://www.bilibili.com/video/BV12R4y157Be?p=1\">https://www.bilibili.com/video/BV12R4y157Be?p=1</a></p>\n<p>感谢 MyBatis-Plus 作者苞米豆：<a href=\"https://baomidou.com/\">https://baomidou.com/</a></p>\n",
            "tags": [
                "教程",
                "学习"
            ]
        },
        {
            "id": "http://example.com/passages/MyBatis/",
            "url": "http://example.com/passages/MyBatis/",
            "title": "MyBatis笔记",
            "date_published": "2022-08-15T14:26:13.000Z",
            "content_html": "<h1 id=\"mybatis简介\"><a class=\"markdownIt-Anchor\" href=\"#mybatis简介\">#</a> Mybatis 简介</h1>\n<h2 id=\"mybatis历史\"><a class=\"markdownIt-Anchor\" href=\"#mybatis历史\">#</a> MyBatis 历史</h2>\n<ul>\n<li>MyBatis 最初是 Apache 的一个开源项目 iBatis, 2010 年 6 月这个项目由 Apache Software Foundation 迁移到了 Google Code。随着开发团队转投 Google Code 旗下，iBatis3.x 正式更名为 MyBatis。代码于 2013 年 11 月迁移到 Github</li>\n<li>iBatis 一词来源于 “internet” 和 “abatis” 的组合，是一个基于 Java 的持久层框架。iBatis 提供的持久层框架包括 SQL Maps 和 Data Access Objects（DAO）</li>\n</ul>\n<h2 id=\"mybatis特性\"><a class=\"markdownIt-Anchor\" href=\"#mybatis特性\">#</a> MyBatis 特性</h2>\n<ol>\n<li>MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架</li>\n<li>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集</li>\n<li>MyBatis 可以使用简单的 XML 或注解用于配置和原始映射，将接口和 Java 的 POJO（Plain Old Java Objects，普通的 Java 对象）映射成数据库中的记录</li>\n<li>MyBatis 是一个 半自动的 ORM（Object Relation Mapping）框架</li>\n</ol>\n<h2 id=\"mybatis下载\"><a class=\"markdownIt-Anchor\" href=\"#mybatis下载\">#</a> MyBatis 下载</h2>\n<ul>\n<li><a href=\"https://github.com/mybatis/mybatis-3\">MyBatis 下载地址</a></li>\n<li><img src=\"/passages/MyBatis/MyBatis%E4%B8%8B%E8%BD%BD.png\" alt></li>\n</ul>\n<h2 id=\"和其它持久化层技术对比\"><a class=\"markdownIt-Anchor\" href=\"#和其它持久化层技术对比\">#</a> 和其它持久化层技术对比</h2>\n<ul>\n<li>JDBC</li>\n<li>SQL 夹杂在 Java 代码中耦合度高，导致硬编码内伤\n<ul>\n<li>维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见</li>\n<li>代码冗长，开发效率低</li>\n</ul>\n</li>\n<li>Hibernate 和 JPA</li>\n<li>操作简便，开发效率高\n<ul>\n<li>程序中的长难复杂 SQL 需要绕过框架</li>\n<li>内部自动生产的 SQL，不容易做特殊优化</li>\n<li>基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。</li>\n<li>反射操作太多，导致数据库性能下降</li>\n</ul>\n</li>\n<li>MyBatis</li>\n<li>轻量级，性能出色\n<ul>\n<li>SQL 和 Java 编码分开，功能边界清晰。Java 代码专注业务、SQL 语句专注数据</li>\n<li>开发效率稍逊于 HIbernate，但是完全能够接受</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"搭建mybatis\"><a class=\"markdownIt-Anchor\" href=\"#搭建mybatis\">#</a> 搭建 MyBatis</h1>\n<h2 id=\"开发环境\"><a class=\"markdownIt-Anchor\" href=\"#开发环境\">#</a> 开发环境</h2>\n<ul>\n<li>IDE：idea 2019.2</li>\n<li>构建工具：maven 3.5.4</li>\n<li>MySQL 版本：MySQL 5.7</li>\n<li>MyBatis 版本：MyBatis 3.5.7</li>\n</ul>\n<h2 id=\"创建maven工程\"><a class=\"markdownIt-Anchor\" href=\"#创建maven工程\">#</a> 创建 maven 工程</h2>\n<ul>\n<li>\n<p>打包方式：jar</p>\n</li>\n<li>\n<p>引入依赖</p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- Mybatis核心 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.7<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- junit测试 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- MySQL驱动 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>5.1.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"创建mybatis的核心配置文件\"><a class=\"markdownIt-Anchor\" href=\"#创建mybatis的核心配置文件\">#</a> 创建 MyBatis 的核心配置文件</h2>\n<blockquote>\n<p>习惯上命名为 <code>mybatis-config.xml</code> ，这个文件名仅仅只是建议，并非强制要求。将来整合 Spring 之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。<br>\n核心配置文件主要用于配置连接数据库的环境以及 MyBatis 的全局配置信息<br>\n核心配置文件存放的位置是 src/main/resources 目录下</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>  </span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">configuration</span>  </span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>  </span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span>  </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--设置连接数据库的环境--&gt;</span>  </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;development&quot;</span>&gt;</span>  </span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;development&quot;</span>&gt;</span>  </span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;JDBC&quot;</span>/&gt;</span>  </span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;POOLED&quot;</span>&gt;</span>  </span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span>  </span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/MyBatis&quot;</span>/&gt;</span>  </span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span>/&gt;</span>  </span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;123456&quot;</span>/&gt;</span>  </span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span>  </span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span>  </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span>  </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--引入映射文件--&gt;</span>  </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span>  </span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mappers/UserMapper.xml&quot;</span>/&gt;</span>  </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"创建mapper接口\"><a class=\"markdownIt-Anchor\" href=\"#创建mapper接口\">#</a> 创建 mapper 接口</h2>\n<blockquote>\n<p>MyBatis 中的 mapper 接口相当于以前的 dao。但是区别在于，mapper 仅仅是接口，我们不需要提供实现类</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.atguigu.mybatis.mapper;  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;  </span><br><span class=\"line\">\t<span class=\"comment\">/**  </span></span><br><span class=\"line\"><span class=\"comment\">\t* 添加用户信息  </span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span>  </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">insertUser</span><span class=\"params\">()</span></span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建mybatis的映射文件\"><a class=\"markdownIt-Anchor\" href=\"#创建mybatis的映射文件\">#</a> 创建 MyBatis 的映射文件</h2>\n<ul>\n<li>相关概念：ORM（Object Relationship Mapping）对象关系映射。</li>\n<li>对象：Java 的实体类对象\n<ul>\n<li>关系：关系型数据库</li>\n<li>映射：二者之间的对应关系</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Java 概念</th>\n<th>数据库概念</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>类</td>\n<td>表</td>\n</tr>\n<tr>\n<td>属性</td>\n<td>字段 / 列</td>\n</tr>\n<tr>\n<td>对象</td>\n<td>记录 / 行</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>映射文件的命名规则</li>\n<li>表所对应的实体类的类名 + Mapper.xml\n<ul>\n<li>例如：表 t_user，映射的实体类为 User，所对应的映射文件为 UserMapper.xml</li>\n<li>因此一个映射文件对应一个实体类，对应一张表的操作</li>\n<li>MyBatis 映射文件用于编写 SQL，访问以及操作表中的数据</li>\n<li>MyBatis 映射文件存放的位置是 src/main/resources/mappers 目录下</li>\n</ul>\n</li>\n<li>MyBatis 中可以面向接口操作数据，要保证两个一致</li>\n<li>mapper 接口的全类名和映射文件的命名空间（namespace）保持一致\n<ul>\n<li>mapper 接口中方法的方法名和映射文件中编写 SQL 的标签的 id 属性保持一致</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>  </span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span>  </span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>  </span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.atguigu.mybatis.mapper.UserMapper&quot;</span>&gt;</span>  </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--int insertUser();--&gt;</span>  </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insertUser&quot;</span>&gt;</span>  </span><br><span class=\"line\">\t\tinsert into t_user values(null,&#x27;张三&#x27;,&#x27;123&#x27;,23,&#x27;女&#x27;)  </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"通过junit测试功能\"><a class=\"markdownIt-Anchor\" href=\"#通过junit测试功能\">#</a> 通过 junit 测试功能</h2>\n<ul>\n<li>SqlSession：代表 Java 程序和数据库之间的会话。（HttpSession 是 Java 程序和浏览器之间的会话）</li>\n<li>SqlSessionFactory：是 “生产” SqlSession 的 “工厂”</li>\n<li>工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的相关代码封装到一个 “工厂类” 中，以后都使用这个工厂类来 “生产” 我们需要的对象</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserMapperTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testInsertUser</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//读取MyBatis的核心配置文件</span></span><br><span class=\"line\">        InputStream is = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//获取SqlSessionFactoryBuilder对象</span></span><br><span class=\"line\">        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder();</span><br><span class=\"line\">        <span class=\"comment\">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象</span></span><br><span class=\"line\">        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class=\"line\">        <span class=\"comment\">//获取sqlSession，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务</span></span><br><span class=\"line\">        <span class=\"comment\">//SqlSession sqlSession = sqlSessionFactory.openSession();</span></span><br><span class=\"line\">\t    <span class=\"comment\">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交  </span></span><br><span class=\"line\">\t\tSqlSession sqlSession = sqlSessionFactory.openSession(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//通过代理模式创建UserMapper接口的代理实现类对象</span></span><br><span class=\"line\">        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配映射文件中的SQL标签，并执行标签中的SQL语句</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = userMapper.insertUser();</span><br><span class=\"line\">        <span class=\"comment\">//提交事务</span></span><br><span class=\"line\">        <span class=\"comment\">//sqlSession.commit();</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;result:&quot;</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>此时需要手动提交事务，如果要自动提交事务，则在获取 sqlSession 对象时，使用 <code>SqlSession sqlSession = sqlSessionFactory.openSession(true);</code> ，传入一个 Boolean 类型的参数，值为 true，这样就可以自动提交</li>\n</ul>\n<h2 id=\"加入log4j日志功能\"><a class=\"markdownIt-Anchor\" href=\"#加入log4j日志功能\">#</a> 加入 log4j 日志功能</h2>\n<ol>\n<li>\n<p>加入依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- log4j日志 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.17<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>加入 log4j 的配置文件</p>\n<ul>\n<li>log4j 的配置文件名为 log4j.xml，存放的位置是 src/main/resources 目录下</li>\n<li>日志的级别：FATAL (致命)&gt;ERROR (错误)&gt;WARN (警告)&gt;INFO (信息)&gt;DEBUG (调试) 从左到右打印的内容越来越详细</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">log4j</span>:configuration <span class=\"meta-keyword\">SYSTEM</span> <span class=\"meta-string\">&quot;log4j.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">log4j:configuration</span> <span class=\"attr\">xmlns:log4j</span>=<span class=\"string\">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;STDOUT&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Encoding&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">layout</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ConversionPattern&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m (%F:%L) \\n&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">layout</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;java.sql&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">level</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;debug&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">logger</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;org.apache.ibatis&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">level</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;info&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">logger</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">level</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;debug&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"核心配置文件详解\"><a class=\"markdownIt-Anchor\" href=\"#核心配置文件详解\">#</a> 核心配置文件详解</h1>\n<blockquote>\n<p>核心配置文件中的标签必须按照固定的顺序 (有的标签可以不写，但顺序一定不能乱)：<br>\nproperties、settings、typeAliases、typeHandlers、objectFactory、objectWrapperFactory、reflectorFactory、plugins、environments、databaseIdProvider、mappers</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">configuration</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//MyBatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--引入properties文件，此时就可以$&#123;属性名&#125;的方式访问属性值--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;jdbc.properties&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--将表中字段的下划线自动转换为驼峰--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">setting</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mapUnderscoreToCamelCase&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--开启延迟加载--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">setting</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;lazyLoadingEnabled&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        typeAlias：设置某个具体的类型的别名</span></span><br><span class=\"line\"><span class=\"comment\">        属性：</span></span><br><span class=\"line\"><span class=\"comment\">        type：需要设置别名的类型的全类名</span></span><br><span class=\"line\"><span class=\"comment\">        alias：设置此类型的别名，且别名不区分大小写。若不设置此属性，该类型拥有默认的别名，即类名</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&lt;/typeAlias&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot; alias=&quot;user&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;/typeAlias&gt;--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--以包为单位，设置改包下所有的类型都拥有默认的别名，即类名且不区分大小写--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.atguigu.mybatis.bean&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">    environments：设置多个连接数据库的环境</span></span><br><span class=\"line\"><span class=\"comment\">    属性：</span></span><br><span class=\"line\"><span class=\"comment\">\t    default：设置默认使用的环境的id</span></span><br><span class=\"line\"><span class=\"comment\">    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;mysql_test&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        environment：设置具体的连接数据库的环境信息</span></span><br><span class=\"line\"><span class=\"comment\">        属性：</span></span><br><span class=\"line\"><span class=\"comment\">\t        id：设置环境的唯一标识，可通过environments标签中的default设置某一个环境的id，表示默认使用的环境</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;mysql_test&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">            transactionManager：设置事务管理方式</span></span><br><span class=\"line\"><span class=\"comment\">            属性：</span></span><br><span class=\"line\"><span class=\"comment\">\t            type：设置事务管理方式，type=&quot;JDBC|MANAGED&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t            type=&quot;JDBC&quot;：设置当前环境的事务管理都必须手动处理</span></span><br><span class=\"line\"><span class=\"comment\">\t            type=&quot;MANAGED&quot;：设置事务被管理，例如spring中的AOP</span></span><br><span class=\"line\"><span class=\"comment\">            --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">            dataSource：设置数据源</span></span><br><span class=\"line\"><span class=\"comment\">            属性：</span></span><br><span class=\"line\"><span class=\"comment\">\t            type：设置数据源的类型，type=&quot;POOLED|UNPOOLED|JNDI&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t            type=&quot;POOLED&quot;：使用数据库连接池，即会将创建的连接进行缓存，下次使用可以从缓存中直接获取，不需要重新创建</span></span><br><span class=\"line\"><span class=\"comment\">\t            type=&quot;UNPOOLED&quot;：不使用数据库连接池，即每次使用连接都需要重新创建</span></span><br><span class=\"line\"><span class=\"comment\">\t            type=&quot;JNDI&quot;：调用上下文中的数据源</span></span><br><span class=\"line\"><span class=\"comment\">            --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;POOLED&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--设置驱动类的全类名--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--设置连接数据库的连接地址--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--设置连接数据库的用户名--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--设置连接数据库的密码--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--引入映射文件--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;mapper resource=&quot;UserMapper.xml&quot;/&gt; --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        以包为单位，将包下所有的映射文件引入核心配置文件</span></span><br><span class=\"line\"><span class=\"comment\">        注意：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t1. 此方式必须保证mapper接口和mapper映射文件必须在相同的包下</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t2. mapper接口要和mapper映射文件的名字一致</span></span><br><span class=\"line\"><span class=\"comment\">        --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.atguigu.mybatis.mapper&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><img src=\"/passages/MyBatis/mapper%E6%8E%A5%E5%8F%A3%E5%92%8Cmapper%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E5%9C%A8%E5%90%8C%E4%B8%80%E5%8C%85%E4%B8%8B.png\" alt></li>\n</ul>\n<h1 id=\"默认的类型别名\"><a class=\"markdownIt-Anchor\" href=\"#默认的类型别名\">#</a> 默认的类型别名</h1>\n<p><img src=\"/passages/MyBatis/%E9%BB%98%E8%AE%A4%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D1.png\" alt><br>\n<img src=\"/passages/MyBatis/%E9%BB%98%E8%AE%A4%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D2.png\" alt></p>\n<h1 id=\"mybatis的增删改查\"><a class=\"markdownIt-Anchor\" href=\"#mybatis的增删改查\">#</a> MyBatis 的增删改查</h1>\n<ol>\n<li>\n<p>添加</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--int insertUser();--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insertUser&quot;</span>&gt;</span></span><br><span class=\"line\">\tinsert into t_user values(null,&#x27;admin&#x27;,&#x27;123456&#x27;,23,&#x27;男&#x27;,&#x27;12345@qq.com&#x27;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>删除</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--int deleteUser();--&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">delete</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;deleteUser&quot;</span>&gt;</span></span><br><span class=\"line\">     delete from t_user where id = 6</span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>修改</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--int updateUser();--&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">update</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;updateUser&quot;</span>&gt;</span></span><br><span class=\"line\">     update t_user set username = &#x27;张三&#x27; where id = 5</span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">update</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询一个实体类对象</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User getUserById();--&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserById&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span>  </span><br><span class=\"line\">\tselect * from t_user where id = 2  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>查询集合</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;User&gt; getUserList();--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserList&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li>\n<p>注意：</p>\n<ol>\n<li>查询的标签 select 必须设置属性 resultType 或 resultMap，用于设置实体类和数据库表的映射关系\n<ul>\n<li>resultType：自动映射，用于属性名和表中字段名一致的情况</li>\n<li>resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况</li>\n</ul>\n</li>\n<li>当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，否则会抛出异常 TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值</li>\n</ol>\n</li>\n</ul>\n<h1 id=\"mybatis获取参数值的两种方式重点\"><a class=\"markdownIt-Anchor\" href=\"#mybatis获取参数值的两种方式重点\">#</a> MyBatis 获取参数值的两种方式（重点）</h1>\n<ul>\n<li>MyBatis 获取参数值的两种方式：${} 和 #{}</li>\n<li>${} 的本质就是字符串拼接，#{} 的本质就是占位符赋值</li>\n<li>${} 使用字符串拼接的方式拼接 sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引号；但是 #{} 使用占位符赋值的方式拼接 sql，此时为字符串类型或日期类型的字段进行赋值时，可以自动添加单引号</li>\n</ul>\n<h2 id=\"单个字面量类型的参数\"><a class=\"markdownIt-Anchor\" href=\"#单个字面量类型的参数\">#</a> 单个字面量类型的参数</h2>\n<ul>\n<li>若 mapper 接口中的方法参数为单个的字面量类型，此时可以使用 ${} 和 #{} 以任意的名称（最好见名识意）获取参数的值，注意 ${} 需要手动加单引号</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User getUserByUsername(String username);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserByUsername&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user where username = #&#123;username&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User getUserByUsername(String username);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserByUsername&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span>  </span><br><span class=\"line\">\tselect * from t_user where username = &#x27;$&#123;username&#125;&#x27;  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"多个字面量类型的参数\"><a class=\"markdownIt-Anchor\" href=\"#多个字面量类型的参数\">#</a> 多个字面量类型的参数</h2>\n<ul>\n<li>\n<p>若 mapper 接口中的方法参数为多个时，此时 MyBatis 会自动将这些参数放在一个 map 集合中</p>\n<ol>\n<li>以 arg0,arg1… 为键，以参数为值；</li>\n<li>以 param1,param2… 为键，以参数为值；</li>\n</ol>\n</li>\n<li>\n<p>因此只需要通过 ${} 和 #{} 访问 map 集合的键就可以获取相对应的值，注意 ${} 需要手动加单引号。</p>\n</li>\n<li>\n<p>使用 arg 或者 param 都行，要注意的是，arg 是从 arg0 开始的，param 是从 param1 开始的</p>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User checkLogin(String username,String password);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;checkLogin&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span>  </span><br><span class=\"line\">\tselect * from t_user where username = #&#123;arg0&#125; and password = #&#123;arg1&#125;  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User checkLogin(String username,String password);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;checkLogin&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user where username = &#x27;$&#123;param1&#125;&#x27; and password = &#x27;$&#123;param2&#125;&#x27;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"map集合类型的参数\"><a class=\"markdownIt-Anchor\" href=\"#map集合类型的参数\">#</a> map 集合类型的参数</h2>\n<ul>\n<li>若 mapper 接口中的方法需要的参数为多个时，此时可以手动创建 map 集合，将这些数据放在 map 中只需要通过 ${} 和 #{} 访问 map 集合的键就可以获取相对应的值，注意 ${} 需要手动加单引号</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User checkLoginByMap(Map&lt;String,Object&gt; map);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;checkLoginByMap&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user where username = #&#123;username&#125; and password = #&#123;password&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkLoginByMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tParameterMapper mapper = sqlSession.getMapper(ParameterMapper.class);</span><br><span class=\"line\">\tMap&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">\tmap.put(<span class=\"string\">&quot;usermane&quot;</span>,<span class=\"string\">&quot;admin&quot;</span>);</span><br><span class=\"line\">\tmap.put(<span class=\"string\">&quot;password&quot;</span>,<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">\tUser user = mapper.checkLoginByMap(map);</span><br><span class=\"line\">\tSystem.out.println(user);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"实体类类型的参数\"><a class=\"markdownIt-Anchor\" href=\"#实体类类型的参数\">#</a> 实体类类型的参数</h2>\n<ul>\n<li>若 mapper 接口中的方法参数为实体类对象时此时可以使用 ${} 和 #{}，通过访问实体类对象中的属性名获取属性值，注意 ${} 需要手动加单引号</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--int insertUser(User user);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insertUser&quot;</span>&gt;</span></span><br><span class=\"line\">\tinsert into t_user values(null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;sex&#125;,#&#123;email&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">insertUser</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tParameterMapper mapper = sqlSession.getMapper(ParameterMapper.class);</span><br><span class=\"line\">\tUser user = <span class=\"keyword\">new</span> User(<span class=\"keyword\">null</span>,<span class=\"string\">&quot;Tom&quot;</span>,<span class=\"string\">&quot;123456&quot;</span>,<span class=\"number\">12</span>,<span class=\"string\">&quot;男&quot;</span>,<span class=\"string\">&quot;123@321.com&quot;</span>);</span><br><span class=\"line\">\tmapper.insertUser(user);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用param标识参数\"><a class=\"markdownIt-Anchor\" href=\"#使用param标识参数\">#</a> 使用 @Param 标识参数</h2>\n<ul>\n<li>\n<p>可以通过 @Param 注解标识 mapper 接口中的方法参数，此时，会将这些参数放在 map 集合中</p>\n<ol>\n<li>以 @Param 注解的 value 属性值为键，以参数为值；</li>\n<li>以 param1,param2… 为键，以参数为值；</li>\n</ol>\n</li>\n<li>\n<p>只需要通过 ${} 和 #{} 访问 map 集合的键就可以获取相对应的值，注意 ${} 需要手动加单引号</p>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User CheckLoginByParam(@Param(&quot;username&quot;) String username, @Param(&quot;password&quot;) String password);--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;CheckLoginByParam&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from t_user where username = #&#123;username&#125; and password = #&#123;password&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">checkLoginByParam</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tParameterMapper mapper = sqlSession.getMapper(ParameterMapper.class);</span><br><span class=\"line\">\tmapper.CheckLoginByParam(<span class=\"string\">&quot;admin&quot;</span>,<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h2>\n<ul>\n<li>\n<p>建议分成两种情况进行处理</p>\n<ol>\n<li>实体类类型的参数</li>\n<li>使用 @Param 标识参数</li>\n</ol>\n</li>\n</ul>\n<h1 id=\"mybatis的各种查询功能\"><a class=\"markdownIt-Anchor\" href=\"#mybatis的各种查询功能\">#</a> MyBatis 的各种查询功能</h1>\n<ol>\n<li>如果查询出的数据只有一条，可以通过\n<ol>\n<li>实体类对象接收</li>\n<li>List 集合接收</li>\n<li>Map 集合接收，结果 <code>&#123;password=123456, sex=男, id=1, age=23, username=admin&#125;</code></li>\n</ol>\n</li>\n<li>如果查询出的数据有多条，一定不能用实体类对象接收，会抛异常 TooManyResultsException，可以通过\n<ol>\n<li>实体类类型的 LIst 集合接收</li>\n<li>Map 类型的 LIst 集合接收</li>\n<li>在 mapper 接口的方法上添加 @MapKey 注解</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"查询一个实体类对象\"><a class=\"markdownIt-Anchor\" href=\"#查询一个实体类对象\">#</a> 查询一个实体类对象</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据用户id查询用户信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> id</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">User <span class=\"title\">getUserById</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;id&quot;)</span> <span class=\"keyword\">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--User getUserById(@Param(&quot;id&quot;) int id);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserById&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user where id = #&#123;id&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"查询一个list集合\"><a class=\"markdownIt-Anchor\" href=\"#查询一个list集合\">#</a> 查询一个 List 集合</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查询所有用户信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">getUserList</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;User&gt; getUserList();--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserList&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"查询单个数据\"><a class=\"markdownIt-Anchor\" href=\"#查询单个数据\">#</a> 查询单个数据</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**  </span></span><br><span class=\"line\"><span class=\"comment\"> * 查询用户的总记录数  </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span>  </span></span><br><span class=\"line\"><span class=\"comment\"> * 在MyBatis中，对于Java中常用的类型都设置了类型别名  </span></span><br><span class=\"line\"><span class=\"comment\"> * 例如：java.lang.Integer--&gt;int|integer  </span></span><br><span class=\"line\"><span class=\"comment\"> * 例如：int--&gt;_int|_integer  </span></span><br><span class=\"line\"><span class=\"comment\"> * 例如：Map--&gt;map,List--&gt;list  </span></span><br><span class=\"line\"><span class=\"comment\"> */</span>  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getCount</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--int getCount();--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getCount&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;_integer&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect count(id) from t_user</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"查询一条数据为map集合\"><a class=\"markdownIt-Anchor\" href=\"#查询一条数据为map集合\">#</a> 查询一条数据为 map 集合</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**  </span></span><br><span class=\"line\"><span class=\"comment\"> * 根据用户id查询用户信息为map集合  </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> id  </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span>  </span></span><br><span class=\"line\"><span class=\"comment\"> */</span>  </span><br><span class=\"line\"><span class=\"function\">Map&lt;String, Object&gt; <span class=\"title\">getUserToMap</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;id&quot;)</span> <span class=\"keyword\">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserToMap&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;map&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user where id = #&#123;id&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--结果：&#123;password=123456, sex=男, id=1, age=23, username=admin&#125;--&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"查询多条数据为map集合\"><a class=\"markdownIt-Anchor\" href=\"#查询多条数据为map集合\">#</a> 查询多条数据为 map 集合</h2>\n<h3 id=\"方法一\"><a class=\"markdownIt-Anchor\" href=\"#方法一\">#</a> 方法一</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**  </span></span><br><span class=\"line\"><span class=\"comment\"> * 查询所有用户信息为map集合  </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span>  </span></span><br><span class=\"line\"><span class=\"comment\"> * 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，此时可以将这些map放在一个list集合中获取  </span></span><br><span class=\"line\"><span class=\"comment\"> */</span>  </span><br><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; getAllUserToMap();</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllUserToMap&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;map&quot;</span>&gt;</span>  </span><br><span class=\"line\">\tselect * from t_user  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t结果：</span></span><br><span class=\"line\"><span class=\"comment\">\t[&#123;password=123456, sex=男, id=1, age=23, username=admin&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">\t&#123;password=123456, sex=男, id=2, age=23, username=张三&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">\t&#123;password=123456, sex=男, id=3, age=23, username=张三&#125;]</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"方法二\"><a class=\"markdownIt-Anchor\" href=\"#方法二\">#</a> 方法二</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查询所有用户信息为map集合</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> * 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，并且最终要以一个map的方式返回数据，此时需要通过<span class=\"doctag\">@MapKey</span>注解设置map集合的键，值是每条数据所对应的map集合</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@MapKey(&quot;id&quot;)</span></span><br><span class=\"line\"><span class=\"function\">Map&lt;String, Object&gt; <span class=\"title\">getAllUserToMap</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllUserToMap&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;map&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_user</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t结果：</span></span><br><span class=\"line\"><span class=\"comment\">\t&#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t1=&#123;password=123456, sex=男, id=1, age=23, username=admin&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">\t2=&#123;password=123456, sex=男, id=2, age=23, username=张三&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">\t3=&#123;password=123456, sex=男, id=3, age=23, username=张三&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"特殊sql的执行\"><a class=\"markdownIt-Anchor\" href=\"#特殊sql的执行\">#</a> 特殊 SQL 的执行</h1>\n<h2 id=\"模糊查询\"><a class=\"markdownIt-Anchor\" href=\"#模糊查询\">#</a> 模糊查询</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据用户名进行模糊查询</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> username </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/26 21:56</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">getUserByLike</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;username&quot;)</span> String username)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;User&gt; getUserByLike(@Param(&quot;username&quot;) String username);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserByLike&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span>  </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--select * from t_user where username like concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)--&gt;</span>  </span><br><span class=\"line\">\tselect * from t_user where username like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中 <code>select * from t_user where username like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</code>  是最常用的</li>\n</ul>\n<h2 id=\"批量删除\"><a class=\"markdownIt-Anchor\" href=\"#批量删除\">#</a> 批量删除</h2>\n<ul>\n<li>只能使用 ${}，如果使用 #{}，则解析后的 sql 语句为 <code>delete from t_user where id in ('1,2,3')</code> ，这样是将 <code>1,2,3</code>  看做是一个整体，只有 id 为 <code>1,2,3</code>  的数据会被删除。正确的语句应该是 <code>delete from t_user where id in (1,2,3)</code> ，或者 <code>delete from t_user where id in ('1','2','3')</code></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据id批量删除</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> ids </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/26 22:06</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">deleteMore</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;ids&quot;)</span> String ids)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">delete</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;deleteMore&quot;</span>&gt;</span></span><br><span class=\"line\">\tdelete from t_user where id in ($&#123;ids&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//测试类</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteMore</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tSQLMapper mapper = sqlSession.getMapper(SQLMapper.class);</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> result = mapper.deleteMore(<span class=\"string\">&quot;1,2,3,8&quot;</span>);</span><br><span class=\"line\">\tSystem.out.println(result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"动态设置表名\"><a class=\"markdownIt-Anchor\" href=\"#动态设置表名\">#</a> 动态设置表名</h2>\n<ul>\n<li>只能使用 ${}，因为表名不能加单引号</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查询指定表中的数据</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> tableName </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/27 14:41</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">getUserByTable</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;tableName&quot;)</span> String tableName)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;User&gt; getUserByTable(@Param(&quot;tableName&quot;) String tableName);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getUserByTable&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from $&#123;tableName&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"添加功能获取自增的主键\"><a class=\"markdownIt-Anchor\" href=\"#添加功能获取自增的主键\">#</a> 添加功能获取自增的主键</h2>\n<ul>\n<li>\n<p>使用场景</p>\n</li>\n<li>\n<p>t_clazz(clazz_id,clazz_name)</p>\n<ul>\n<li>t_student(student_id,student_name,clazz_id)</li>\n</ul>\n<ol>\n<li>添加班级信息</li>\n<li>获取新添加的班级的 id</li>\n<li>为班级分配学生，即将某学的班级 id 修改为新添加的班级的 id</li>\n</ol>\n</li>\n<li>\n<p>在 mapper.xml 中设置两个属性</p>\n</li>\n<li>\n<p>useGeneratedKeys：设置使用自增的主键</p>\n<ul>\n<li>keyProperty：因为增删改有统一的返回值是受影响的行数，因此只能将获取的自增的主键放在传输的参数 user 对象的某个属性中</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 添加用户信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> user </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/27 15:04</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insertUser</span><span class=\"params\">(User user)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--void insertUser(User user);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insertUser&quot;</span> <span class=\"attr\">useGeneratedKeys</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;id&quot;</span>&gt;</span></span><br><span class=\"line\">\tinsert into t_user values (null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;sex&#125;,#&#123;email&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//测试类</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">insertUser</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tSQLMapper mapper = sqlSession.getMapper(SQLMapper.class);</span><br><span class=\"line\">\tUser user = <span class=\"keyword\">new</span> User(<span class=\"keyword\">null</span>, <span class=\"string\">&quot;ton&quot;</span>, <span class=\"string\">&quot;123&quot;</span>, <span class=\"number\">23</span>, <span class=\"string\">&quot;男&quot;</span>, <span class=\"string\">&quot;123@321.com&quot;</span>);</span><br><span class=\"line\">\tmapper.insertUser(user);</span><br><span class=\"line\">\tSystem.out.println(user);</span><br><span class=\"line\">\t<span class=\"comment\">//输出：user&#123;id=10, username=&#x27;ton&#x27;, password=&#x27;123&#x27;, age=23, sex=&#x27;男&#x27;, email=&#x27;123@321.com&#x27;&#125;，自增主键存放到了user的id属性中</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"自定义映射resultmap\"><a class=\"markdownIt-Anchor\" href=\"#自定义映射resultmap\">#</a> 自定义映射 resultMap</h1>\n<h2 id=\"resultmap处理字段和属性的映射关系\"><a class=\"markdownIt-Anchor\" href=\"#resultmap处理字段和属性的映射关系\">#</a> resultMap 处理字段和属性的映射关系</h2>\n<ul>\n<li>resultMap：设置自定义映射</li>\n<li>属性：\n<ul>\n<li>id：表示自定义映射的唯一标识，不能重复</li>\n<li>type：查询的数据要映射的实体类的类型</li>\n<li>子标签：</li>\n<li>id：设置主键的映射关系\n<ul>\n<li>result：设置普通字段的映射关系</li>\n<li>子标签属性：</li>\n<li>property：设置映射关系中实体类中的属性名\n<ul>\n<li>column：设置映射关系中表中的字段名</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>若字段名和实体类中的属性名不一致，则可以通过 resultMap 设置自定义映射，即使字段名和属性名一致的属性也要映射，也就是全部属性都要列出来</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;empResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;eid&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;eid&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;empName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;emp_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;age&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;age&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;Emp&gt; getAllEmp();--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllEmp&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;empResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用_），实体类中的属性名符合 Java 的规则（使用驼峰）。此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系</p>\n<ol>\n<li>可以通过为字段起别名的方式，保证和实体类中的属性名保持一致 <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;Emp&gt; getAllEmp();--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllEmp&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect eid,emp_name empName,age,sex,email from t_emp</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>可以在 MyBatis 的核心配置文件中的 <code>setting</code>  标签中，设置一个全局配置信息 mapUnderscoreToCamelCase，可以在查询表中数据时，自动将_类型的字段名转换为驼峰，例如：字段名 user_name，设置了 mapUnderscoreToCamelCase，此时字段名就会转换为 userName。<a href=\"#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3\">核心配置文件详解</a> <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">setting</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mapUnderscoreToCamelCase&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"多对一映射处理\"><a class=\"markdownIt-Anchor\" href=\"#多对一映射处理\">#</a> 多对一映射处理</h2>\n<blockquote>\n<p>查询员工信息以及员工所对应的部门信息</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Emp</span> </span>&#123;  </span><br><span class=\"line\">\t<span class=\"keyword\">private</span> Integer eid;  </span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String empName;  </span><br><span class=\"line\">\t<span class=\"keyword\">private</span> Integer age;  </span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String sex;  </span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String email;  </span><br><span class=\"line\">\t<span class=\"keyword\">private</span> Dept dept;</span><br><span class=\"line\">\t<span class=\"comment\">//...构造器、get、set方法等</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"级联方式处理映射关系\"><a class=\"markdownIt-Anchor\" href=\"#级联方式处理映射关系\">#</a> 级联方式处理映射关系</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;empAndDeptResultMapOne&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;eid&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;eid&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;empName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;emp_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;age&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;age&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;dept.did&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;dept.deptName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;dept_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--Emp getEmpAndDept(@Param(&quot;eid&quot;)Integer eid);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpAndDept&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;empAndDeptResultMapOne&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp left join t_dept on t_emp.eid = t_dept.did where t_emp.eid = #&#123;eid&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"使用association处理映射关系\"><a class=\"markdownIt-Anchor\" href=\"#使用association处理映射关系\">#</a> 使用 association 处理映射关系</h3>\n<ul>\n<li>association：处理多对一的映射关系</li>\n<li>property：需要处理多对的映射关系的属性名</li>\n<li>javaType：该属性的类型</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;empAndDeptResultMapTwo&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;eid&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;eid&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;empName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;emp_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;age&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;age&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;dept&quot;</span> <span class=\"attr\">javaType</span>=<span class=\"string\">&quot;Dept&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;did&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;deptName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;dept_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--Emp getEmpAndDept(@Param(&quot;eid&quot;)Integer eid);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpAndDept&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;empAndDeptResultMapTwo&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp left join t_dept on t_emp.eid = t_dept.did where t_emp.eid = #&#123;eid&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"分步查询\"><a class=\"markdownIt-Anchor\" href=\"#分步查询\">#</a> 分步查询</h3>\n<h4 id=\"1-查询员工信息\"><a class=\"markdownIt-Anchor\" href=\"#1-查询员工信息\">#</a> 1. 查询员工信息</h4>\n<ul>\n<li>select：设置分布查询的 sql 的唯一标识（namespace.SQLId 或 mapper 接口的全类名。方法名）</li>\n<li>column：设置分步查询的条件</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//EmpMapper里的方法</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 通过分步查询，员工及所对应的部门信息</span></span><br><span class=\"line\"><span class=\"comment\"> * 分步查询第一步：查询员工信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span>  </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> com.atguigu.mybatis.pojo.Emp</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/27 20:17</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">Emp <span class=\"title\">getEmpAndDeptByStepOne</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;eid&quot;)</span> Integer eid)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;empAndDeptByStepResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;eid&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;eid&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;empName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;emp_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;age&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;age&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;dept&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t <span class=\"attr\">select</span>=<span class=\"string\">&quot;com.atguigu.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t <span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--Emp getEmpAndDeptByStepOne(@Param(&quot;eid&quot;) Integer eid);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpAndDeptByStepOne&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;empAndDeptByStepResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp where eid = #&#123;eid&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"2-查询部门信息\"><a class=\"markdownIt-Anchor\" href=\"#2-查询部门信息\">#</a> 2. 查询部门信息</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//DeptMapper里的方法</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 通过分步查询，员工及所对应的部门信息</span></span><br><span class=\"line\"><span class=\"comment\"> * 分步查询第二步：通过did查询员工对应的部门信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> com.atguigu.mybatis.pojo.Emp</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/27 20:23</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">Dept <span class=\"title\">getEmpAndDeptByStepTwo</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;did&quot;)</span> Integer did)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--此处的resultMap仅是处理字段和属性的映射关系--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;EmpAndDeptByStepTwoResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Dept&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;did&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;deptName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;dept_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--Dept getEmpAndDeptByStepTwo(@Param(&quot;did&quot;) Integer did);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpAndDeptByStepTwo&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;EmpAndDeptByStepTwoResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_dept where did = #&#123;did&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"一对多映射处理\"><a class=\"markdownIt-Anchor\" href=\"#一对多映射处理\">#</a> 一对多映射处理</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dept</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer did;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String deptName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Emp&gt; emps;</span><br><span class=\"line\">\t<span class=\"comment\">//...构造器、get、set方法等</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"collection\"><a class=\"markdownIt-Anchor\" href=\"#collection\">#</a> collection</h3>\n<ul>\n<li>collection：用来处理一对多的映射关系</li>\n<li>ofType：表示该属性对饮的集合中存储的数据的类型</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;DeptAndEmpResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Dept&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;did&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;deptName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;dept_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;emps&quot;</span> <span class=\"attr\">ofType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;eid&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;eid&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;empName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;emp_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;age&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;age&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--Dept getDeptAndEmp(@Param(&quot;did&quot;) Integer did);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getDeptAndEmp&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;DeptAndEmpResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_dept left join t_emp on t_dept.did = t_emp.did where t_dept.did = #&#123;did&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"分步查询-2\"><a class=\"markdownIt-Anchor\" href=\"#分步查询-2\">#</a> 分步查询</h3>\n<h4 id=\"1-查询部门信息\"><a class=\"markdownIt-Anchor\" href=\"#1-查询部门信息\">#</a> 1. 查询部门信息</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 通过分步查询，查询部门及对应的所有员工信息</span></span><br><span class=\"line\"><span class=\"comment\"> * 分步查询第一步：查询部门信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> did </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> com.atguigu.mybatis.pojo.Dept</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/27 22:04</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">Dept <span class=\"title\">getDeptAndEmpByStepOne</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;did&quot;)</span> Integer did)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;DeptAndEmpByStepOneResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Dept&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;did&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;deptName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;dept_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;emps&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t<span class=\"attr\">select</span>=<span class=\"string\">&quot;com.atguigu.mybatis.mapper.EmpMapper.getDeptAndEmpByStepTwo&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t<span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--Dept getDeptAndEmpByStepOne(@Param(&quot;did&quot;) Integer did);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getDeptAndEmpByStepOne&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;DeptAndEmpByStepOneResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_dept where did = #&#123;did&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"2-根据部门id查询部门中的所有员工\"><a class=\"markdownIt-Anchor\" href=\"#2-根据部门id查询部门中的所有员工\">#</a> 2. 根据部门 id 查询部门中的所有员工</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 通过分步查询，查询部门及对应的所有员工信息</span></span><br><span class=\"line\"><span class=\"comment\"> * 分步查询第二步：根据部门id查询部门中的所有员工</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> did</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> java.util.List&lt;com.atguigu.mybatis.pojo.Emp&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/2/27 22:10</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">List&lt;Emp&gt; <span class=\"title\">getDeptAndEmpByStepTwo</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;did&quot;)</span> Integer did)</span></span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;Emp&gt; getDeptAndEmpByStepTwo(@Param(&quot;did&quot;) Integer did);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getDeptAndEmpByStepTwo&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp where did = #&#123;did&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"延迟加载\"><a class=\"markdownIt-Anchor\" href=\"#延迟加载\">#</a> 延迟加载</h2>\n<ul>\n<li>分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息：</li>\n<li>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载\n<ul>\n<li>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。 否则，每个属性会按需加载</li>\n</ul>\n</li>\n<li>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的 sql。此时可通过 association 和 collection 中的 fetchType 属性设置当前的分步查询是否使用延迟加载，fetchType=“lazy (延迟加载)|eager (立即加载)”</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--开启延迟加载--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">setting</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;lazyLoadingEnabled&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getEmpAndDeptByStepOne</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class=\"line\">\tEmp emp = mapper.getEmpAndDeptByStepOne(<span class=\"number\">1</span>);</span><br><span class=\"line\">\tSystem.out.println(emp.getEmpName());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>关闭延迟加载，两条 SQL 语句都运行了<img src=\"/passages/MyBatis/%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E6%B5%8B%E8%AF%951.png\" alt></li>\n<li>开启延迟加载，只运行获取 emp 的 SQL 语句<br>\n<img src=\"/passages/MyBatis/%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E6%B5%8B%E8%AF%952.png\" alt></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getEmpAndDeptByStepOne</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class=\"line\">\tEmp emp = mapper.getEmpAndDeptByStepOne(<span class=\"number\">1</span>);</span><br><span class=\"line\">\tSystem.out.println(emp.getEmpName());</span><br><span class=\"line\">\tSystem.out.println(<span class=\"string\">&quot;----------------&quot;</span>);</span><br><span class=\"line\">\tSystem.out.println(emp.getDept());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>开启后，需要用到查询 dept 的时候才会调用相应的 SQL 语句<img src=\"/passages/MyBatis/%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E6%B5%8B%E8%AF%953.png\" alt></p>\n</li>\n<li>\n<p>fetchType：当开启了全局的延迟加载之后，可以通过该属性手动控制延迟加载的效果，fetchType=“lazy (延迟加载)|eager (立即加载)”</p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;empAndDeptByStepResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;eid&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;eid&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;empName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;emp_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;age&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;age&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;dept&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t <span class=\"attr\">select</span>=<span class=\"string\">&quot;com.atguigu.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t <span class=\"attr\">column</span>=<span class=\"string\">&quot;did&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t <span class=\"attr\">fetchType</span>=<span class=\"string\">&quot;lazy&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"动态sql\"><a class=\"markdownIt-Anchor\" href=\"#动态sql\">#</a> 动态 SQL</h1>\n<ul>\n<li>Mybatis 框架的动态 SQL 技术是一种根据特定条件动态拼装 SQL 语句的功能，它存在的意义是为了解决拼接 SQL 语句字符串时的痛点问题</li>\n</ul>\n<h2 id=\"if\"><a class=\"markdownIt-Anchor\" href=\"#if\">#</a> if</h2>\n<ul>\n<li>if 标签可通过 test 属性（即传递过来的数据）的表达式进行判断，若表达式的结果为 true，则标签中的内容会执行；反之标签中的内容不会执行</li>\n<li>在 where 后面添加一个恒成立条件 <code>1=1</code></li>\n<li>这个恒成立条件并不会影响查询的结果\n<ul>\n<li>这个 <code>1=1</code>  可以用来拼接 <code>and</code>  语句，例如：当 empName 为 null 时</li>\n<li>如果不加上恒成立条件，则 SQL 语句为 <code>select * from t_emp where and age = ? and sex = ? and email = ?</code> ，此时 <code>where</code>  会与 <code>and</code>  连用，SQL 语句会报错\n<ul>\n<li>如果加上一个恒成立条件，则 SQL 语句为 <code>select * from t_emp where 1= 1 and age = ? and sex = ? and email = ?</code> ，此时不报错</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpByCondition&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp where 1=1</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;empName != null and empName !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tand emp_name = #&#123;empName&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;age != null and age !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tand age = #&#123;age&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;sex != null and sex !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tand sex = #&#123;sex&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;email != null and email !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tand email = #&#123;email&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"where\"><a class=\"markdownIt-Anchor\" href=\"#where\">#</a> where</h2>\n<ul>\n<li>where 和 if 一般结合使用：</li>\n<li>若 where 标签中的 if 条件都不满足，则 where 标签没有任何功能，即不会添加 where 关键字\n<ul>\n<li>若 where 标签中的 if 条件满足，则 where 标签会自动添加 where 关键字，并将条件最前方多余的 and/or 去掉</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpByCondition&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;empName != null and empName !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\temp_name = #&#123;empName&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;age != null and age !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\tand age = #&#123;age&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;sex != null and sex !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\tand sex = #&#123;sex&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;email != null and email !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\tand email = #&#123;email&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>注意：where 标签不能去掉条件后多余的 and/or</p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--这种用法是错误的，只能去掉条件前面的and/or，条件后面的不行--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;empName != null and empName !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">emp_name = #&#123;empName&#125; and</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;age != null and age !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\tage = #&#123;age&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"trim\"><a class=\"markdownIt-Anchor\" href=\"#trim\">#</a> trim</h2>\n<ul>\n<li>trim 用于去掉或添加标签中的内容</li>\n<li>常用属性</li>\n<li>prefix：在 trim 标签中的内容的前面添加某些内容\n<ul>\n<li>suffix：在 trim 标签中的内容的后面添加某些内容</li>\n<li>prefixOverrides：在 trim 标签中的内容的前面去掉某些内容</li>\n<li>suffixOverrides：在 trim 标签中的内容的后面去掉某些内容</li>\n</ul>\n</li>\n<li>若 trim 中的标签都不满足条件，则 trim 标签没有任何效果，也就是只剩下 <code>select * from t_emp</code></li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpByCondition&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">trim</span> <span class=\"attr\">prefix</span>=<span class=\"string\">&quot;where&quot;</span> <span class=\"attr\">suffixOverrides</span>=<span class=\"string\">&quot;and|or&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;empName != null and empName !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\temp_name = #&#123;empName&#125; and</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;age != null and age !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\tage = #&#123;age&#125; and</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;sex != null and sex !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\tsex = #&#123;sex&#125; or</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;email != null and email !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\temail = #&#123;email&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">trim</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//测试类</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getEmpByCondition</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tDynamicSQLMapper mapper = sqlSession.getMapper(DynamicSQLMapper.class);</span><br><span class=\"line\">\tList&lt;Emp&gt; emps= mapper.getEmpByCondition(<span class=\"keyword\">new</span> Emp(<span class=\"keyword\">null</span>, <span class=\"string\">&quot;张三&quot;</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>));</span><br><span class=\"line\">\tSystem.out.println(emps);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/passages/MyBatis/trim%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png\" alt></p>\n<h2 id=\"choose-when-otherwise\"><a class=\"markdownIt-Anchor\" href=\"#choose-when-otherwise\">#</a> choose、when、otherwise</h2>\n<ul>\n<li><code>choose、when、otherwise</code>  相当于 <code>if...else if..else</code></li>\n<li>when 至少要有一个，otherwise 至多只有一个</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpByChoose&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect * from t_emp</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">choose</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">when</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\temp_name = #&#123;empName&#125;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">when</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">when</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\tage = #&#123;age&#125;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">when</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">when</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;sex != null and sex != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\tsex = #&#123;sex&#125;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">when</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">when</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;email != null and email != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\temail = #&#123;email&#125;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">when</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">otherwise</span>&gt;</span></span><br><span class=\"line\">\t\t\t\tdid = 1</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">otherwise</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">choose</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getEmpByChoose</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tDynamicSQLMapper mapper = sqlSession.getMapper(DynamicSQLMapper.class);</span><br><span class=\"line\">\tList&lt;Emp&gt; emps = mapper.getEmpByChoose(<span class=\"keyword\">new</span> Emp(<span class=\"keyword\">null</span>, <span class=\"string\">&quot;张三&quot;</span>, <span class=\"number\">23</span>, <span class=\"string\">&quot;男&quot;</span>, <span class=\"string\">&quot;123@qq.com&quot;</span>, <span class=\"keyword\">null</span>));</span><br><span class=\"line\">\tSystem.out.println(emps);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/passages/MyBatis/choose%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png\" alt></p>\n<ul>\n<li>相当于 <code>if a else if b else if c else d</code> ，只会执行其中一个</li>\n</ul>\n<h2 id=\"foreach\"><a class=\"markdownIt-Anchor\" href=\"#foreach\">#</a> foreach</h2>\n<ul>\n<li>\n<p>属性：</p>\n</li>\n<li>\n<p>collection：设置要循环的数组或集合</p>\n<ul>\n<li>item：表示集合或数组中的每一个数据</li>\n<li>separator：设置循环体之间的分隔符，分隔符前后默认有一个空格，如 <code>,</code></li>\n<li>open：设置 foreach 标签中的内容的开始符</li>\n<li>close：设置 foreach 标签中的内容的结束符</li>\n</ul>\n</li>\n<li>\n<p>批量删除</p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--int deleteMoreByArray(Integer[] eids);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">delete</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;deleteMoreByArray&quot;</span>&gt;</span></span><br><span class=\"line\">\tdelete from t_emp where eid in</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">foreach</span> <span class=\"attr\">collection</span>=<span class=\"string\">&quot;eids&quot;</span> <span class=\"attr\">item</span>=<span class=\"string\">&quot;eid&quot;</span> <span class=\"attr\">separator</span>=<span class=\"string\">&quot;,&quot;</span> <span class=\"attr\">open</span>=<span class=\"string\">&quot;(&quot;</span> <span class=\"attr\">close</span>=<span class=\"string\">&quot;)&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t#&#123;eid&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">foreach</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteMoreByArray</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tDynamicSQLMapper mapper = sqlSession.getMapper(DynamicSQLMapper.class);</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> result = mapper.deleteMoreByArray(<span class=\"keyword\">new</span> Integer[]&#123;<span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>&#125;);</span><br><span class=\"line\">\tSystem.out.println(result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><img src=\"/passages/MyBatis/foreach%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C1.png\" alt></p>\n<ul>\n<li>\n<p>批量添加</p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--int insertMoreByList(@Param(&quot;emps&quot;) List&lt;Emp&gt; emps);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insertMoreByList&quot;</span>&gt;</span></span><br><span class=\"line\">\tinsert into t_emp values</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">foreach</span> <span class=\"attr\">collection</span>=<span class=\"string\">&quot;emps&quot;</span> <span class=\"attr\">item</span>=<span class=\"string\">&quot;emp&quot;</span> <span class=\"attr\">separator</span>=<span class=\"string\">&quot;,&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t(null,#&#123;emp.empName&#125;,#&#123;emp.age&#125;,#&#123;emp.sex&#125;,#&#123;emp.email&#125;,null)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">foreach</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>\n  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">insertMoreByList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();</span><br><span class=\"line\">\tDynamicSQLMapper mapper = sqlSession.getMapper(DynamicSQLMapper.class);</span><br><span class=\"line\">\tEmp emp1 = <span class=\"keyword\">new</span> Emp(<span class=\"keyword\">null</span>,<span class=\"string\">&quot;a&quot;</span>,<span class=\"number\">1</span>,<span class=\"string\">&quot;男&quot;</span>,<span class=\"string\">&quot;123@321.com&quot;</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\">\tEmp emp2 = <span class=\"keyword\">new</span> Emp(<span class=\"keyword\">null</span>,<span class=\"string\">&quot;b&quot;</span>,<span class=\"number\">1</span>,<span class=\"string\">&quot;男&quot;</span>,<span class=\"string\">&quot;123@321.com&quot;</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\">\tEmp emp3 = <span class=\"keyword\">new</span> Emp(<span class=\"keyword\">null</span>,<span class=\"string\">&quot;c&quot;</span>,<span class=\"number\">1</span>,<span class=\"string\">&quot;男&quot;</span>,<span class=\"string\">&quot;123@321.com&quot;</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\">\tList&lt;Emp&gt; emps = Arrays.asList(emp1, emp2, emp3);</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> result = mapper.insertMoreByList(emps);</span><br><span class=\"line\">\tSystem.out.println(result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/passages/MyBatis/foreach%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C2.png\" alt></p>\n</li>\n</ul>\n<h2 id=\"sql片段\"><a class=\"markdownIt-Anchor\" href=\"#sql片段\">#</a> SQL 片段</h2>\n<ul>\n<li>sql 片段，可以记录一段公共 sql 片段，在使用的地方通过 include 标签进行引入</li>\n<li>声明 sql 片段： <code>&lt;sql&gt;</code>  标签</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sql</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;empColumns&quot;</span>&gt;</span>eid,emp_name,age,sex,email<span class=\"tag\">&lt;/<span class=\"name\">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>引用 sql 片段： <code>&lt;include&gt;</code>  标签</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getEmpByCondition&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Emp&quot;</span>&gt;</span></span><br><span class=\"line\">\tselect <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">refid</span>=<span class=\"string\">&quot;empColumns&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span> from t_emp</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"mybatis的缓存\"><a class=\"markdownIt-Anchor\" href=\"#mybatis的缓存\">#</a> MyBatis 的缓存</h1>\n<h2 id=\"mybatis的一级缓存\"><a class=\"markdownIt-Anchor\" href=\"#mybatis的一级缓存\">#</a> MyBatis 的一级缓存</h2>\n<ul>\n<li>\n<p>一级缓存是 SqlSession 级别的，通过同一个 SqlSession 查询的数据会被缓存，下次查询相同的数据，就会从缓存中直接获取，不会从数据库重新访问</p>\n</li>\n<li>\n<p>使一级缓存失效的四种情况：</p>\n<ol>\n<li>不同的 SqlSession 对应不同的一级缓存</li>\n<li>同一个 SqlSession 但是查询条件不同</li>\n<li>同一个 SqlSession 两次查询期间执行了任何一次增删改操作</li>\n<li>同一个 SqlSession 两次查询期间手动清空了缓存</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"mybatis的二级缓存\"><a class=\"markdownIt-Anchor\" href=\"#mybatis的二级缓存\">#</a> MyBatis 的二级缓存</h2>\n<ul>\n<li>\n<p>二级缓存是 SqlSessionFactory 级别，通过同一个 SqlSessionFactory 创建的 SqlSession 查询的结果会被缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取</p>\n</li>\n<li>\n<p>二级缓存开启的条件</p>\n<ol>\n<li>在核心配置文件中，设置全局配置属性 cacheEnabled=“true”，默认为 true，不需要设置</li>\n<li>在映射文件中设置标签<cache></cache></li>\n<li>二级缓存必须在 SqlSession 关闭或提交之后有效</li>\n<li>查询的数据所转换的实体类类型必须实现序列化的接口</li>\n</ol>\n</li>\n<li>\n<p>使二级缓存失效的情况：两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</p>\n</li>\n</ul>\n<h2 id=\"二级缓存的相关配置\"><a class=\"markdownIt-Anchor\" href=\"#二级缓存的相关配置\">#</a> 二级缓存的相关配置</h2>\n<ul>\n<li>在 mapper 配置文件中添加的 cache 标签可以设置一些属性</li>\n<li>eviction 属性：缓存回收策略</li>\n<li>LRU（Least Recently Used） – 最近最少使用的：移除最长时间不被使用的对象。\n<ul>\n<li>FIFO（First in First out） – 先进先出：按对象进入缓存的顺序来移除它们。</li>\n<li>SOFT – 软引用：移除基于垃圾回收器状态和软引用规则的对象。</li>\n<li>WEAK – 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。</li>\n<li>默认的是 LRU</li>\n</ul>\n</li>\n<li>flushInterval 属性：刷新间隔，单位毫秒</li>\n<li>默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句（增删改）时刷新</li>\n<li>size 属性：引用数目，正整数</li>\n<li>代表缓存最多可以存储多少个对象，太大容易导致内存溢出</li>\n<li>readOnly 属性：只读，true/false</li>\n<li>true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了很重要的性能优势。\n<ul>\n<li>false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是 false</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"mybatis缓存查询的顺序\"><a class=\"markdownIt-Anchor\" href=\"#mybatis缓存查询的顺序\">#</a> MyBatis 缓存查询的顺序</h2>\n<ul>\n<li>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用</li>\n<li>如果二级缓存没有命中，再查询一级缓存</li>\n<li>如果一级缓存也没有命中，则查询数据库</li>\n<li>SqlSession 关闭之后，一级缓存中的数据会写入二级缓存</li>\n</ul>\n<h2 id=\"整合第三方缓存ehcache了解\"><a class=\"markdownIt-Anchor\" href=\"#整合第三方缓存ehcache了解\">#</a> 整合第三方缓存 EHCache（了解）</h2>\n<h3 id=\"添加依赖\"><a class=\"markdownIt-Anchor\" href=\"#添加依赖\">#</a> 添加依赖</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Mybatis EHCache整合包 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis.caches<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-ehcache<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- slf4j日志门面的一个具体实现 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"各个jar包的功能\"><a class=\"markdownIt-Anchor\" href=\"#各个jar包的功能\">#</a> 各个 jar 包的功能</h3>\n<table>\n<thead>\n<tr>\n<th>jar 包名称</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>mybatis-ehcache</td>\n<td>Mybatis 和 EHCache 的整合包</td>\n</tr>\n<tr>\n<td>ehcache</td>\n<td>EHCache 核心包</td>\n</tr>\n<tr>\n<td>slf4j-api</td>\n<td>SLF4J 日志门面包</td>\n</tr>\n<tr>\n<td>logback-classic</td>\n<td>支持 SLF4J 门面接口的一个具体实现</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"创建ehcache的配置文件ehcachexml\"><a class=\"markdownIt-Anchor\" href=\"#创建ehcache的配置文件ehcachexml\">#</a> 创建 EHCache 的配置文件 ehcache.xml</h3>\n<ul>\n<li>名字必须叫 <code>ehcache.xml</code></li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ehcache</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:noNamespaceSchemaLocation</span>=<span class=\"string\">&quot;../config/ehcache.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 磁盘保存路径 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">diskStore</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;D:\\atguigu\\ehcache&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">defaultCache</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">maxElementsInMemory</span>=<span class=\"string\">&quot;1000&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">maxElementsOnDisk</span>=<span class=\"string\">&quot;10000000&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">eternal</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">overflowToDisk</span>=<span class=\"string\">&quot;true&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">timeToIdleSeconds</span>=<span class=\"string\">&quot;120&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">timeToLiveSeconds</span>=<span class=\"string\">&quot;120&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">diskExpiryThreadIntervalSeconds</span>=<span class=\"string\">&quot;120&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">memoryStoreEvictionPolicy</span>=<span class=\"string\">&quot;LRU&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">defaultCache</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"设置二级缓存的类型\"><a class=\"markdownIt-Anchor\" href=\"#设置二级缓存的类型\">#</a> 设置二级缓存的类型</h3>\n<ul>\n<li>在 xxxMapper.xml 文件中设置二级缓存类型</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">cache</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"加入logback日志\"><a class=\"markdownIt-Anchor\" href=\"#加入logback日志\">#</a> 加入 logback 日志</h3>\n<ul>\n<li>存在 SLF4J 时，作为简易日志的 log4j 将失效，此时我们需要借助 SLF4J 的具体实现 logback 来打印日志。创建 logback 的配置文件 <code>logback.xml</code> ，名字固定，不可改变</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span> <span class=\"attr\">debug</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 指定日志输出的位置 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;STDOUT&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 日志输出的格式 --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 按照顺序分别是：时间、日志级别、线程名称、打印日志的类、日志主体内容、换行 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>[%d&#123;HH:mm:ss.SSS&#125;] [%-5level] [%thread] [%logger] [%msg]%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 设置全局日志级别。日志级别按顺序分别是：DEBUG、INFO、WARN、ERROR --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 指定任何一个日志级别都只打印当前级别和后面级别的日志。 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定打印日志的appender，这里通过“STDOUT”引用了前面配置的appender --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 根据特殊需求指定局部日志级别 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.atguigu.crowd.mapper&quot;</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"ehcache配置文件说明\"><a class=\"markdownIt-Anchor\" href=\"#ehcache配置文件说明\">#</a> EHCache 配置文件说明</h3>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>是否必须</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>maxElementsInMemory</td>\n<td>是</td>\n<td>在内存中缓存的 element 的最大数目</td>\n</tr>\n<tr>\n<td>maxElementsOnDisk</td>\n<td>是</td>\n<td>在磁盘上缓存的 element 的最大数目，若是 0 表示无穷大</td>\n</tr>\n<tr>\n<td>eternal</td>\n<td>是</td>\n<td>设定缓存的 elements 是否永远不过期。 如果为 true，则缓存的数据始终有效， 如果为 false 那么还要根据 timeToIdleSeconds、timeToLiveSeconds 判断</td>\n</tr>\n<tr>\n<td>overflowToDisk</td>\n<td>是</td>\n<td>设定当内存缓存溢出的时候是否将过期的 element 缓存到磁盘上</td>\n</tr>\n<tr>\n<td>timeToIdleSeconds</td>\n<td>否</td>\n<td>当缓存在 EhCache 中的数据前后两次访问的时间超过 timeToIdleSeconds 的属性取值时， 这些数据便会删除，默认值是 0, 也就是可闲置时间无穷大</td>\n</tr>\n<tr>\n<td>timeToLiveSeconds</td>\n<td>否</td>\n<td>缓存 element 的有效生命期，默认是 0., 也就是 element 存活时间无穷大</td>\n</tr>\n<tr>\n<td>diskSpoolBufferSizeMB</td>\n<td>否</td>\n<td>DiskStore (磁盘缓存) 的缓存区大小。默认是 30MB。每个 Cache 都应该有自己的一个缓冲区</td>\n</tr>\n<tr>\n<td>diskPersistent</td>\n<td>否</td>\n<td>在 VM 重启的时候是否启用磁盘保存 EhCache 中的数据，默认是 false</td>\n</tr>\n<tr>\n<td>diskExpiryThreadIntervalSeconds</td>\n<td>否</td>\n<td>磁盘缓存的清理线程运行间隔，默认是 120 秒。每个 120s， 相应的线程会进行一次 EhCache 中数据的清理工作</td>\n</tr>\n<tr>\n<td>memoryStoreEvictionPolicy</td>\n<td>否</td>\n<td>当内存缓存达到最大，有新的 element 加入的时候， 移除缓存中 element 的策略。 默认是 LRU（最近最少使用），可选的有 LFU（最不常使用）和 FIFO（先进先出</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"mybatis的逆向工程\"><a class=\"markdownIt-Anchor\" href=\"#mybatis的逆向工程\">#</a> MyBatis 的逆向工程</h1>\n<ul>\n<li>正向工程：先创建 Java 实体类，由框架负责根据实体类生成数据库表。Hibernate 是支持正向工程的</li>\n<li>逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：</li>\n<li>Java 实体类\n<ul>\n<li>Mapper 接口</li>\n<li>Mapper 映射文件</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"创建逆向工程的步骤\"><a class=\"markdownIt-Anchor\" href=\"#创建逆向工程的步骤\">#</a> 创建逆向工程的步骤</h2>\n<h3 id=\"添加依赖和插件\"><a class=\"markdownIt-Anchor\" href=\"#添加依赖和插件\">#</a> 添加依赖和插件</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- MyBatis核心依赖包 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- junit测试 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.13.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- MySQL驱动 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.27<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- log4j日志 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.17<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 控制Maven在构建过程中相关配置 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- 构建过程中用到的插件 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- 具体插件，逆向工程的操作是以构建过程中插件形式出现的 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis.generator<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.3.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">&lt;!-- 插件的依赖 --&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">&lt;!-- 逆向工程的核心依赖 --&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis.generator<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-generator-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.3.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">&lt;!-- 数据库连接池 --&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.mchange<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>c3p0<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.9.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">&lt;!-- MySQL驱动 --&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.27<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"创建mybatis的核心配置文件-2\"><a class=\"markdownIt-Anchor\" href=\"#创建mybatis的核心配置文件-2\">#</a> 创建 MyBatis 的核心配置文件</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">configuration</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;development&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;development&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;POOLED&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"创建逆向工程的配置文件\"><a class=\"markdownIt-Anchor\" href=\"#创建逆向工程的配置文件\">#</a> 创建逆向工程的配置文件</h3>\n<ul>\n<li>文件名必须是： <code>generatorConfig.xml</code></li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">generatorConfiguration</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">generatorConfiguration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">    targetRuntime: 执行生成的逆向工程的版本</span></span><br><span class=\"line\"><span class=\"comment\">    MyBatis3Simple: 生成基本的CRUD（清新简洁版）</span></span><br><span class=\"line\"><span class=\"comment\">    MyBatis3: 生成带条件的CRUD（奢华尊享版）</span></span><br><span class=\"line\"><span class=\"comment\">    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">context</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;DB2Tables&quot;</span> <span class=\"attr\">targetRuntime</span>=<span class=\"string\">&quot;MyBatis3Simple&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 数据库的连接信息 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">jdbcConnection</span> <span class=\"attr\">driverClass</span>=<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                        <span class=\"attr\">connectionURL</span>=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                        <span class=\"attr\">userId</span>=<span class=\"string\">&quot;root&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                        <span class=\"attr\">password</span>=<span class=\"string\">&quot;123456&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">jdbcConnection</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- javaBean的生成策略--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">javaModelGenerator</span> <span class=\"attr\">targetPackage</span>=<span class=\"string\">&quot;com.atguigu.mybatis.pojo&quot;</span> <span class=\"attr\">targetProject</span>=<span class=\"string\">&quot;.\\src\\main\\java&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;enableSubPackages&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;trimStrings&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">javaModelGenerator</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- SQL映射文件的生成策略 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sqlMapGenerator</span> <span class=\"attr\">targetPackage</span>=<span class=\"string\">&quot;com.atguigu.mybatis.mapper&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                         <span class=\"attr\">targetProject</span>=<span class=\"string\">&quot;.\\src\\main\\resources&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;enableSubPackages&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sqlMapGenerator</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- Mapper接口的生成策略 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">javaClientGenerator</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;XMLMAPPER&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                             <span class=\"attr\">targetPackage</span>=<span class=\"string\">&quot;com.atguigu.mybatis.mapper&quot;</span> <span class=\"attr\">targetProject</span>=<span class=\"string\">&quot;.\\src\\main\\java&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;enableSubPackages&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">javaClientGenerator</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 逆向分析的表 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- tableName设置为*号，可以对应所有表，此时不写domainObjectName --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- domainObjectName属性指定生成出来的实体类的类名 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">tableName</span>=<span class=\"string\">&quot;t_emp&quot;</span> <span class=\"attr\">domainObjectName</span>=<span class=\"string\">&quot;Emp&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">tableName</span>=<span class=\"string\">&quot;t_dept&quot;</span> <span class=\"attr\">domainObjectName</span>=<span class=\"string\">&quot;Dept&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">context</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"执行mbg插件的generate目标\"><a class=\"markdownIt-Anchor\" href=\"#执行mbg插件的generate目标\">#</a> 执行 MBG 插件的 generate 目标</h3>\n<ul>\n<li><img src=\"/passages/MyBatis/%E6%89%A7%E8%A1%8CMBG%E6%8F%92%E4%BB%B6%E7%9A%84generate%E7%9B%AE%E6%A0%87.png\" alt></li>\n<li>如果出现报错： <code>Exception getting JDBC Driver</code> ，可能是 pom.xml 中，数据库驱动配置错误</li>\n<li>dependency 中的驱动<img src=\"/passages/MyBatis/dependency%E4%B8%AD%E7%9A%84%E9%A9%B1%E5%8A%A8.png\" alt>\n<ul>\n<li>mybatis-generator-maven-plugin 插件中的驱动<img src=\"/passages/MyBatis/%E6%8F%92%E4%BB%B6%E4%B8%AD%E7%9A%84%E9%A9%B1%E5%8A%A8.png\" alt></li>\n<li>两者的驱动版本应该相同</li>\n</ul>\n</li>\n<li>执行结果<img src=\"/passages/MyBatis/%E9%80%86%E5%90%91%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C.png\" alt></li>\n</ul>\n<h2 id=\"qbc\"><a class=\"markdownIt-Anchor\" href=\"#qbc\">#</a> QBC</h2>\n<h3 id=\"查询\"><a class=\"markdownIt-Anchor\" href=\"#查询\">#</a> 查询</h3>\n<ul>\n<li><code>selectByExample</code> ：按条件查询，需要传入一个 example 对象或者 null；如果传入一个 null，则表示没有条件，也就是查询所有数据</li>\n<li><code>example.createCriteria().xxx</code> ：创建条件对象，通过 andXXX 方法为 SQL 添加查询添加，每个条件之间是 and 关系</li>\n<li><code>example.or().xxx</code> ：将之前添加的条件通过 or 拼接其他条件<br>\n<img src=\"/passages/MyBatis/example%E7%9A%84%E6%96%B9%E6%B3%95.png\" alt></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testMBG</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\tInputStream is = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">\tSqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder();</span><br><span class=\"line\">\tSqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class=\"line\">\tSqlSession sqlSession = sqlSessionFactory.openSession(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class=\"line\">\tEmpExample example = <span class=\"keyword\">new</span> EmpExample();</span><br><span class=\"line\">\t<span class=\"comment\">//名字为张三，且年龄大于等于20</span></span><br><span class=\"line\">\texample.createCriteria().andEmpNameEqualTo(<span class=\"string\">&quot;张三&quot;</span>).andAgeGreaterThanOrEqualTo(<span class=\"number\">20</span>);</span><br><span class=\"line\">\t<span class=\"comment\">//或者did不为空</span></span><br><span class=\"line\">\texample.or().andDidIsNotNull();</span><br><span class=\"line\">\tList&lt;Emp&gt; emps = mapper.selectByExample(example);</span><br><span class=\"line\">\temps.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/passages/MyBatis/example%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png\" alt></p>\n<h3 id=\"增改\"><a class=\"markdownIt-Anchor\" href=\"#增改\">#</a> 增改</h3>\n<ul>\n<li><code>updateByPrimaryKey</code> ：通过主键进行数据修改，如果某一个值为 null，也会将对应的字段改为 null</li>\n<li><code>mapper.updateByPrimaryKey(new Emp(1,&quot;admin&quot;,22,null,&quot;456@qq.com&quot;,3));</code>\n<ul>\n<li><img src=\"/passages/MyBatis/%E5%A2%9E%E5%88%A0%E6%94%B9%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C1.png\" alt></li>\n</ul>\n</li>\n<li><code>updateByPrimaryKeySelective()</code> ：通过主键进行选择性数据修改，如果某个值为 null，则不修改这个字段</li>\n<li><code>mapper.updateByPrimaryKeySelective(new Emp(2,&quot;admin2&quot;,22,null,&quot;456@qq.com&quot;,3));</code>\n<ul>\n<li><img src=\"/passages/MyBatis/%E5%A2%9E%E5%88%A0%E6%94%B9%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C2.png\" alt></li>\n</ul>\n</li>\n</ul>\n<h1 id=\"分页插件\"><a class=\"markdownIt-Anchor\" href=\"#分页插件\">#</a> 分页插件</h1>\n<h2 id=\"分页插件使用步骤\"><a class=\"markdownIt-Anchor\" href=\"#分页插件使用步骤\">#</a> 分页插件使用步骤</h2>\n<h3 id=\"添加依赖-2\"><a class=\"markdownIt-Anchor\" href=\"#添加依赖-2\">#</a> 添加依赖</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.github.pagehelper<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>pagehelper<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>5.2.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置分页插件\"><a class=\"markdownIt-Anchor\" href=\"#配置分页插件\">#</a> 配置分页插件</h3>\n<ul>\n<li>在 MyBatis 的核心配置文件（mybatis-config.xml）中配置插件</li>\n<li><img src=\"/passages/MyBatis/%E9%85%8D%E7%BD%AE%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6.png\" alt></li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--设置分页插件--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">plugin</span> <span class=\"attr\">interceptor</span>=<span class=\"string\">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"分页插件的使用\"><a class=\"markdownIt-Anchor\" href=\"#分页插件的使用\">#</a> 分页插件的使用</h2>\n<h3 id=\"开启分页功能\"><a class=\"markdownIt-Anchor\" href=\"#开启分页功能\">#</a> 开启分页功能</h3>\n<ul>\n<li>在查询功能之前使用 <code>PageHelper.startPage(int pageNum, int pageSize)</code>  开启分页功能</li>\n<li>pageNum：当前页的页码\n<ul>\n<li>pageSize：每页显示的条数</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPageHelper</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\tInputStream is = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">\tSqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder();</span><br><span class=\"line\">\tSqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class=\"line\">\tSqlSession sqlSession = sqlSessionFactory.openSession(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class=\"line\">\t<span class=\"comment\">//访问第一页，每页四条数据</span></span><br><span class=\"line\">\tPageHelper.startPage(<span class=\"number\">1</span>,<span class=\"number\">4</span>);</span><br><span class=\"line\">\tList&lt;Emp&gt; emps = mapper.selectByExample(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">\temps.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/passages/MyBatis/%E5%88%86%E9%A1%B5%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png\" alt></p>\n<h3 id=\"分页相关数据\"><a class=\"markdownIt-Anchor\" href=\"#分页相关数据\">#</a> 分页相关数据</h3>\n<h4 id=\"方法一直接输出\"><a class=\"markdownIt-Anchor\" href=\"#方法一直接输出\">#</a> 方法一：直接输出</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPageHelper</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\tInputStream is = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">\tSqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder();</span><br><span class=\"line\">\tSqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class=\"line\">\tSqlSession sqlSession = sqlSessionFactory.openSession(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class=\"line\">\t<span class=\"comment\">//访问第一页，每页四条数据</span></span><br><span class=\"line\">\tPage&lt;Object&gt; page = PageHelper.startPage(<span class=\"number\">1</span>, <span class=\"number\">4</span>);</span><br><span class=\"line\">\tList&lt;Emp&gt; emps = mapper.selectByExample(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">\t<span class=\"comment\">//在查询到List集合后，打印分页数据</span></span><br><span class=\"line\">\tSystem.out.println(page);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>分页相关数据：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page&#123;count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=8, pages=2, reasonable=false, pageSizeZero=false&#125;[Emp&#123;eid=1, empName=&#x27;admin&#x27;, age=22, sex=&#x27;男&#x27;, email=&#x27;456@qq.com&#x27;, did=3&#125;, Emp&#123;eid=2, empName=&#x27;admin2&#x27;, age=22, sex=&#x27;男&#x27;, email=&#x27;456@qq.com&#x27;, did=3&#125;, Emp&#123;eid=3, empName=&#x27;王五&#x27;, age=12, sex=&#x27;女&#x27;, email=&#x27;123@qq.com&#x27;, did=3&#125;, Emp&#123;eid=4, empName=&#x27;赵六&#x27;, age=32, sex=&#x27;男&#x27;, email=&#x27;123@qq.com&#x27;, did=1&#125;]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"方法二使用pageinfo\"><a class=\"markdownIt-Anchor\" href=\"#方法二使用pageinfo\">#</a> 方法二使用 PageInfo</h4>\n<ul>\n<li>在查询获取 list 集合之后，使用 <code>PageInfo&lt;T&gt; pageInfo = new PageInfo&lt;&gt;(List&lt;T&gt; list, intnavigatePages)</code>  获取分页相关数据</li>\n<li>list：分页之后的数据\n<ul>\n<li>navigatePages：导航分页的页码数</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPageHelper</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\tInputStream is = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">\tSqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder();</span><br><span class=\"line\">\tSqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class=\"line\">\tSqlSession sqlSession = sqlSessionFactory.openSession(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class=\"line\">\tPageHelper.startPage(<span class=\"number\">1</span>, <span class=\"number\">4</span>);</span><br><span class=\"line\">\tList&lt;Emp&gt; emps = mapper.selectByExample(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">\tPageInfo&lt;Emp&gt; page = <span class=\"keyword\">new</span> PageInfo&lt;&gt;(emps,<span class=\"number\">5</span>);</span><br><span class=\"line\">\tSystem.out.println(page);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>分页相关数据：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PageInfo&#123;</span><br><span class=\"line\">pageNum=1, pageSize=4, size=4, startRow=1, endRow=4, total=8, pages=2, </span><br><span class=\"line\">list=Page&#123;count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=8, pages=2, reasonable=false, pageSizeZero=false&#125;[Emp&#123;eid=1, empName=&#x27;admin&#x27;, age=22, sex=&#x27;男&#x27;, email=&#x27;456@qq.com&#x27;, did=3&#125;, Emp&#123;eid=2, empName=&#x27;admin2&#x27;, age=22, sex=&#x27;男&#x27;, email=&#x27;456@qq.com&#x27;, did=3&#125;, Emp&#123;eid=3, empName=&#x27;王五&#x27;, age=12, sex=&#x27;女&#x27;, email=&#x27;123@qq.com&#x27;, did=3&#125;, Emp&#123;eid=4, empName=&#x27;赵六&#x27;, age=32, sex=&#x27;男&#x27;, email=&#x27;123@qq.com&#x27;, did=1&#125;], </span><br><span class=\"line\">prePage=0, nextPage=2, isFirstPage=true, isLastPage=false, hasPreviousPage=false, hasNextPage=true, navigatePages=5, navigateFirstPage=1, navigateLastPage=2, navigatepageNums=[1, 2]&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>其中 list 中的数据等同于方法一中直接输出的 page 数据</p>\n</li>\n</ul>\n<h4 id=\"常用数据\"><a class=\"markdownIt-Anchor\" href=\"#常用数据\">#</a> 常用数据：</h4>\n<ul>\n<li>pageNum：当前页的页码</li>\n<li>pageSize：每页显示的条数</li>\n<li>size：当前页显示的真实条数</li>\n<li>total：总记录数</li>\n<li>pages：总页数</li>\n<li>prePage：上一页的页码</li>\n<li>nextPage：下一页的页码</li>\n<li>isFirstPage/isLastPage：是否为第一页 / 最后一页</li>\n<li>hasPreviousPage/hasNextPage：是否存在上一页 / 下一页</li>\n<li>navigatePages：导航分页的页码数</li>\n<li>navigatepageNums：导航分页的页码，[1,2,3,4,5]</li>\n</ul>\n",
            "tags": [
                "教程",
                "学习"
            ]
        },
        {
            "id": "http://example.com/passages/C%E8%AF%AD%E8%A8%80%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/",
            "url": "http://example.com/passages/C%E8%AF%AD%E8%A8%80%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/",
            "title": "C语言快速入门",
            "date_published": "2021-10-09T04:31:29.000Z",
            "content_html": "<h1 id=\"序言\"><a class=\"markdownIt-Anchor\" href=\"#序言\">#</a> 序言</h1>\n<p>​        C 语言是一种面向过程的计算机编程语言，多用于嵌入式开发（电路硬件编程）与系统底层编写， 比如我们常用的 Linux 系统，Windows 系统就是主要由 C 语言编写的。同时 c 语言也是最早出现的编程语 言之一，最早在 1972 年就已经被使用，并且直到现在它也是使用率最多的编程语言之一。</p>\n<h2 id=\"计算机的内存\"><a class=\"markdownIt-Anchor\" href=\"#计算机的内存\">#</a> 计算机的内存</h2>\n<p>代码本身存储在计算机的硬盘里，不管计算机开机还是关机，你写的程序的代码都是存在的，但是 一个程序要想运行起来就需要运行在计算机的内存里。</p>\n<p>可以将计算机的内存想象成一个大的空间，这个空间中有各种各样的程序在运行着，并且每个程序 都会占用一定的空间，而所占空间的大小由程序本身所有的一些变量，函数等决定。</p>\n<h2 id=\"什么是编译器\"><a class=\"markdownIt-Anchor\" href=\"#什么是编译器\">#</a> 什么是编译器</h2>\n<p>我们的计算机只能够识别由 0 和 1 的二进制码，因此我们写出来的代码要想运行起来必须经过软件的 编译，将英文的编程语句转换为电脑能够识别的二进制码，不论哪种编程语言，最终都会经过编译转换 为计算机可识别的二进制码。** 将代码转换为二进制机器码的过程就叫做编译，负责进行转换的程序叫做 编译器。** 例如 gcc 编译器 等</p>\n<h2 id=\"ide集成开发环境是什么\"><a class=\"markdownIt-Anchor\" href=\"#ide集成开发环境是什么\">#</a> IDE (集成开发环境) 是什么</h2>\n<p>​        IDE 是 Intergreated Development Environment 的缩写，中文称为集成开发环境，是指辅助程序 员开发的应用软件。</p>\n<p>​        我们已经知道，想要运行一个 C 语言程序必须有编译器，但是在实际开发过程中，除运行程序必须 的编译器之外，我们往往还需要很多其他的辅助工具，比如 语言编辑器、自动建立工具、除错器等等 。这些被打包在一起成为一个开发软件， 统一发布和安装，统称为集成开发环境（IDE）。比如我们使 用的 VS2010，devc++，CLion 等都是 IDE。</p>\n<p><strong>IDE 与编译器的区别</strong></p>\n<p>​       IDE 是编译器与其它各种开发工具的集合体。</p>\n<p><strong>面向过程思想</strong></p>\n<p>​\t\t面向过程是一种以过程为中心的编程思想，其原理就是将问题分解成一个一个详细的步骤，然后通 过函数实现每一个步骤，并依次调用。 面向过程我们所关心的是解决一个问题的步骤，举个例子，汽车发动、汽车熄火，这是两个不同 的事件，对于面向过程而言，我们关心的是事件本身，因此我们会使用两个函数完成以上两个动作，然 后依次调用即可。</p>\n<p>​\t\t再比如 进入游戏，开始游戏，游戏结算，这是三个不同的事件，我们在玩游戏时只会关注这三个事 件，我们可以使用函数来表示这三个不同的动作，依次调用。</p>\n<p>计算机基本快捷键的使用</p>\n<ol>\n<li>ctrl + 空格 /ctrl+shift : 快速切换中英文输入法</li>\n<li>Ctrl-X：剪切所选项并拷贝到剪贴板。</li>\n<li>Ctrl-C：将所选项拷贝到剪贴板。</li>\n<li>Ctrl-V：将剪贴板的内容粘贴到当前文稿或应用中。</li>\n<li>Ctrl-Z：撤销上一个命令。</li>\n<li>Ctrl-A：全选各项。</li>\n<li>Ctrl-S: 保存当前文件</li>\n<li>Ctrl-F：查找文稿中的项目或打开 “查找” 窗口。</li>\n<li>win+R: 唤起 “运行” 对话框，快速运行特定程序</li>\n<li>win+X: 唤起系统菜单</li>\n</ol>\n<h2 id=\"第一个程序hello-world\"><a class=\"markdownIt-Anchor\" href=\"#第一个程序hello-world\">#</a> 第一个程序（Hello World!)</h2>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"comment\">/* 我的第一个 C 程序 */</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Hello, World! \\n&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"程序解析\"><a class=\"markdownIt-Anchor\" href=\"#程序解析\">#</a> 程序解析</h2>\n<p>一个最基础的 C 语言程序由 <strong>预处理器指令，函数，变量，语句和表达式 以及 注释</strong>组成</p>\n<p>接下来我们讲解一下上面这段程序：</p>\n<ol>\n<li>程序的第一行 <strong>#include</strong> 是预处理器指令，告诉 C 编译器在实际编译之前要包含<strong> stdio.h</strong> 文 件，可以将头文件理解为一个工具箱，在我们开始工作前，需要先拿好工具箱才能开始我们的 工作。</li>\n<li>下一行<strong> int main ()</strong> 是主函数，程序从这里开始执行。</li>\n<li>下一行 <strong>/<em>…</em>/</strong> 将会被编译器忽略，不会执行，这里放置程序的注释内容。它们用来告诉读者 这个程序或者这些代码要做什么。</li>\n<li>下一行 **printf (…)** 是 C 中另一个可用的函数，会在屏幕上显示消息 “Hello, World!”。</li>\n<li>下一行 <strong>return 0;</strong> 终止 main () 函数，并返回值 0，表示程序完整地结束。</li>\n</ol>\n<h1 id=\"基本语法\"><a class=\"markdownIt-Anchor\" href=\"#基本语法\">#</a> 基本语法</h1>\n<p>​\t\t分号：在 c 语言中，每个语句之后必须跟一个 <strong>英文分号</strong>表示一个语句的结束</p>\n<p>​\t\t注释：C 语言有两种注释方式，分别是 <strong>//<strong> 和</strong>上文那种</strong>，// 是单行注释，只会将一行标注为注释，而<strong>上文那种</strong>是多行注释。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 单行注释 //</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">多行注释</span></span><br><span class=\"line\"><span class=\"comment\">多行注释</span></span><br><span class=\"line\"><span class=\"comment\">多行注释</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>标识符:</strong></p>\n<p>​\t\tC 标识符内不允许出现标点字符，比如 @、$ 和 %。C 语言是<strong>区分大小写</strong>的编程语言。因此，在 C 中， Manpower 和 manpower 是两个不同的标识符。</p>\n<h1 id=\"数据类型\"><a class=\"markdownIt-Anchor\" href=\"#数据类型\">#</a> 数据类型</h1>\n<h2 id=\"基本类型\"><a class=\"markdownIt-Anchor\" href=\"#基本类型\">#</a> 基本类型</h2>\n<h3 id=\"int整型\"><a class=\"markdownIt-Anchor\" href=\"#int整型\">#</a> <strong>int（整型）</strong></h3>\n<p>​\t\t可以用来声明一个整数变量</p>\n<h3 id=\"short短字节类型\"><a class=\"markdownIt-Anchor\" href=\"#short短字节类型\">#</a> <strong>short（短字节类型）</strong></h3>\n<p>​\t\t可以用来声明短整形（节约内存）</p>\n<h3 id=\"long-int长字节类型\"><a class=\"markdownIt-Anchor\" href=\"#long-int长字节类型\">#</a> <strong>long int（长字节类型）</strong></h3>\n<p>​\t\t当数据的大小超出 int 类型的上限时，可以使用 long int 甚至是 long long int 来扩大取值范围</p>\n<h3 id=\"double和float浮点类型\"><a class=\"markdownIt-Anchor\" href=\"#double和float浮点类型\">#</a> <strong>double 和 float（浮点类型）</strong></h3>\n<p>​\t\tdouble 和 float 用来表示浮点数（小数）</p>\n<p>​\t\t区别：</p>\n<p>​\t\t double 可以存储到小数点后 15 位，float 可以存储到小数点后 6 位</p>\n<h3 id=\"char字符类型\"><a class=\"markdownIt-Anchor\" href=\"#char字符类型\">#</a> <strong>char（字符类型）</strong></h3>\n<p>​\t\tchar 是最小的基本类型，只占 1 个字节的存储空间，主要用来表示字符，例如‘a’,‘b’,‘c’,‘d’等。</p>\n<p>​\t\t 值得注意的是，<strong>char 类型的‘1’和 int 类型的 1 是不一样的</strong>，在实际编写代码时需要注意。</p>\n<h3 id=\"unsigned无符号修饰符\"><a class=\"markdownIt-Anchor\" href=\"#unsigned无符号修饰符\">#</a> <strong>unsigned（无符号）修饰符</strong></h3>\n<p>​\t\tunsigned 可以用来修饰前面的数据类型，例如 unsigned int,unsigned char,unsigned double 等， 被 unsigned 修饰的数据类型其所占的存储空间大小不变，但是最大值会扩大为原来的 2 倍，最小值变为 0. 也就是说，一个数据类型被 unsigned 修饰以后，这个数据类型将变为无符号类型，也就是其不再有负 数值。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> age = <span class=\"number\">20201022</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> year = <span class=\"number\">2020</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> num = <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">short</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">short</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">long</span> <span class=\"keyword\">long</span> <span class=\"keyword\">int</span> num = <span class=\"number\">1234567890</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">double</span> weight = <span class=\"number\">188.5326</span>;</span><br><span class=\"line\"><span class=\"keyword\">float</span> high = <span class=\"number\">100.25</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> <span class=\"keyword\">int</span> a=<span class=\"number\">32767</span>,b=a+<span class=\"number\">1</span>;<span class=\"comment\">//定义短整型无符号</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a=%u\\nb=%u\\n&quot;</span>,a,b);<span class=\"comment\">//以无符号输出</span></span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>相对于 unsigned，还有一个 signed 修饰符，signed 是有符号修饰符，但是我们一般省略他，c 语 言默认的数据类型都是有符号的</strong></p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>储存空间大小</th>\n<th>最小值</th>\n<th>最大值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>char</td>\n<td>（与 signed char 或 unsigned char 相同）</td>\n<td>（与 signed char 或 unsigned char 相同）</td>\n<td>（与 signed char 或 unsigned char 相同）</td>\n</tr>\n<tr>\n<td>unsigned char</td>\n<td>1 个字节</td>\n<td>0</td>\n<td>255</td>\n</tr>\n<tr>\n<td>signed char</td>\n<td>1 个字节</td>\n<td>-128</td>\n<td>127</td>\n</tr>\n<tr>\n<td>int</td>\n<td>2 个或 4 个字节</td>\n<td>-32 768 或 -2 147 483 684</td>\n<td>32 768 或 2 147 483 684</td>\n</tr>\n<tr>\n<td>unsigned int</td>\n<td>2 个或 4 个字节</td>\n<td>0</td>\n<td>65 535 或 4 294 967 295</td>\n</tr>\n<tr>\n<td>short</td>\n<td>2 个字节</td>\n<td>-32 768</td>\n<td>32 767</td>\n</tr>\n<tr>\n<td>unsigned short</td>\n<td>2 个字节</td>\n<td>0</td>\n<td>65 535</td>\n</tr>\n<tr>\n<td>long</td>\n<td>4 个字节</td>\n<td>-2 147 483 648</td>\n<td>2 147 483 647</td>\n</tr>\n<tr>\n<td>unsigned long</td>\n<td>4 个字节</td>\n<td>0</td>\n<td>4 294 967 295</td>\n</tr>\n<tr>\n<td>long long（C99）</td>\n<td>8 个字节</td>\n<td>-9 223 372 036 854 755 808</td>\n<td>9 223 372 036 854 755 808</td>\n</tr>\n<tr>\n<td>unsigned long long（C99）</td>\n<td>8 个字节</td>\n<td>0</td>\n<td>18 446 744 073 709 551 615</td>\n</tr>\n</tbody>\n</table>\n<p>​\t\t<strong>注：int 类型在 16 位系统中占 2 个字节，在 32 和 64 位系统中占 4 个字节</strong></p>\n<h2 id=\"基本类型转换\"><a class=\"markdownIt-Anchor\" href=\"#基本类型转换\">#</a> 基本类型转换</h2>\n<h4 id=\"1自动类型转换\"><a class=\"markdownIt-Anchor\" href=\"#1自动类型转换\">#</a> 1. 自动类型转换</h4>\n<p>当两个不同类型的变量进行运算时，编译器会自动进行类型转换，自动类型转换遵从以下规则：</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2021/10/95b6bbcb25e8bb2f.png\" alt></p>\n<p>例如：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">double</span> b = <span class=\"number\">1.2</span>;</span><br><span class=\"line\"><span class=\"keyword\">double</span> c = a+b;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>,c);</span><br></pre></td></tr></table></figure>\n<p>​\t\t在执行 a+b 运算的时候编译器会先把 int 类型的 a 转为 double 类型，然后再和 b 进行运算</p>\n<h4 id=\"2强制类型转换\"><a class=\"markdownIt-Anchor\" href=\"#2强制类型转换\">#</a> 2. 强制类型转换</h4>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">double</span> a = <span class=\"number\">3.641593</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,(<span class=\"keyword\">int</span>)a ); <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lf\\n&quot;</span>,a );<span class=\"comment\">// 3.641593</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>注：在进行由高到低的强制类型转换时，数据会有部分丢失</strong></p>\n<p><strong>强制类型转换是临时的，不会修改变量本来的类型</strong></p>\n</blockquote>\n<h2 id=\"基本类型书写\"><a class=\"markdownIt-Anchor\" href=\"#基本类型书写\">#</a> 基本类型书写</h2>\n<p><strong>整数</strong></p>\n<ul>\n<li>\n<p>默认为 10 进制 ，10 ，20。</p>\n</li>\n<li>\n<p>以 0 开头为 8 进制，012，024。</p>\n</li>\n<li>\n<p>以 0b 开头为 2 进制，0b1010, 0b10100。</p>\n</li>\n<li>\n<p>以 0x 开头为 16 进制，0xa，0x14。</p>\n</li>\n</ul>\n<p><strong>小数</strong></p>\n<p>单精度常量（float）：2.3f 。</p>\n<p>双精度常量（double）：2.3，默认为双精度。</p>\n<p><strong>字符型常量</strong></p>\n<p>用英文单引号括起来，只保存一个字符，‘a’、‘b’ 、’*’ ，还有转义字符 ‘\\n’ 、’\\t’。</p>\n<p><strong>字符串常量</strong></p>\n<p>用英文的双引号引起来 可以保存多个字符：“abc”。</p>\n<h2 id=\"变量\"><a class=\"markdownIt-Anchor\" href=\"#变量\">#</a> 变量</h2>\n<p>​\t\t变量其实只不过是程序可操作的存储区的名称。C 中每个变量都有特定的类型，类型决定了变量存 储的大小和布局，该范围内的值都可以存储在内存中，运算符可应用于变量上。 例如</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> age = <span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure>\n<p>​\t\t这里的 age 就是一个变量，变量 age 的值为 5，而”age“叫做变量名。</p>\n<p>​\t\t同一类型的多个变量的声明之间可以用逗号隔开</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> i, j, k;</span><br><span class=\"line\"><span class=\"comment\">//声明并定义了变量 i、j 和 k，</span></span><br><span class=\"line\"><span class=\"comment\">//这指示编译器创建类型为 int 的名为 i、j、k 的变量。下面同理</span></span><br><span class=\"line\"><span class=\"keyword\">char</span> c, ch;</span><br><span class=\"line\"><span class=\"keyword\">float</span> f, salary;</span><br><span class=\"line\"><span class=\"keyword\">double</span> d;</span><br></pre></td></tr></table></figure>\n<h3 id=\"变量的输入和输出\"><a class=\"markdownIt-Anchor\" href=\"#变量的输入和输出\">#</a> 变量的输入和输出</h3>\n<p>1.scanf</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 输入char变量：</span></span><br><span class=\"line\"><span class=\"keyword\">char</span> a;</span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%c&quot;</span>,&amp;a);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输入int变量：</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">50</span>;</span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;a);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输入double/float变量：</span></span><br><span class=\"line\"><span class=\"keyword\">double</span> a;</span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%lf&quot;</span>,&amp;a);</span><br><span class=\"line\"><span class=\"keyword\">float</span> a;</span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%f&quot;</span>,&amp;a);</span><br></pre></td></tr></table></figure>\n<p>2.printf</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 输出char变量：</span></span><br><span class=\"line\"><span class=\"keyword\">char</span> a = <span class=\"string\">&#x27;c&#x27;</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%c&quot;</span>,a); <span class=\"comment\">// c</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输出int变量：</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">50</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a); <span class=\"comment\">// 50</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输出double/float变量：</span></span><br><span class=\"line\"><span class=\"keyword\">double</span> a = <span class=\"number\">3.14</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>,a); <span class=\"comment\">// 3.140000 默认保留六位小数</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%.2f&quot;</span>,a);<span class=\"comment\">// 3.14</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%.1f&quot;</span>,a);<span class=\"comment\">// 3.1</span></span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th><strong>符号</strong></th>\n<th><strong>类型</strong></th>\n<th><strong>说明</strong></th>\n<th><strong>示例</strong></th>\n<th>结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>x</td>\n<td>unsigned int</td>\n<td>以十六进制小写输出</td>\n<td>printf(&quot;%x&quot;,11);</td>\n<td>b</td>\n</tr>\n<tr>\n<td>X</td>\n<td>unsigned int</td>\n<td>以十六进制大写输出</td>\n<td>printf(&quot;%X&quot;,11);</td>\n<td>B</td>\n</tr>\n<tr>\n<td>o</td>\n<td>unsigned int</td>\n<td>以八进制无符号整 S 输出</td>\n<td>printf( &quot;%o”,100);</td>\n<td>144</td>\n</tr>\n<tr>\n<td>u</td>\n<td>unsigned int</td>\n<td>以无符号整型输出</td>\n<td>printf( “%u,%u”,100u,100);</td>\n<td>100,100</td>\n</tr>\n<tr>\n<td>d、i</td>\n<td>int</td>\n<td>以整型输出</td>\n<td>printf(&quot;%i,%d&quot;, 100,100);</td>\n<td>100,100</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"常量\"><a class=\"markdownIt-Anchor\" href=\"#常量\">#</a> 常量</h2>\n<p>​\t\t常量是固定值，在程序执行期间不会改变。</p>\n<p>​\t\t常量可以是任何的基本数据类型，比如 int,double,char</p>\n<h3 id=\"常量的定义\"><a class=\"markdownIt-Anchor\" href=\"#常量的定义\">#</a> 常量的定义：</h3>\n<ol>\n<li>\n<p>使用 <strong>#define</strong> 预处理器。</p>\n</li>\n<li>\n<p>使用 <strong>const</strong> 关键字。 <strong>被 const 和 define 修饰的变量不可变</strong></p>\n<p><strong>#define 预处理器</strong></p>\n<p>下面是使用 #define 预处理器定义常量的形式：</p>\n<p>注意：define 定义之后不需要加分号</p>\n</li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"comment\">//模式：</span></span><br><span class=\"line\"><span class=\"comment\">//#define identifier value</span></span><br><span class=\"line\"><span class=\"comment\">//例子：</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> PI 3.1415926</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> R 5</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LENGTH 10</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> WIDTH 5</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> NEWLINE <span class=\"meta-string\">&#x27;\\n&#x27;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> area;</span><br><span class=\"line\">area = LENGTH * WIDTH;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;value of area : %d\\n&quot;</span>, area);</span><br><span class=\"line\"><span class=\"keyword\">double</span> r_area;</span><br><span class=\"line\">r_area = PI * R * R;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;value of double area:%lf\\n&quot;</span>, r_area);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%c&quot;</span>, NEWLINE);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>const 关键字</strong></p>\n<p>​\t\t可以使用 const 前缀声明指定类型的常量，如下所示：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> LENGTH = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> WIDTH = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span> NEWLINE = <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> area;</span><br><span class=\"line\">area = LENGTH * WIDTH;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;value of area : %d&quot;</span>, area);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%c&quot;</span>, NEWLINE);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"运算符\"><a class=\"markdownIt-Anchor\" href=\"#运算符\">#</a> 运算符</h1>\n<h2 id=\"算术运算符\"><a class=\"markdownIt-Anchor\" href=\"#算术运算符\">#</a> 算术运算符</h2>\n<ol>\n<li>\n<p>”+“运算符：把两个数相加</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> c = a + b;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,c); <span class=\"comment\">// c = 7</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>”-“运算符：把两个数相减</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> c = a - b;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,c); <span class=\"comment\">// c = -3</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>“*” 运算符：把两个数相乘</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> c = a * b;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,c); <span class=\"comment\">// c = 10</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>“/” 运算符：把两个数相除，左边是被除数，右边的是除数（右边的数不能为 0）：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> c = a / b;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,c); <span class=\"comment\">// c = 0</span></span><br><span class=\"line\"><span class=\"comment\">/*这里因为a，b，c都是int类型，a/b=0.4,所以会直接舍去后面的.4，只剩0*/</span></span><br><span class=\"line\"><span class=\"keyword\">double</span> d = <span class=\"number\">2.0</span>;</span><br><span class=\"line\"><span class=\"keyword\">double</span> e = <span class=\"number\">3.0</span>;</span><br><span class=\"line\"><span class=\"keyword\">double</span> f = e / d;</span><br><span class=\"line\"><span class=\"comment\">//double类型允许小数的存在，因此这里的f就是1.5了</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>注意：C 语言不会对计算结果进行四舍五入，会直接全部舍去，比如 3.9，转为 int 类型的时候 就会变成 3</p>\n</li>\n<li>\n<p>”%“：取余运算符，可以直接取整除之后的余数：</p>\n</li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> c = b % a;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,c); <span class=\"comment\">// c = 1</span></span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>”++“运算符：自增运算符，让变量的值加 1：</li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> c = a++;<span class=\"comment\">//也可以写成 c = ++a;</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,c); <span class=\"comment\">// c = </span></span><br></pre></td></tr></table></figure>\n<p><strong>a<ins> 与</ins> a 的区别:</strong></p>\n<p>​\t\t在进行 a++ 运算时，程序会先对 a 复制一次，然后让其 + 1，执行的操作类似 a = a + 1</p>\n<p>​\t\t在进行 ++a 运算时，程序会直接让 a+1</p>\n<ol start=\"7\">\n<li>\n<p>“–” 运算符：自减运算符，让变量的值 - 1：</p>\n<p>​\t与 ++ 运算符同理，a–运算会对 a 先复制一次，再让其 - 1，–a 会直接让其 - 1</p>\n</li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,--a);<span class=\"comment\">//输出0</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,b--);<span class=\"comment\">//输出1</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,b);<span class=\"comment\">//输出0</span></span><br></pre></td></tr></table></figure>\n<p><strong>关系运算符</strong></p>\n<ol>\n<li>== 运算符：</li>\n</ol>\n<p>在 c 语言中 ” = “表示的是对一个变量进行赋值，而要想判断两个变量的值是否相同所用到的 是” == “运算符，该运算符返回的是一个真假值（在 c 语言中 1 表示真值，0 表示假值）。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">5</span>,b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a == b);<span class=\"comment\">// 1</span></span><br><span class=\"line\">a = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a == b); <span class=\"comment\">// 0</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>!= 运算符:</li>\n</ol>\n<p>这个运算符表示两个变量是否不同，返回值为真假值：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">5</span>,b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a != b);<span class=\"comment\">// 0</span></span><br><span class=\"line\">a = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a != b); <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>&gt; 运算符：</li>\n</ol>\n<p>判断运算符左边的变量是否大于右边的变量：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">5</span>,b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &gt; b);<span class=\"comment\">// 0</span></span><br><span class=\"line\">a = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &gt; b); <span class=\"comment\">// 1</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>&lt; 运算符：</li>\n</ol>\n<p>判断运算符左边的变量是否小于右边的变量：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">4</span>,b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &lt; b);<span class=\"comment\">// 1</span></span><br><span class=\"line\">a = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &lt; b); <span class=\"comment\">// 0</span></span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>&gt;= 运算符：</li>\n</ol>\n<p>判断运算符左边的变量是否大于等于右边的变量：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">5</span>,b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &gt;= b);<span class=\"comment\">// 1</span></span><br><span class=\"line\">a = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &gt;= b); <span class=\"comment\">// 1 </span></span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>&lt;= 运算符：</li>\n</ol>\n<p>判断运算符左边的变量是否小于等于右边的变量：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">4</span>,b = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &lt; b);<span class=\"comment\">// 1</span></span><br><span class=\"line\">a = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a &lt; b); <span class=\"comment\">// 0</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"逻辑运算符\"><a class=\"markdownIt-Anchor\" href=\"#逻辑运算符\">#</a> 逻辑运算符</h2>\n<ol>\n<li>&amp;&amp; 运算符： 表示 “且”，如果左右两个操作全部为真，则该表达式返回真</li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>,b = <span class=\"number\">3</span>;</span><br><span class=\"line\">(a &lt; b &amp;&amp; a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 1</span></span><br><span class=\"line\">(a &lt; b &amp;&amp; a == <span class=\"number\">3</span>) <span class=\"comment\">// 这个表达式为 0</span></span><br><span class=\"line\">(a &lt; b &amp;&amp; a == <span class=\"number\">3</span>) <span class=\"comment\">// 这个表达式为 0</span></span><br><span class=\"line\">(a &gt; b &amp;&amp; a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 0</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>|| 运算符： 表示 “或”，左右两个操作有一个为真，则该表达式为真</li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>,b = <span class=\"number\">3</span>;</span><br><span class=\"line\">(a &lt; b || a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 1</span></span><br><span class=\"line\">(a &lt; b || a == <span class=\"number\">3</span>) <span class=\"comment\">// 这个表达式为 1</span></span><br><span class=\"line\">(a &gt; b || a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 1</span></span><br><span class=\"line\">(a &gt; b || a == <span class=\"number\">3</span>) <span class=\"comment\">// 这个表达式为 0</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>! 运算符： 表示 “非”，如果修饰的条件表达式为真，则该表达式为假，反之为真。</li>\n</ol>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span>,b = <span class=\"number\">3</span>;</span><br><span class=\"line\">(a &lt; b || a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 1</span></span><br><span class=\"line\">!(a &lt; b || a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 0</span></span><br><span class=\"line\">(a &gt; b &amp;&amp; a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 0</span></span><br><span class=\"line\">!(a &gt; b &amp;&amp; a == <span class=\"number\">2</span>) <span class=\"comment\">// 这个表达式为 1</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"赋值运算符\"><a class=\"markdownIt-Anchor\" href=\"#赋值运算符\">#</a> 赋值运算符</h2>\n<table>\n<thead>\n<tr>\n<th><strong>运算符</strong></th>\n<th>描述</th>\n<th>实例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>=</td>\n<td>简单的赋值运算符，把右边操作数的值赋给左边操作数</td>\n<td>C = A + B 将把 A + B 的 值赋给 C</td>\n</tr>\n<tr>\n<td>+=</td>\n<td>加且赋值运算符，把右边操作数加上左边操作数的结果赋 值给左边操作数</td>\n<td>C += A 相当于 C = C + A</td>\n</tr>\n<tr>\n<td>-=</td>\n<td>减且赋值运算符，把左边操作数减去右边操作数的结果赋 值给左边操作数</td>\n<td>C -= A 相当于 C = C - A</td>\n</tr>\n<tr>\n<td>*=</td>\n<td>乘且赋值运算符，把右边操作数乘以左边操作数的结果赋 值给左边操作数</td>\n<td>C *= A 相当于 C = C * A</td>\n</tr>\n<tr>\n<td>/=</td>\n<td>除且赋值运算符，把左边操作数除以右边操作数的结果赋 值给左边操作数</td>\n<td>C /= A 相当于 C = C / A</td>\n</tr>\n<tr>\n<td>%=</td>\n<td>求模且赋值运算符，求两个操作数的模赋值给左边操作数</td>\n<td>C %= A 相当于 C = C % A</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\">a += <span class=\"number\">3</span>; <span class=\"comment\">// a = a + 3</span></span><br><span class=\"line\">a -= <span class=\"number\">3</span>; <span class=\"comment\">// a = a - 3</span></span><br><span class=\"line\">a *= <span class=\"number\">3</span>; <span class=\"comment\">// a = a * 3</span></span><br><span class=\"line\">a /= <span class=\"number\">3</span>; <span class=\"comment\">// a = a / 3</span></span><br><span class=\"line\">a %= <span class=\"number\">3</span>; <span class=\"comment\">// a = a % 3</span></span><br><span class=\"line\">a = <span class=\"number\">3</span>; <span class=\"comment\">// a = 3</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"判断语句\"><a class=\"markdownIt-Anchor\" href=\"#判断语句\">#</a> 判断语句</h1>\n<p><img src=\"https://static.runoob.com/wp-content/uploads/c/C-decision-20200923-1.svg\" alt></p>\n<p>​\t\t判断结构要求程序员指定一个或多个要评估或测试的条件，以及条件为真时要执行的语句（必需 的）和条件为假时要执行的语句（可选的）。</p>\n<h2 id=\"if-语句\"><a class=\"markdownIt-Anchor\" href=\"#if-语句\">#</a> if 语句</h2>\n<p>​\t模式：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(条件语句)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"comment\">//执行语句</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (a == b)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a = b!&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t一个 if 语句由一个条件语句后跟一个或多个语句组成</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (a == b &amp;&amp; a &gt; <span class=\"number\">0</span> &amp;&amp; b &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a = b!&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"else语句\"><a class=\"markdownIt-Anchor\" href=\"#else语句\">#</a> else 语句</h2>\n<p>​\t当条件不满足 if 中的条件语句时会跳入 else 语句执行</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(布尔表达式/条件语句)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"comment\">/* 如果布尔表达式为真将执行的语句 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"comment\">/* 如果布尔表达式为假将执行的语句 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://static.runoob.com/wp-content/uploads/c/c-if-else-20200923.svg\" alt></p>\n<p>​\t\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">3</span>,b = <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(a &lt; b)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a&lt;b!&quot;</span>);</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a&gt;=b!&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"else-if-语句\"><a class=\"markdownIt-Anchor\" href=\"#else-if-语句\">#</a> else if 语句</h2>\n<p>​\t\t当需要进行多次判断时，可以使用 else if 语句</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(布尔表达式<span class=\"number\">1</span>/条件语句<span class=\"number\">1</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"comment\">/* 如果布尔表达式1为真将执行的语句 */</span></span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(布尔表达式<span class=\"number\">2</span>/条件语句<span class=\"number\">2</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"comment\">/* 如果布尔表达式1为假,布尔表达式2为真将执行的语句 */</span></span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"comment\">/*如果两个布尔表达式都为假要执行的语句*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">3</span>,b = <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(a &lt; b)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a&lt;b!&quot;</span>);</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(a == b)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a=b!&quot;</span>);</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a&gt;b!&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"switch-case-语句\"><a class=\"markdownIt-Anchor\" href=\"#switch-case-语句\">#</a> switch case 语句</h2>\n<p>​\t\t如果需要判断的语句很多的时候，if else 未免显得非常繁琐，因此我们可以使用效率更高，更加精 简的 switch case 语句。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">switch</span>(变量)&#123;<span class=\"keyword\">case</span> 值<span class=\"number\">1</span> :statement(s);<span class=\"comment\">//执行语句break; /* 可选的 */case 值2 :statement(s);//执行语句break; /* 可选的 *//* 可以有任意数量的 case 语句 */default : /* 可选的 如果匹配不成功就会跳到这个标签下面去执行这个标签下面的语句*/statement(s);&#125;</span></span><br></pre></td></tr></table></figure>\n<p>​\t\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> x = <span class=\"number\">5</span>;<span class=\"keyword\">switch</span>(x)&#123;<span class=\"keyword\">case</span> <span class=\"number\">0</span>:<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;x=0&quot;</span>);<span class=\"comment\">//执行语句break; /* 可选的 */case 5:printf(&quot;x=5&quot;);//执行语句break; /* 可选的 *//* 可以有任意数量的 case 语句 */default : /* 可选的 如果匹配不成功就会跳到这个标签下面去执行这个标签下面的语句*/printf(&quot;no pattern&quot;);&#125;</span></span><br></pre></td></tr></table></figure>\n<p><strong>switch</strong> 语句必须遵循下面的规则：</p>\n<ul>\n<li>\n<p>switch 语句中 case 后面是一个常量（不能为浮点数） 在一个 switch 中可以有任意数量的 case 语句。</p>\n</li>\n<li>\n<p>case 后面的常量 必须与 switch 中的变量具有相同的数据类型。</p>\n</li>\n<li>\n<p>当被测试的变量等于 case 中的常量时，case 后跟的语句将被执行，直到遇到 break 语句为 止。</p>\n</li>\n<li>\n<p>当遇到 break 语句时，switch 终止，控制流将跳转到 switch 语句后的下一行。</p>\n</li>\n<li>\n<p>不是每一个 case 都需要包含 break。如果 case 语句不包含 break，控制流将会继续后续的 case，直到遇到 break 为止。</p>\n</li>\n<li>\n<p>一个 switch 语句可以有一个可选的 default，出现在 switch 的结尾。在上面所有的 case 都 不执行时执行。default 中的 break 语句不是必需的。</p>\n<p>​\t示例：</p>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">char</span> grade = <span class=\"string\">&#x27;B&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">switch</span>(grade)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span> :</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;很棒！\\n&quot;</span> );</span><br><span class=\"line\"><span class=\"keyword\">break</span>;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&#x27;B&#x27;</span> :</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&#x27;C&#x27;</span> :</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;做得好\\n&quot;</span> );</span><br><span class=\"line\"><span class=\"keyword\">break</span>;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&#x27;D&#x27;</span> :</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;您通过了\\n&quot;</span> );</span><br><span class=\"line\"><span class=\"keyword\">break</span>;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&#x27;F&#x27;</span> :</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;最好再试一下\\n&quot;</span> );</span><br><span class=\"line\"><span class=\"keyword\">break</span>;</span><br><span class=\"line\"><span class=\"keyword\">default</span> :</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;无效的成绩\\n&quot;</span> );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;成绩是 %c\\n&quot;</span>, grade );</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"循环\"><a class=\"markdownIt-Anchor\" href=\"#循环\">#</a> 循环</h1>\n<p>​\t\t当我们需要重复执行同一块代码时，我们可以使用循环操作来减少代码量。</p>\n<p><img src=\"https://www.runoob.com/wp-content/uploads/2015/12/loop.png\" alt></p>\n<h2 id=\"1while循环\"><a class=\"markdownIt-Anchor\" href=\"#1while循环\">#</a> 1.while 循环</h2>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(条件语句)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">statement(s);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span> (n &lt; <span class=\"number\">10</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d \\n&quot;</span>,n);</span><br><span class=\"line\">++n;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 依次打印出0--9</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://www.runoob.com/wp-content/uploads/2014/09/BFE13459-897C-41A5-AE94-D71B0CA50FB6.jpg\" alt></p>\n<h2 id=\"2for循环\"><a class=\"markdownIt-Anchor\" href=\"#2for循环\">#</a> 2.for 循环</h2>\n<h2 id><a class=\"markdownIt-Anchor\" href=\"#\">#</a> </h2>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> ( init; condition; increment )</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">statement(s);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = <span class=\"number\">0</span>; n &lt; <span class=\"number\">10</span>; ++n)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, n);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//依次打印出从0到9</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://www.runoob.com/wp-content/uploads/2014/09/69978E61-0BA5-4D66-A115-D3AD15B16F47.jpg\" alt></p>\n<h2 id=\"3do\"><a class=\"markdownIt-Anchor\" href=\"#3do\">#</a> <a href=\"http://3.do\">3.do</a>…while 循环：</h2>\n<p>​\t\t不像 <strong>for</strong> 和 while 循环，它们是在循环头部测试循环条件。在 C 语言中，do…while 循环是 在循环的尾部检查它的条件。</p>\n<p>​\t\tdo…while 循环与 while 循环类似，但是 do…while 循环会确保至少执行一次循环。也就是 说，do…while 结构会先执行循环，后进行条件判断。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">statement(s);</span><br><span class=\"line\">&#125;<span class=\"keyword\">while</span>( condition );</span><br></pre></td></tr></table></figure>\n<p>​\t\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,n);</span><br><span class=\"line\">++n;</span><br><span class=\"line\">&#125; <span class=\"keyword\">while</span>(n &lt; <span class=\"number\">0</span>); <span class=\"comment\">// 输出 0</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (n &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,n);</span><br><span class=\"line\">++n;</span><br><span class=\"line\">&#125; <span class=\"comment\">// 无输出</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://www.runoob.com/wp-content/uploads/2014/09/B2FE1EC7-6477-439B-8F50-82D537673799.jpg\" alt></p>\n<h1 id=\"函数\"><a class=\"markdownIt-Anchor\" href=\"#函数\">#</a> 函数</h1>\n<p>​\t\t函数是一组一起执行一个任务的语句。每个 C 程序都至少有一个函数，即主函数 main () ，所有简 单的程序都可以定义其他额外的函数。</p>\n<p>​\t\t定义方法：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">返回类型 函数名(参数)&#123;</span><br><span class=\"line\">函数体</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>** 返回类型：** 一个函数可以返回一个值。指函数返回的值的数据类型。有些函数执行所需的操作而不 返回值，在这种情况下，返回类型是 void。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">max</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(a &gt; b)&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> a;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print_a</span><span class=\"params\">(<span class=\"keyword\">int</span> a)</span></span>&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,a);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"函数声明\"><a class=\"markdownIt-Anchor\" href=\"#函数声明\">#</a> 函数声明</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;stdio.h&gt;</span><br><span class=\"line\">int max(int ,int );</span><br><span class=\"line\">void print_a(int );</span><br><span class=\"line\">int max(int a,int b)&#123;</span><br><span class=\"line\">if(a &gt; b)&#123;</span><br><span class=\"line\">return a;</span><br><span class=\"line\">&#125;else&#123;</span><br><span class=\"line\">return b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">void print_a(int a)&#123;</span><br><span class=\"line\">printf(&quot;%d&quot;,a);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">int main()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">int n = 0,m = 5;</span><br><span class=\"line\">int num = max(n,m);</span><br><span class=\"line\">print_a(num);</span><br><span class=\"line\">return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"数组\"><a class=\"markdownIt-Anchor\" href=\"#数组\">#</a> 数组</h1>\n<p>​\t\t当我们需要声明或使用同一类型的多个变量时，一个个声明未免太过繁琐，我们可以使用数组来达 到这个目的。</p>\n<blockquote>\n<p>数组是一个 <strong>固定大小</strong> 的 <strong>相同类型元素</strong> 的 <strong>顺序集合</strong>。</p>\n</blockquote>\n<p>​\t\t声明方式：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">类型 数组名[数组大小];</span><br></pre></td></tr></table></figure>\n<p>​\t\t示例：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> <span class=\"built_in\">array</span>[<span class=\"number\">10</span>]; <span class=\"comment\">// 声明一个大小为10的int类型数组,它可以存储10个int类型的元素</span></span><br><span class=\"line\"><span class=\"keyword\">double</span> <span class=\"built_in\">array</span>[<span class=\"number\">10</span>]; <span class=\"comment\">// 声明一个大小为10的double类型数组，它可以存储10个double类型的元素</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"初始化数组\"><a class=\"markdownIt-Anchor\" href=\"#初始化数组\">#</a> 初始化数组</h2>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> <span class=\"built_in\">array</span>[<span class=\"number\">5</span>] = &#123;<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>注意： 大括号 {} 之间的值的数目不能大于我们在数组声明时在方括号 [] 中指定的元素数目。</strong></p>\n<p>​\t\t有时我们会开一个超级大的数组，这时使用大括号来进行初始化就非常麻烦了，因此我们结合之前 的循环操作来对数组进行初始化</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> <span class=\"built_in\">array</span>[<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span> ; i &lt; <span class=\"number\">5</span> ; i++)&#123;</span><br><span class=\"line\"><span class=\"built_in\">array</span>[i] = i+<span class=\"number\">100</span>; <span class=\"comment\">// 设置元素i的值为i+100</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>访问数组元素</strong></p>\n<p>​\t\t数组元素可以通过数组名称加索引进行访问。元素的索引是放在方括号内，跟在数组名称的后边。 例如：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> <span class=\"built_in\">array</span>[<span class=\"number\">5</span>] = &#123;<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">int</span> num = <span class=\"built_in\">array</span>[<span class=\"number\">0</span>]; <span class=\"comment\">// num = 0;</span></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;num = %d\\n&quot;</span>,num);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">5</span>; j++ )<span class=\"comment\">//利用循环打印整个数组</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Array[%d] = %d\\n&quot;</span>, j, <span class=\"built_in\">array</span>[j] );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>注意：数组元素只被创建而没有被初始化的时候是不能进行正常访问的，只有数组中元素被赋值才 可以正常访问。</strong></p>\n<h1 id=\"指针\"><a class=\"markdownIt-Anchor\" href=\"#指针\">#</a> 指针</h1>\n<h2 id=\"使用指针\"><a class=\"markdownIt-Anchor\" href=\"#使用指针\">#</a> 使用指针</h2>\n<p>​\t\t想要在函数中完成变量的交换，不被形参所限制。</p>\n<p>​\t\t<strong>指针</strong>可以达成我们的目的。</p>\n<p>​\t\t在程序运行时，变量被创建时， 变量都会被分配到一个内存位置。</p>\n<p>​\t\t内存位置可以通过 **&amp; 运算符<strong>获取</strong>地址 **。</p>\n<p>​\t\t<strong>注意： 指针变量的类型必须要跟被取地址变量类型一致</strong></p>\n<h2 id=\"怎么理解指针\"><a class=\"markdownIt-Anchor\" href=\"#怎么理解指针\">#</a> 怎么理解指针</h2>\n<p>让我们把 *p ，拆分成两部分去理解。</p>\n<p><strong>’p’ 部分 ：是一个变量，能存储地址。</strong></p>\n<p><strong>’*’ 部分 ：获取变量 p 储存的地址，并找到该地址上存储的值。</strong></p>\n<p>​\t\t运行上面的代码，输出 *p 的值就是 var 的值。</p>\n<p>​\t\t** 注意：** 多数时候指针初始化置 <strong>NULL</strong> 很有必要。</p>\n<h2 id=\"指针基本运算\"><a class=\"markdownIt-Anchor\" href=\"#指针基本运算\">#</a> 指针基本运算</h2>\n<p>​\t\t指针就是地址，地址在内存中也是以数的形式存在，所以指针也能进行基本运算。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a;</span><br><span class=\"line\"><span class=\"keyword\">int</span> *p = &amp;a;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%p\\n&quot;</span>,p);</span><br><span class=\"line\">p++;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%p\\n&quot;</span>,p);</span><br><span class=\"line\">p -= <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%p\\n&quot;</span>,p);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"指向一维数组的指针\"><a class=\"markdownIt-Anchor\" href=\"#指向一维数组的指针\">#</a> 指向一维数组的指针</h2>\n<ul>\n<li>\n<p>数组中的每个数据都会保存在一个储存单元里面，只要是储存单元就会有地址，所以就可以用 指针保存数组储存单元的地址。</p>\n<p><em>为指针赋数组数据的地址</em></p>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> *p = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> num[<span class=\"number\">5</span>] = &#123;<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">5</span>; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">p = &amp;num[i];</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>,*p);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>可以使用指针操作一维数组</strong></p>\n<ul>\n<li>第一种</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a[<span class=\"number\">5</span>]=&#123;<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">int</span> *p = a;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,*p);</span><br><span class=\"line\">p++;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,*p);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>第二种</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> num[<span class=\"number\">5</span>] = &#123;<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">int</span> *p;</span><br><span class=\"line\">p = &amp;num[<span class=\"number\">0</span>];</span><br></pre></td></tr></table></figure>\n<h2 id=\"指向二维数组的指针\"><a class=\"markdownIt-Anchor\" href=\"#指向二维数组的指针\">#</a> 指向二维数组的指针</h2>\n<p>​\t\t跟一维数组相似</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> num[<span class=\"number\">3</span>][<span class=\"number\">2</span>] = &#123;&#123;<span class=\"number\">1</span>,<span class=\"number\">2</span>&#125;,&#123;<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;,&#123;<span class=\"number\">5</span>,<span class=\"number\">6</span>&#125;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">int</span> *p = &amp;num[<span class=\"number\">0</span>][<span class=\"number\">0</span>];</span><br></pre></td></tr></table></figure>\n<ul>\n<li>注意： 不能为指针直接赋予二维数组的数组名，即上面的代码不能写成： int *p = num；</li>\n</ul>\n<h2 id=\"数组指针\"><a class=\"markdownIt-Anchor\" href=\"#数组指针\">#</a> 数组指针</h2>\n<p>​\t\t<strong>顾名思义：</strong> 指向数组的指针</p>\n<p>​\t\t如果一个指针指向了数组，就称它为数组指针。c</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a[<span class=\"number\">4</span>][<span class=\"number\">3</span>] = &#123;&#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>&#125;,&#123;<span class=\"number\">1</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>&#125;,&#123;<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;,&#123;<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>\n<p>​\t\t在概念上的矩阵是像这种矩阵的样子：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span> <span class=\"number\">2</span> <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"number\">5</span> <span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br></pre></td></tr></table></figure>\n<p>​\t\t但实际上它在内存中是链式存储的：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br></pre></td></tr></table></figure>\n<p>​\t\t定义一个数组指针</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> (*p)[<span class=\"number\">3</span>] = a;</span><br></pre></td></tr></table></figure>\n<p><strong>括号里面的 * 代表 p 是一个指针，[3] 代表这个 指针 p 指向了类型为 int [3] 的数组</strong></p>\n<ul>\n<li>\n<p>p 指向数组 a 的开头，就是指向数组的第 0 行元素，p + 1 指向数组的第一行元素</p>\n</li>\n<li>\n<p>所以 *(p+1) 就表示数组的第一行元素的值，有多个数据</p>\n</li>\n<li>\n<p>*(p+1) + 1 表示第一行的第一个数据的地址</p>\n</li>\n</ul>\n<h2 id=\"二级指针\"><a class=\"markdownIt-Anchor\" href=\"#二级指针\">#</a> 二级指针</h2>\n<p>​\t\t<strong>顾名思义：</strong> 指向指针的指针</p>\n<p>​\t\t假设有一个 int 类型的变量 a ， p1 是指向 a 的指针变量， p2 又是指向 p1 的指针变量。</p>\n<p>​\t\t用代码形式展现就是：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> *p1 = &amp;a;</span><br><span class=\"line\"><span class=\"keyword\">int</span> **p2 = &amp;p1;</span><br></pre></td></tr></table></figure>\n<p>​\t\t指针变量也是一种变量，也会占用存储空间，也可以使用 &amp; 获取它的地址。C 语言不限制指针的级 数，每增加一级指针，在定义指针变量时就得增加一个星号。p1 是一级指针，指向普通类型的数据， 定义时有一个；p2 是二级指针，指向一级指针 p1，定义时有两个 *。</p>\n<p>​\t\t** 同理：** 指针可以有三级指针、四级指针等等。</p>\n<h2 id=\"指针在函数中的作用\"><a class=\"markdownIt-Anchor\" href=\"#指针在函数中的作用\">#</a> 指针在函数中的作用</h2>\n<p><strong>指针作为函数的参数</strong></p>\n<p>写一个函数并调用，实现交换变量的值</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swap</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> temp= a;</span><br><span class=\"line\">a = b;</span><br><span class=\"line\">b = temp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>;</span><br><span class=\"line\">swap(a, b);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a=%d\\nb=%d\\n&quot;</span>,a,b);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t运行上面的代码，<strong>a 和 b 的值并没有发生交换</strong></p>\n<h2 id=\"形参形式参数\"><a class=\"markdownIt-Anchor\" href=\"#形参形式参数\">#</a> 形参（形式参数）</h2>\n<p>​\t\t在函数定义中出现的参数，它没有数据，只能在函数被调用时接收传递进来的数据，所以称为<strong>形式参数</strong>。</p>\n<h2 id=\"实参实际参数\"><a class=\"markdownIt-Anchor\" href=\"#实参实际参数\">#</a> 实参（实际参数）</h2>\n<p>​\t\t函数被调用时给出的参数包含了实实在在的数据，会被函数内部的代码使用，所以称为<strong>实际参数</strong>。 形参和实参的功能是传递数据，发生函数调用时，实参的值会传递给形参。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swap</span><span class=\"params\">(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> temp= a;</span><br><span class=\"line\">a = b;</span><br><span class=\"line\">b = temp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>;</span><br><span class=\"line\">swap(a, b);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a=%d\\nb=%d\\n&quot;</span>,a,b);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>main 函数</strong> 中调用的 <strong>swap 函数</strong> <strong>swap(a, b);</strong> 中的 a，b 是<strong>实参</strong>。</p>\n<p>​\t\t<strong>swap 函数</strong> 定义的 <strong>void swap(int a,int b)</strong> 中的 a，b 是<strong>形参。</strong></p>\n<p>​\t\t在 c 语言中实参和形参之间的数据传输是单向的 “值传递” 方式，也就是实参可以影响形参，而形参不 能影响实参。指针变量作为参数也不例外，但是可以改变实参指针变量所指向的变量的值。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//正确的变量交换代码</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swap</span><span class=\"params\">(<span class=\"keyword\">int</span> *a,<span class=\"keyword\">int</span> *b)</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> *temp= a;</span><br><span class=\"line\">a = b;</span><br><span class=\"line\">b = temp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">0</span>, b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a);</span><br><span class=\"line\">swap(&amp;a, &amp;b);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;a=%d\\nb=%d\\n&quot;</span>,a,b);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t上面代码在调用 scanf 或者 swap 函数的时候，传入变量时，变量前都使用了 &amp; 运算符</p>\n<p>​\t\t这两个函数通过传入的地址去改变了实参。</p>\n<h2 id=\"指针函数\"><a class=\"markdownIt-Anchor\" href=\"#指针函数\">#</a> 指针函数</h2>\n<p>​\t\tC 语言允许函数的返回值是一个指针（地址），我们将这样的函数称为指针函数。</p>\n<p>​\t\t下面的例子定义了一个函数 strlong () ，用来返回两个字符串中较长的一个：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span> *<span class=\"title\">strlong</span><span class=\"params\">(<span class=\"keyword\">char</span> *str1, <span class=\"keyword\">char</span> *str2)</span></span>&#123;<span class=\"comment\">//返回类型是(char*)</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"built_in\">strlen</span>(str1) &gt;= <span class=\"built_in\">strlen</span>(str2))&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> str1;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> str2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">char</span> str1[<span class=\"number\">30</span>], str2[<span class=\"number\">30</span>], *str;</span><br><span class=\"line\">gets(str1);</span><br><span class=\"line\">gets(str2);</span><br><span class=\"line\">str = strlong(str1, str2);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Longer string: %s\\n&quot;</span>, str);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>注意：函数运行结束后会销毁在它内部定义的所有局部数据，包括局部变量、局部数组和形式参数。</strong></p>\n<h1 id=\"结构体\"><a class=\"markdownIt-Anchor\" href=\"#结构体\">#</a> 结构体</h1>\n<p>​\t\t如果我们想存储多个学生的信息，比如身高、体重、学习成绩，等等。</p>\n<p>​\t\t在学结构体前，我们可以使用多个数组，用相同下标去存储一个学生的所有信息。</p>\n<p>​\t\t或者使用很多的变量，去储存信息，上述实现方法显得相当麻烦。</p>\n<p>​\t\tC 语言向我们提供了一种数据类型 <strong>：结构体（struct）</strong>。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//结构体定义</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">student</span>&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> height;</span><br><span class=\"line\"><span class=\"keyword\">double</span> weight;</span><br><span class=\"line\"><span class=\"keyword\">char</span> name[<span class=\"number\">20</span>];</span><br><span class=\"line\"><span class=\"keyword\">int</span> score;</span><br><span class=\"line\">&#125;student1;</span><br></pre></td></tr></table></figure>\n<p>​\t\t这是一个结构体的定义，拆分看。</p>\n<p>​\t\t<strong>struct student:</strong> struct 是定义结构体必备的前缀。student 是结构体标签。 struct student 可 以像 int、double、float 作为定义变量的数据类型。</p>\n<p>​\t\t**{} 内的变量：** 结构体就像个模板，能规定好里面填什么变量。</p>\n<p>​\t\t**student1：** 定义 struct student 类型的变量 .</p>\n<p><strong>typedef</strong></p>\n<p>​\t\t<strong>typedef</strong> 这是一个重命名的关键字</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//typedef + 数据类型 + 你想要重命名的英文</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">student</span>&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> height;</span><br><span class=\"line\"><span class=\"keyword\">double</span> weight;</span><br><span class=\"line\"><span class=\"keyword\">char</span> name[<span class=\"number\">20</span>];</span><br><span class=\"line\"><span class=\"keyword\">int</span> score;</span><br><span class=\"line\">&#125;Stu;</span><br></pre></td></tr></table></figure>\n<p>​\t\ttypedef 在这段代码中将 stu 等效成了  <code>struct student ，而不是一个 struct student</code>  类型的变量。</p>\n<p>​\t\t<strong>结构体变量的初始化</strong></p>\n<p>​\t\t结构体也是一种数据类型，从某种程度上说与 int 等类似，属于同级，所以定义变量的方式也是一样的。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">truct Stu stu1,stu2; <span class=\"comment\">//这里定义了Stu类型的变量</span></span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>结构体成员的赋值</strong></p>\n<p>​\t\t结构体成员的获取形式为：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">结构体变量名.成员名;</span><br></pre></td></tr></table></figure>\n<p>​\t\t<strong>示例：</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Stu stu1;</span><br><span class=\"line\">stu1.height = <span class=\"number\">175</span>;</span><br><span class=\"line\">stu1.name = <span class=\"string\">&#x27;辰灏&#x27;</span>;</span><br><span class=\"line\">stu1.weight = <span class=\"number\">100.0</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;身高：%d,姓名：%s,体重：%lf\\n&quot;</span>,stu1.height,stu1.name,stu1.weight);</span><br></pre></td></tr></table></figure>\n<h2 id=\"结构体的使用\"><a class=\"markdownIt-Anchor\" href=\"#结构体的使用\">#</a> 结构体的使用</h2>\n<ul>\n<li>在结构体中使用数组</li>\n</ul>\n<p><strong>结构体中的成员变量可以是数组，没有什么特别的。</strong></p>\n<ul>\n<li>结构体与指针</li>\n</ul>\n<p><strong>结构体可以作为函数的参数传进子函数中，然后在子函数中使用.</strong></p>\n<p><strong>下面是一个输出函数</strong></p>\n<p><strong>Node 是一个结构体，print () 是一个子函数，这个子函数有一个 Node 类型的参数</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">(Stu *stu)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(!p)</span><br><span class=\"line\"><span class=\"keyword\">return</span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,stu-&gt;height);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"链表\"><a class=\"markdownIt-Anchor\" href=\"#链表\">#</a> 链表</h2>\n<p>结构体变量指针</p>\n<ul>\n<li>结构体变量指向自身</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">table</span>&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> i;</span><br><span class=\"line\"><span class=\"keyword\">char</span> c;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">table</span> *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">//在初始化时，变量next,会指向自身，所以在初始化变量时要把next指针置NULL。</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>指向其它结构变量</p>\n<p>​\t即将定义的两个结构体变量，比方说定义了 st1 和 st2 两个结构体变量，只需要将 st2 的地址 赋给 st1 的指针域，这样 st1 的指针就指向了 st2。</p>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">table</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> i;</span><br><span class=\"line\"><span class=\"keyword\">char</span> c;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">table</span> *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">strcut table st1 = &#123;<span class=\"number\">1</span>,<span class=\"string\">&#x27;a&#x27;</span>&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">table</span> <span class=\"title\">st2</span> =</span> &#123;<span class=\"number\">2</span>,<span class=\"string\">&#x27;b&#x27;</span>&#125;;</span><br><span class=\"line\">st1.next = &amp;st2;</span><br></pre></td></tr></table></figure>\n<h3 id=\"动态创建链表\"><a class=\"markdownIt-Anchor\" href=\"#动态创建链表\">#</a> 动态创建链表</h3>\n<ul>\n<li>\n<p>构造一个结构类型，此结构类型必须包含至少一个成员指针，此指针要指向此结构类型</p>\n</li>\n<li>\n<p>定义 3 个结构体类型的指针，按照用途可以命名为，p_head,p_rail,p_new</p>\n</li>\n<li>\n<p>动态生成新的结点，为各成员变量赋值，最后加到链表当中。</p>\n</li>\n<li>\n<p>动态创建的链表，没有一个单独的变量名去寻找到节点，全部都是由结构体中的 next 指针找 到下一个节点</p>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">node</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">short</span> i; <span class=\"comment\">//数据域</span></span><br><span class=\"line\"><span class=\"keyword\">char</span> c; <span class=\"comment\">///数据域</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">node</span> *<span class=\"title\">next</span>;</span> <span class=\"comment\">//指针域，用于指向下一个结点</span></span><br><span class=\"line\">&#125;Node;</span><br></pre></td></tr></table></figure>\n<p>​\t\t定义结构体指针，不一定要在 main 函数中定义</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Node *p_head,*p_rail,*p_new ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用malloc函数申请存储空间\"><a class=\"markdownIt-Anchor\" href=\"#使用malloc函数申请存储空间\">#</a> 使用 malloc 函数申请存储空间</h3>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p_head = (Node*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Node));</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>（struct node*) 强制类型转换</p>\n</li>\n<li>\n<p>malloc () 申请空间函数</p>\n</li>\n<li>\n<p>sizeof () 申请的大小函数 在使用完这个结构体以后可以使用函数</p>\n</li>\n<li>\n<p>free () 将申请的空间释放。</p>\n</li>\n</ul>\n<p>​\t示例：</p>\n<p>​\t\t构造结构体</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">node</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">short</span> i;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span> c;</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">node</span> *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125;Node;</span><br><span class=\"line\"><span class=\"comment\">//定义变量</span></span><br><span class=\"line\">Node node1 = &#123;<span class=\"number\">1</span>,<span class=\"string\">&#x27;A&#x27;</span>&#125;;</span><br><span class=\"line\">Node node2 = &#123;<span class=\"number\">2</span>,<span class=\"string\">&#x27;B&#x27;</span>&#125;;</span><br><span class=\"line\">Node node3 = &#123;<span class=\"number\">3</span>,<span class=\"string\">&#x27;C&#x27;</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">//链表连接</span></span><br><span class=\"line\">node1.next = &amp;node2;</span><br><span class=\"line\">node2.next = &amp;node3;</span><br><span class=\"line\"><span class=\"comment\">//动态申请节点并添加到链表中</span></span><br><span class=\"line\">Node *p_new;</span><br><span class=\"line\">p_new = (Node *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Node));</span><br><span class=\"line\">p_new-&gt;i = <span class=\"number\">4</span>;</span><br><span class=\"line\">p_new-&gt;c = <span class=\"string\">&#x27;d&#x27;</span>;</span><br><span class=\"line\">node3.next = p_new;</span><br></pre></td></tr></table></figure>\n<h3 id=\"链表操作\"><a class=\"markdownIt-Anchor\" href=\"#链表操作\">#</a> 链表操作</h3>\n<p>插入</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2021/10/0bf521dd435c6a14.png\" alt></p>\n<ul>\n<li>插入节点到头节点之前</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Node p_new = (Node *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Node)); <span class=\"comment\">//创建新结点，并为其开辟空间</span></span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%c&quot;</span>,&amp;(p_new-&gt;i),&amp;(p_new-&gt;c)); <span class=\"comment\">//录入结点数据</span></span><br><span class=\"line\"><span class=\"comment\">//插入节点</span></span><br><span class=\"line\">p_new-&gt;next = p_head;</span><br><span class=\"line\">p_head = p_new;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>插入节点到链表中间</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Node *p_new = (Node *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Node)); <span class=\"comment\">//创建新结点，并为其开辟空间</span></span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%c&quot;</span>,&amp;(p_new-&gt;i),&amp;(p_new-&gt;c)); <span class=\"comment\">//录入结点数据</span></span><br><span class=\"line\">Node *p_front = p_head-&gt;next;</span><br><span class=\"line\">p_new-&gt;next = p_front-&gt;next;</span><br><span class=\"line\">p_front-&gt;next = p_new;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>插入节点到末尾</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(Node *p)</span></span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(!p)&#123; <span class=\"comment\">//如果p是空的</span></span><br><span class=\"line\">p = (Node *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Node));</span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%c&quot;</span>,&amp;(p-&gt;i),&amp;(p-&gt;c)); <span class=\"comment\">//录入结点数据</span></span><br><span class=\"line\">p-&gt;next = <span class=\"literal\">NULL</span>;<span class=\"comment\">//next节点置空</span></span><br><span class=\"line\"><span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Node p_loop = p;</span><br><span class=\"line\"><span class=\"keyword\">while</span>(p_loop)&#123;</span><br><span class=\"line\">p_loop = p_loop-&gt;next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">p_new = (Node *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Node));</span><br><span class=\"line\"><span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%c&quot;</span>,&amp;(p_new-&gt;i),&amp;(p_new-&gt;c)); <span class=\"comment\">//录入结点数据</span></span><br><span class=\"line\">p_new-&gt;next = <span class=\"literal\">NULL</span>;<span class=\"comment\">//next节点置空</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>删除某一位置节点</li>\n</ul>\n<p><img src=\"https://s3.bmp.ovh/imgs/2021/10/9c1b67676cb5017d.png\" alt></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">del_list</span><span class=\"params\">(struct node *p_head,<span class=\"keyword\">int</span> pos)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tstrct node *p_front,*p_del;</span><br><span class=\"line\">\tp_front = p_head;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt;= pos - <span class=\"number\">1</span>;i ++)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\tp_front = p_front-&gt;next;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    p_del = p_front-&gt;next;</span><br><span class=\"line\">\tp_front-&gt;next = p_del-&gt;next;</span><br><span class=\"line\">\t<span class=\"built_in\">free</span>(p_del);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "教程",
                "学习"
            ]
        }
    ]
}